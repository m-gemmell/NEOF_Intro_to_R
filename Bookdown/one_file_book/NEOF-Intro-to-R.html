<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="R primer for omics" />
<meta property="og:type" content="book" />
<meta property="og:image" content="/figures/NEOF.png" />
<meta property="og:description" content="NEOF book for the R primer for omics workshop" />


<meta name="author" content="Matthew R. Gemmell" />

<meta name="date" content="2023-11-21" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="NEOF book for the R primer for omics workshop">

<title>R primer for omics</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<!--bookdown:toc:end-->
<!--bookdown:toc:start-->
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="header">
<h1 class="title">R primer for omics</h1>
<h4 class="author"><em>Matthew R. Gemmell</em></h4>
<h4 class="date"><em>2023-11-21</em></h4>
</div>
<p><img src="figures/NEOF.png" width="30%" style="display: block; margin: auto;" /></p>



<div id="introduction" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Introduction</h1>
<p><img src="figures/R.png" width="20%" style="display: block; margin: auto;" /></p>
<p>This course will teach you the fundamentals of R, an essential skill for some of our future courses. The first day will focus on the basics of R with foundations and objects. In day 2 we will look at how to read in files and write out files from R. Additionally, you will get further practice on the previous materials whilst learning some handy tips and tricks.</p>
<p>There are extra materials you can attempt after the workshop. These will allow you to apply your R skills to create plots and carry out some statistics. The plots section includes creating line graphs, histograms, scatterplots, and boxplots. The statistiscs section will cover carrying out some basic statistics, don’t worry it won’t be a statistics lesson. Finally, the last section will introduce some harder coding where you’ll learn to make loops, use ifs, and create R functions.</p>
<p>These materials will involve theory, practice, exercises, and solutions:</p>
<ul>
<li>The theory will explain R concepts and terminology. R terminology can be quite confusing but it is important to learn as it makes asking questions online a lot easier.</li>
<li>Practice will involve code to run whilst reading through the theory. This will allow you to see the output of R and hopefully help you understand how R works.</li>
<li>Multiple choice questions (MCQs): These will be used as recap questions at the end of chapters to help solidify the knowledge you are gaining.</li>
<li>Exercises will give you a task to carry out based on the knowledge and skills you learned from the theory and practise.</li>
<li>Solutions for the exercise are after the exercise. Please try the exercise before looking at the solutions, however make sure you read the solutions even if you completed the exercise successfully as there is extra information in these sections.</li>
</ul>
<p>Commands are in the following font and colour and should be run in RStudio (These should not be copied into R from this document):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>This is a command </span></code></pre></div>
<div id="table-of-contents" class="section level2 unnumbered">
<h2>Table of contents</h2>
<table class="table" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:center;">
<a href="#foundations"><strong>Foundations</strong></a>
</td>
<td style="text-align:center;">
<a href="#robjectschap"><strong>R objects</strong></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#foundations"><img src="figures/foundational.png" height="150" /></a>
</td>
<td style="text-align:center;">
<a href="#robjectschap"><img src="figures/RObjects.png" height="150" /></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#filesubsettingchap"><strong>Files &amp; subsetting data</strong></a>
</td>
<td style="text-align:center;">
<a href="#tipsandtrickschap"><strong>Handy tips &amp; tricks</strong></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#filesubsettingchap"><img src="figures/R_df.png" height="150" /></a>
</td>
<td style="text-align:center;">
<a href="#tipsandtrickschap"><img src="figures/magic.png" height="150" /></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#histsandlineschap"><strong>Histograms &amp; line graphs</strong></a>
</td>
<td style="text-align:center;">
<a href="#scatterandboxchap"><strong>Scatter plots &amp; box plots</strong></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#histsandlineschap"><img src="figures/palette.png" height="150" /></a>
</td>
<td style="text-align:center;">
<a href="#scatterandboxchap"><img src="figures/large_brush.png" height="150" /></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#basicstats"><strong>Basic stats</strong></a>
</td>
<td style="text-align:center;">
<a href="#basicprogramming"><strong>Basic programming</strong></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#basicstats"><img src="figures/basic_stats.png" height="150" /></a>
</td>
<td style="text-align:center;">
<a href="#basicprogramming"><img src="figures/programming.png" height="150" /></a>
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#appendix"><strong>Appendix</strong></a>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:center;">
<a href="#appendix"><img src="figures/internet.png" height="150" /></a>
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

</div>
</div>



<div id="foundations" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Foundations of R</h1>
<p><img src="figures/foundational.png" width="20%" style="display: block; margin: auto;" /></p>
<p>This section will cover the foundations of R. Understanding these concepts is fundamental to becoming an R user. The section will start with <strong>operators</strong>, these include <code>+</code>, <code>-</code>, <code>*</code>, and <code>/</code>, they allow us to use R like a calculator. Then we will look at <strong>variables</strong>. <strong>Variables</strong> allow us to save the output from commands so we can use it in future commands.</p>
<p>A lot of the power of R comes from the vast array of <strong>functions</strong> it contains. We will therefore look at some useful <strong>functions</strong> to see how they work. Additionally, we’ll look at how to interact with directories in R.</p>
<p>The section will end showing you some ways to use RStudio and the <strong>script editor</strong>.</p>
<div id="operators" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Operators</h2>
<p><img src="figures/calculator.png" width="20%" style="display: block; margin: auto;" /></p>
<p><strong>Operators</strong> are symbols in R that allow you to carry out many common tasks. The 3 main types of <strong>operators</strong> in R are arithmetic, logical, and bitwise. We will ignore logical and bitwise and have a look at some arithmetic <strong>operators</strong>.</p>
<p>The four most commonly used arithmetic <strong>operators</strong> are:</p>
<ul>
<li><code>+</code> : Addition</li>
<li><code>-</code> : Minus</li>
<li><code>/</code> : Divide</li>
<li><code>*</code> : Multiply</li>
</ul>
<p>Run the following commands in your RStudio <strong>console</strong>.</p>
<p><strong>Note:</strong> Each line below represents one command. Once a command is typed out press enter to run the command.</p>
<p><strong>Note:</strong> The amount of space between the integers/numbers and an operator does not matter. It is a matter of preference and clarity.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">2</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="dv">7-7</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="dv">10</span><span class="sc">/</span><span class="dv">5</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="dv">3</span><span class="sc">*</span><span class="dv">3</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="dv">6</span><span class="sc">+</span><span class="dv">2</span><span class="sc">+</span><span class="dv">4</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="dv">8-1-3</span></span></code></pre></div>
<p>R follows the BODMAS rules (Brackets, Orders (powers/roots), Division, Multiplication, Addition, Subtraction). Try out the following commands to demonstrate the usefulness of brackets.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">5</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>((<span class="dv">3</span><span class="sc">+</span><span class="dv">2</span>) <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">/</span> <span class="dv">5</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="dv">3</span> <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span><span class="dv">4</span> <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>(<span class="dv">3-2</span>) <span class="sc">*</span> (<span class="dv">4</span><span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">2</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>(<span class="dv">3</span><span class="sc">*</span><span class="dv">3</span>) <span class="sc">/</span> ((<span class="dv">2</span><span class="sc">*</span><span class="dv">2</span>) <span class="sc">-</span> <span class="dv">1</span>)</span></code></pre></div>
<p>When entering commands via the <strong>console</strong> the results/output is printed to the screen (ignore the [1] at the moment). However, this is no better than a normal calculator currently. R is a lot more powerful as we shall see.</p>
</div>
<div id="variables" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Variables</h2>
<p><img src="figures/boxes.png" width="20%" style="display: block; margin: auto;" /></p>
<p>The output/result of a command can be saved as a <strong>variable</strong>. Below is the format for creating a <strong>variable</strong> in R (don’t type this into R).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>variable_name <span class="ot">&lt;-</span> variable_object</span></code></pre></div>
<p>There are 3 parts to the above:</p>
<ul>
<li>The <strong>variable name</strong> (<code>variable_name</code>). This is the name of the <strong>variable</strong> and is what will be used to refer to the <strong>variable</strong> in future commands. This name can be almost anything. There are some rules on what can be in a name:
<ul>
<li>Must start with a letter.</li>
<li>Cannot contain spaces.</li>
<li>Cannot start with a number.</li>
<li>Cannot share the same name as a command or function in R.</li>
<li>They are case sensitive. The <strong>variable</strong> name <code>BB</code> is different to the <strong>variable</strong> name <code>bb</code> which is different again to <code>bB</code>. I find it easiest to keep <strong>variable names</strong> in lower case.</li>
</ul></li>
<li><code>&lt;-</code> is called the assignment <strong>operator</strong>. It assigns the <strong>variable object</strong> to the <strong>variable name</strong>.
<ul>
<li>Tip you can press ‘ALT’+ ‘-’ after a <strong>variable name</strong> as a shortcut for the assignment <strong>operator</strong>.</li>
</ul></li>
<li>The <strong>variable object</strong> (<code>variable_object</code>). This can be many different objects including the output/results from commands, strings/words, numbers, and many other R data types.</li>
</ul>
<p>A <strong>variable</strong> can be thought of as a box. The <strong>variable object</strong> is held in the box but it can be replaced with any other object. The <strong>variable name</strong> can then be thought as the label on the box so you can tell which box is which.</p>
<p>Type the below commands into the RStudio <strong>console</strong>.</p>
<p><strong>Note.</strong> Remember the amount of spaces between <strong>operators</strong> and <strong>integers</strong> does not matter. I encourage you to experiment with this spacing so you find what is best for you in terms of ease and clarity.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>bakers_dozen <span class="ot">&lt;-</span> <span class="dv">13</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>kilobyte <span class="ot">&lt;-</span> <span class="dv">1024</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>I <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>II <span class="ot">&lt;-</span> I <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="dv">7</span> <span class="sc">-</span> II</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>X <span class="ot">&lt;-</span> (II <span class="sc">/</span> I) <span class="sc">*</span> V</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>L <span class="ot">&lt;-</span> X <span class="sc">*</span> V</span></code></pre></div>
<p>In the above commands the <strong>variables</strong> are not printed out to the screen, this is as it should be. The <strong>variables</strong> are appearing in the <strong>environment</strong> pane (Top right). This is very convenient to see what variables are currently in the <strong>environment</strong> and to see what they contain.</p>
<p>To print the contents of a <strong>variable</strong> to screen you can type the <strong>variable name</strong> into the <strong>console</strong> and press enter. This will print the <strong>variable object</strong> to the screen. This is not needed for small <strong>variable objects</strong>, for which you can look at the <strong>environment</strong> pane, but is useful for larger <strong>variable objects</strong>.</p>
</div>
<div id="functions" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Functions</h2>
<p><img src="figures/function.png" width="20%" style="display: block; margin: auto;" />
R <strong>Functions</strong> allow the user to carry out a specific task. R has many inbuilt <strong>functions</strong> but you can also create your own. Currently we will look at in built functions.</p>
<p>The basic layout of a <strong>function</strong> is:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">function_name</span>(objects, options)</span></code></pre></div>
<p>There are 3 main parts to the above:</p>
<ul>
<li>The <strong>function name</strong> (<code>function_name</code>)</li>
<li>The <strong>object/s</strong> to provide to the <strong>function</strong>.
<ul>
<li>This can be numbers, strings, <strong>variables</strong> we have created etc.</li>
<li>Most <strong>functions</strong> require at least one <strong>object</strong>.</li>
<li>Some <strong>functions</strong> can take multiple objects, if multiple <strong>objects</strong> are provided they must be separated by <code>,</code>.</li>
</ul></li>
<li><strong>Function</strong> options (<code>options</code>). Options can be provided to some <strong>functions</strong> to alter the way they will work.
<ul>
<li>Some <strong>functions</strong> don’t have options.</li>
<li>Most options have default modes. If the options is not specified the default mode will be used.</li>
<li>Like <strong>objects</strong>, when using multiple options they must be separated by <code>,</code>.</li>
</ul></li>
</ul>
<p>Try running the below commands in your Rstudio <strong>console</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">ceiling</span>(<span class="fl">3.5</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">floor</span>(<span class="fl">3.5</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">9</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.5555</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.5555</span>, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.5555</span>, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>two <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="dv">4</span>)</span></code></pre></div>
<p>The help page of <strong>functions</strong> can be accessed in 2 main ways:</p>
<ul>
<li>Click on the <strong>function name</strong> so your cursor is in it and press <strong>F1</strong>.</li>
<li>Type <code>?</code> followed by the <strong>function name</strong>. Example below:</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>?ceiling</span></code></pre></div>
</div>
<div id="directories" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Directories</h2>
<p><img src="figures/directories.png" width="20%" style="display: block; margin: auto;" />
It is important to know what directory you are working in and how to change to different directories.</p>
<div id="commands" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Commands</h3>
<p>Below are commands you can run in the RStudio <strong>console</strong> or <strong>script editor</strong> (use of script editor will be taught soon).</p>
<ul>
<li>Determine what directory you are currently in:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">getwd</span>()</span></code></pre></div>
<ul>
<li>Set working directory. The path of the directory must be in quotes like below. If you do run the below command make sure the path exists in your computer, as I am the sure the example below will not.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/path/of/directory&quot;</span>)</span></code></pre></div>
<ul>
<li>List the files in the current directory:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">list.files</span>()</span></code></pre></div>
</div>
<div id="rstudio-interface" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> RStudio Interface</h3>
<p>The RStudio interface can also be used to carry out the above tasks.</p>
<p>To see what the current working directory is, you can look at the top bar of the <strong>console window</strong>. The below shows I am in the <strong>“F:/R/CE/CE_R_for_Everyone”</strong> directory.</p>
<p><img src="figures/current_wd.png" width="80%" style="display: block; margin: auto;" /></p>
<p>There are two main ways to set your working directory.</p>
<ol style="list-style-type: decimal">
<li>Via the tool bar:
<ol style="list-style-type: decimal">
<li>Click <strong>“Session”</strong></li>
<li>Go to the <strong>“Set Working Directory”</strong> drop down section</li>
<li>Click <strong>“Choose Directory..”</strong></li>
<li>Use the pop-up browser to choose a directory</li>
</ol></li>
<li>Via the <strong>MISC window</strong> (bottom right)
<ol style="list-style-type: decimal">
<li>Click the <strong>Files pane</strong></li>
<li>Navigate to the directory you would like to set as the working directory</li>
<li>On the <strong>MISC toolbar</strong> click on the cog icon (It may say <strong>“More”</strong> beside it).</li>
<li>On the drop down click <strong>“Set As Working Directory”</strong></li>
</ol></li>
</ol>
<p>To show the current working directory in the <strong>Files</strong> pane click the arrow on the top bar of the <strong>console window</strong>. You can then see what files and directories are in your working directory via the <strong>Files</strong> pane in the <strong>MISC</strong> window.</p>
<p><img src="figures/see_files.png" width="80%" style="display: block; margin: auto;" /></p>
<p>With this information create a directory you will use for this course. This can be done outside of Rstudio or you can use the <strong>Files pane</strong> in the <strong>MISC window</strong>. Once this is created set your working directory to it. With that done we can go onto the next section.</p>
</div>
</div>
<div id="scripteditor" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Script editor</h2>
<p><img src="figures/editor.png" width="20%" style="display: block; margin: auto;" />
You can quickly type and run code using the <strong>console window</strong>. However, to fully utilise Rstudio we will instead use the <strong>script editor</strong> in the <strong>source window</strong>. This allows us to reuse and edit code easier and it allows us to save our code so we can come back to it.</p>
<p>If you cannot see your <strong>script editor</strong>, click the multi window button on the top of the <strong>source window</strong> or <strong>console window</strong>.
<img src="figures/script_editor_expand.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Type the below into the <strong>script editor</strong> and press <strong>“enter”</strong>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<p>Pressing enter goes to a new line without running the command, just like other text editors (word, emails etc.).</p>
<p>On the new line type the below:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="dv">4</span> <span class="sc">-</span> <span class="dv">1</span></span></code></pre></div>
<div id="running-commands" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Running commands</h3>
<p><img src="figures/command.png" width="20%" style="display: block; margin: auto;" /></p>
<p>You can run a command that is in the script editor by one of the two following ways:</p>
<ul>
<li>Via cursor:
<ul>
<li>Move the cursor to the line you would like to run.</li>
<li>Press <strong>“Ctrl” + “enter”</strong> ( <strong>“cmd”</strong> + <strong>“enter”</strong> for Mac)</li>
</ul></li>
<li>Highlighting:
<ul>
<li>Highlight the parts you would like and press <strong>“Ctrl” + “enter”</strong> ( <strong>“cmd”</strong> + <strong>“enter”</strong> for Mac)</li>
<li>You can highlight a part of a line, a whole line, and even multiple lines.</li>
</ul></li>
</ul>
<p>Run the commands you currently have in your <strong>script editor</strong>.</p>
<p>The <strong>script editor</strong> is unaffected with only the cursor moving if you used the cursor method. What is actually happening is that your commands are being copied to the <strong>console window</strong> and are being run there.</p>
<p>I would encourage to primarily use the script editor to write your code. It is brilliant for editing, reusing, and documenting your code.</p>
</div>
<div id="annotations" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Annotations</h3>
<p><img src="figures/hashtag.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Annotations can be added to your code in the <strong>script editor</strong>. If a line starts with a <code>#</code> it will not be run as a command, this line is then an annotation. This is extremely useful to leave information for your future self. It is much harder to go back to old code and figure out what it does if it is just code.</p>
<p>Be a mate, annotate.</p>
<p>Edit the contents of your <strong>script editor</strong> so it looks like the below. Then run all the lines.</p>
<p><strong>Tip</strong>: If you have selected the <strong>script editor</strong> you can use <strong>“Ctrl”</strong> + <strong>“a”</strong> to highlight all.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">#Command 1</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#Command 2</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="dv">4</span> <span class="sc">-</span> <span class="dv">1</span></span></code></pre></div>
</div>
<div id="saving-scripts" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Saving scripts</h3>
<p><img src="figures/r_save.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Finally, one of the best aspects of using the <strong>script editor</strong> is that you can save your scripts. I use this so I can have scripts for specific projects and template scripts for certain tasks I routinely carry out.</p>
<ul>
<li>To save a script you can click the floppy disk on the toolbar of the <strong>source window</strong>.</li>
<li>To save as, go to the RStudio toolbar and click <strong>“File”</strong> &gt; <strong>“Save As…”</strong>.</li>
</ul>
</div>
<div id="open-a-saved-script" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Open a saved script</h3>
<p>You can open a previously saved script in 2 main ways:</p>
<ul>
<li>Via the <strong>Files pane</strong> in the <strong>MISC window</strong>
<ul>
<li>Navigate to the directory with the script (you do not need to set the working directory to this directory)</li>
<li>Click the name of the script you would like to open</li>
</ul></li>
<li>Via the Rstudio toolbar
<ul>
<li>Click <strong>“File”</strong></li>
<li>Click <strong>“Open file”</strong></li>
<li>With the popup browser navigate to the location of the script and open it</li>
</ul></li>
</ul>
</div>
<div id="new-script" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> New script</h3>
<p>You can have multiple scripts open at one time and switch between these scripts with the tabs at the top of the <strong>script editor window</strong>.</p>
<p>To create and open a new script, click on the button on the RStudio toolbar shown below and select <strong>“R script”</strong>.</p>
<p><img src="figures/new_script_button.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="foundations-mcqs" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Foundations MCQs</h2>
<p><img src="figures/question_bubble_black.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Choose the correct option to complete the below sentences:</p>
<ol style="list-style-type: decimal">
<li>________ are symbols that allow you to carry out common R tasks such as addition and multiplication.
<div id="radio_BBVXBPYLYJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BBVXBPYLYJ" value=""></input> <span>Annotations</span></label><label><input type="radio" autocomplete="off" name="radio_BBVXBPYLYJ" value=""></input> <span>Variables</span></label><label><input type="radio" autocomplete="off" name="radio_BBVXBPYLYJ" value="answer"></input> <span>Operators</span></label>
</div></li>
<li>Hash tags (<code>#</code>) can be used to create human readable ________
<div id="radio_QGZTGLXELI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QGZTGLXELI" value="answer"></input> <span>Annotations</span></label><label><input type="radio" autocomplete="off" name="radio_QGZTGLXELI" value=""></input> <span>Objects</span></label><label><input type="radio" autocomplete="off" name="radio_QGZTGLXELI" value=""></input> <span>Operators</span></label>
</div></li>
<li>________ can be assigned as R Variables
<div id="radio_CEGPAOCTIG" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_CEGPAOCTIG" value=""></input> <span>Annotations</span></label><label><input type="radio" autocomplete="off" name="radio_CEGPAOCTIG" value="answer"></input> <span>Objects</span></label><label><input type="radio" autocomplete="off" name="radio_CEGPAOCTIG" value=""></input> <span>Operators</span></label>
</div></li>
<li>The assignment operator is: ________
<div id="radio_ZXMYWACPYV" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZXMYWACPYV" value="answer"></input> <span><code>&lt;-</code></span></label><label><input type="radio" autocomplete="off" name="radio_ZXMYWACPYV" value=""></input> <span><code>==</code></span></label><label><input type="radio" autocomplete="off" name="radio_ZXMYWACPYV" value=""></input> <span><code>&gt;=</code></span></label>
</div></li>
<li><code>sqrt</code> is a R ________
<div id="radio_CVXJRVEYFF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_CVXJRVEYFF" value=""></input> <span>Console</span></label><label><input type="radio" autocomplete="off" name="radio_CVXJRVEYFF" value="answer"></input> <span>Function</span></label><label><input type="radio" autocomplete="off" name="radio_CVXJRVEYFF" value=""></input> <span>Objects</span></label>
</div></li>
<li>You can run commands in the ________
<div id="radio_MJWYMDFXLU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MJWYMDFXLU" value="answer"></input> <span>Console</span></label><label><input type="radio" autocomplete="off" name="radio_MJWYMDFXLU" value=""></input> <span>Function</span></label><label><input type="radio" autocomplete="off" name="radio_MJWYMDFXLU" value=""></input> <span>Object</span></label>
</div></li>
</ol>

</div>
</div>
<div id="foundations-of-r-exercises" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Foundations of R exercises</h1>
<p><img src="figures/kettle_bell.png" width="20%" style="display: block; margin: auto;" /></p>
<p>This will be the simplest of the exercises but will be a good opportunity to reinforce what you have learnt. In fact there is no solution section for this as it is unneeded.</p>
<p>The first task is to add the below text annotation to the top of your current script.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Foundations ####</span></span></code></pre></div>
<p>Now save the file as <strong>“1-Foundations.R”</strong> within your course directory.</p>
<p>For the next part you will need to create a new script and save it as <strong>“Exercises.R”</strong>.</p>
<p>On the first line of this script type the following annotation:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Exercise 1 ####</span></span></code></pre></div>
<p>The <code>####</code> creates a code section, these will be explained in a later week. You could also use <code>----</code> or <code>====</code> at the end of an annotation to create a code section.</p>
<p>The next step is the most tedious, unfortunately tedious repetition is one of the best ways to learn.</p>
<p>Please fill in the <strong>“Exercises.R”</strong> script with the commands from the <a href="#operators"><strong>operators</strong></a> and <a href="#variables"><strong>variables</strong></a> section from Chapter 2. Additionally, add in <a href="#annotations">annotations</a> so you can easily tell which sections the commands come from and brief lines on their purposes.</p>
<p>Annotations require a balance of enough info but not too much info, you don’t always need a line of annotation for each line of code. However, with some complex code sometimes you will need multiple lines of annotation for one line of code. It is all about how much annotation you and possibly others will need for the code at hand. Knowing this requires experience.</p>
<p>Next save the script, ensuring it is called <strong>“Exercises.R”</strong>”</p>
<p>Finally, close your script by clicking the <strong>“x”</strong>” icon on the tab of the script.</p>
<p>That is the end of Foundations of R! If you have any questions please ask and we are more than happy to try to answer.</p>

</div>
<div id="robjectschap" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> R objects</h1>
<p><img src="figures/RObjects.png" width="20%" style="display: block; margin: auto;" />
In Chapter 2 we learnt how to create a <strong>variable</strong>. This consisted of assigning (<code>&lt;-</code>) an <strong>object</strong> a name. In this chapter we will learn about <strong>R objects</strong>. There are two major R terminologies to learn to fully understand <strong>R objects</strong>.</p>
<ul>
<li><strong>Class</strong>: An <strong>R object</strong> will have a specific class. The <strong>class</strong> determines what the <strong>object</strong> is. It could be numbers, text, or other types of <strong>classes</strong>.</li>
<li><strong>Data structure</strong>: This determines the structure of an <strong>R object</strong>.</li>
</ul>
<p>The rest of today’s plan is to learn about <strong>classes</strong> and <strong>data structures</strong>.</p>
<div id="codesections" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Code sections</h2>
<p>Today, and for the rest of the course, you will use code sections in your R scripts to separate sections in this book.</p>
<p>First set your working directory to your course directory, create a script, and save it as <strong>“2-Objects.R”</strong>.</p>
<p>Next create a code section at the top of this script called <strong>“Classes”</strong>.</p>
<p>In other words have the below at the top of your script:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Classes ####</span></span></code></pre></div>
</div>
<div id="classes" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Classes</h2>
<p>There are six basic <strong>classes</strong> in R (Also known as the <strong>atomic classes</strong>).</p>
<p>The four we will learn are:</p>
<ul>
<li><strong>Integer</strong></li>
<li><strong>Double</strong></li>
<li><strong>String</strong></li>
<li><strong>Logical</strong></li>
</ul>
<p>There are also the classes <strong>complex</strong> and <strong>raw</strong>.</p>
<div id="numeric" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Numeric</h3>
<p><img src="figures/numbers.png" width="20%" style="display: block; margin: auto;" /></p>
<p><strong>Numeric</strong> <strong>classes</strong> come in two types, <strong>integer</strong> and <strong>double</strong>. <strong>Integers</strong> and <strong>doubles</strong> are almost identical. However, <strong>doubles</strong> contain decimal point information whilst <strong>integers</strong> do not.</p>
<p>Most of the time you will only need to know if your data is <strong>numeric</strong> and you will not need to worry about <strong>doubles</strong> or <strong>integers</strong>. The exception being if you are working with decimals and your decimals are not showing up. This probably means that your <strong>object</strong> has the <strong>integer class</strong>.</p>
<p>Type and run the following, using the provided annotation to understand what the commands are doing.</p>
<p><strong>Note:</strong> Remember you can copy and paste old script.</p>
<p>Use the <strong>function</strong> <code>class()</code> to show the <strong>class</strong> of an R <strong>object</strong>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">#Numeric</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#Class of 2</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">2</span>)</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">#class of 3.14</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="fu">class</span>(<span class="fl">3.14</span>)</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co">#class of 6</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">6</span>)</span></code></pre></div>
<p>Create a <strong>variable</strong> with the <strong>name</strong> “pie”” containing the <strong>numeric</strong> 3.14:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">#Creating a variable using the assignment operator</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>pie <span class="ot">&lt;-</span> <span class="fl">3.14</span></span></code></pre></div>
<p>Use the <strong>functions</strong> <code>as.numeric()</code>, <code>as.integer()</code>, and <code>as.double()</code> to print the <strong>variable</strong> as a <strong>numeric</strong>, as an <strong>integer</strong>, and as a <strong>double</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">#Printing out previously made variable as numeric, integer, and double</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="fu">as.numeric</span>(pie)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="fu">as.integer</span>(pie)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="fu">as.double</span>(pie)</span></code></pre></div>
<p>You can put a <strong>function</strong> as the <strong>variable</strong> within a <strong>function</strong>.</p>
<p>Below we will first check the <strong>class</strong> of the <strong>object</strong> within the “pie” <strong>variable</strong>. You will note that the <strong>functions</strong> we used previously did not permanently change the <strong>variable’s object</strong>. We can only change a <strong>variable</strong> if we use the <strong>assignment operator</strong>.</p>
<p>Then we will check the <strong>class</strong> of the <strong>object</strong> as it is altered by the various <code>as.</code> <strong>functions</strong>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co">#Checking the class of our variable</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">class</span>(pie)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">as.numeric</span>(pie))</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">as.integer</span>(pie))</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">as.double</span>(pie))</span></code></pre></div>
<p><strong>Note:</strong> Remember to ask for help if you need it!</p>
<p>On a side note, R comes with some inbuilt variables such as pi:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co">#The R pi is equal to 3.141593</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>pi</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co">#assign pi to 3.14</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>pi <span class="ot">&lt;-</span> <span class="fl">3.14</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="co">#print out pi to see you have changed the variable&#39;s object</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>pi</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co">#in this case if you want the original R pi object back, we can remove the one we made</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="fu">rm</span>(pi)</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>pi</span></code></pre></div>
<p>Have you been annotating your scripts?</p>
</div>
<div id="logical" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Logical</h3>
<p><img src="figures/logical.png" width="20%" style="display: block; margin: auto;" />
<strong>Logical</strong> values can be <strong>TRUE</strong> or <strong>FALSE</strong>.</p>
<p>They are primarily used when comparing objects.</p>
<p>Run the below commands to output <strong>Logical</strong> values using the various <strong>logical operators</strong>.</p>
<p>Note: when <code>!</code> is used in <strong>operators</strong> it means “not”. When used, <code>!</code> always goes at the front of the operator.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co">#Logical</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="co"># 2 less than 4 </span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&lt;</span> <span class="dv">4</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># 2 greater than 4</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">4</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co"># 2 less than or equal to 4</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&lt;=</span> <span class="dv">4</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="co"># 2 greater than or equal to 4</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;=</span> <span class="dv">4</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="co"># 2 equal to 4</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="dv">4</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="co"># 2 not equal to 4</span></span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="dv">2</span> <span class="sc">!=</span> <span class="dv">4</span></span></code></pre></div>
<p>It is probably not immediately obvious how useful <strong>logicals</strong> are, but you’ll see their usefulness later in the course.</p>
</div>
<div id="string" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> String</h3>
<p><img src="figures/string_bubble.png" width="20%" style="display: block; margin: auto;" />
<strong>Strings</strong> are text and can be modified in R in ways you would normally want to modify text. They are called <strong>strings</strong> as they are strings of characters. <strong>Strings</strong> are flanked by quote marks. Double quotes (<code>""</code>) are preferred but single quotes can also be used (<code>''</code>).</p>
<p>Type and run the below examples to get some practice with <strong>strings</strong>.</p>
<p>A <strong>string object</strong> can consist of a string containing one <strong>character</strong>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co">#String</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>one_character_string <span class="ot">&lt;-</span> <span class="st">&quot;A&quot;</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>one_character_string</span></code></pre></div>
<p>A <strong>string object</strong> can consist of a string containing multiple <strong>characters</strong>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>word_string <span class="ot">&lt;-</span> <span class="st">&quot;alphabet&quot;</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>word_string</span></code></pre></div>
<p>A <strong>string</strong> can contain all the different characters and any number of them. The only exception is that if you try to put a double quote in your string it will cause an issue.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>long_string <span class="ot">&lt;-</span> <span class="st">&quot;Strings can be long and contain more than letters. </span><span class="sc">\\</span><span class="st">.(&quot;</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>long_string</span></code></pre></div>
<p>A <strong>string</strong> doesn’t need letters, it can consist of only numbers. Note the terms <strong>string</strong> and <strong>character</strong> can be used interchangeably.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>number_string <span class="ot">&lt;-</span> <span class="st">&quot;1066&quot;</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>number_string</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">class</span>(number_string)</span></code></pre></div>
<p>You can convert a <strong>numeric</strong> to a <strong>string/character</strong>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>number <span class="ot">&lt;-</span> <span class="dv">1066</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>numeric_to_string <span class="ot">&lt;-</span> <span class="fu">as.character</span>(number)</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>numeric_to_string</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="fu">class</span>(numeric_to_string)</span></code></pre></div>
<p>An appropriate <strong>string</strong> can be converted to a <strong>numeric</strong>. This is useful as mathematical <strong>operators</strong> will not work with <strong>strings</strong>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co">#will get an error as strings and maths don&#39;t mix</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="st">&quot;6&quot;</span> <span class="sc">-</span> <span class="dv">3</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="co">#will work as maths and numerics work</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="st">&quot;6&quot;</span>) <span class="sc">-</span> <span class="dv">4</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="co">#Below will not work as only strings containing numbers can be converted to numeric</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="st">&quot;not_a_number_12&quot;</span>)</span></code></pre></div>
<p>You can use certain <strong>logical operators</strong> to compare <strong>strings</strong> though:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="st">&quot;character&quot;</span> <span class="sc">==</span> <span class="st">&quot;character&quot;</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="st">&quot;1066&quot;</span> <span class="sc">!=</span> <span class="st">&quot;character&quot;</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="st">&quot;numeric&quot;</span> <span class="sc">==</span> <span class="st">&quot;string&quot;</span></span></code></pre></div>
<p>The <strong>paste() function</strong> is very useful to combine two or more <strong>strings</strong> into one.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The following is a string:&quot;</span>, long_string) </span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="fu">paste</span>(number_string, <span class="st">&quot;and the&quot;</span>, word_string)</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="co">#By default paste will put a space (sep = &quot; &quot;) between each string you provide</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co">#You can use the sep option to specify your own</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;However&quot;</span>, <span class="st">&quot; this is separated by a comma&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="co">#Or you can make it so there is no separator</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;no separator&quot;</span>,numeric_to_string, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="co">#Alternatively you can use paste0()</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="co">#Where there is no separator by default (sep =&quot;&quot;)</span></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;no separator&quot;</span>,numeric_to_string)</span></code></pre></div>
</div>
</div>
<div id="code-section-continued" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Code section continued</h2>
<p>After all that you will have some nice code and annotations in your script editor for the <strong>Classes</strong> code section.</p>
<p>Making a code section is not very useful until you have multiple code sections. To show this create a new code section at the bottom of your script called <strong>“Data structures”</strong>. This new code section will be used for the next section.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co"># Data structures ####</span></span></code></pre></div>
<p>With the new code section created we can now see why code sections are so useful. Go to the text that denotes the first code section (<strong>“Classes”</strong>). Look between the numbers on the left that signify the line number, and the text. You will see an arrow pointing downwards. You can click that arrow and it will collapse the code section. Click the arrow, now pointing right, and it will expand the code section. This is super useful so you can hide code sections in your script that you don’t currently need to look at.</p>
<p><img src="figures/R_code_section_collapse.png" width="20%" style="display: block; margin: auto;" /></p>
<p>With the <strong>“Classes”</strong> code section collapsed let us continue to the next section. There will be less annotations in this book as I expect you will make your own now.</p>
</div>
<div id="data-structures" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Data structures</h2>
<p><strong>Data structures</strong> describe how data is structured in an <strong>object</strong>. We will go into 3 main types of <strong>data structures</strong>.</p>
<ul>
<li><strong>Scalar</strong></li>
<li><strong>Vectors</strong> &amp; <strong>Lists</strong></li>
<li><strong>Matrices</strong> &amp; <strong>Data frames</strong></li>
</ul>
<div id="scalar" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Scalar</h3>
<p><img src="figures/Rscalar.png" width="15%" style="display: block; margin: auto;" />
A <strong>scalar</strong> consists of one value in an object. This can be one <strong>string</strong>, one <strong>numeric</strong>, one <strong>logical</strong> etc. We have only been working with <strong>scalars</strong> thus far but this is about to change.</p>
</div>
<div id="vectors-lists" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Vectors &amp; Lists</h3>
<p><img src="figures/Rvector.png" width="20%" style="display: block; margin: auto;" /></p>
<p>A <strong>R object</strong> can hold multiple values. Many <strong>data</strong> structures can do this with the simplest being a <strong>vector</strong>.</p>
<p>A <strong>vector</strong> can be created with the <code>c()</code> <strong>function</strong>. This function will combine the provided objects into a single <strong>vector</strong> or <strong>list</strong>.</p>
<p><strong>Vectors</strong> and <strong>lists</strong> are both 1-dimensional <strong>data structures</strong>. <strong>Vectors</strong> can only contain one <strong>class</strong> (homogeneous) whilst <strong>lists</strong> can contain multiple (heterogeneous). There is more to <strong>lists</strong> but we will not go into them.</p>
<p>Run the following commands to produce <strong>variables</strong> which contain <strong>vectors</strong>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>number_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">16</span>)</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>number_vec</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>number_series_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>number_series_vec</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>animals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Whale&quot;</span>,<span class="st">&quot;Seal&quot;</span>,<span class="st">&quot;Hedgehog&quot;</span>,<span class="st">&quot;Mouse&quot;</span>,<span class="st">&quot;Owl&quot;</span>,<span class="st">&quot;Squirrel&quot;</span>,<span class="st">&quot;Vole&quot;</span>,<span class="st">&quot;Shrew&quot;</span>)</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>animals</span></code></pre></div>
<p>Elements of a <strong>vector</strong> can be accessed through their indices:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>birds <span class="ot">&lt;-</span> animals[<span class="dv">5</span>]</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>birds</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>aquatic <span class="ot">&lt;-</span> animals[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>aquatic</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>rodents <span class="ot">&lt;-</span> animals[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">7</span>)]</span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a>rodents</span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a>mammals <span class="ot">&lt;-</span> animals[<span class="sc">-</span><span class="dv">5</span>]</span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a>mammals</span></code></pre></div>
<p>You can use <strong>operators</strong> and <strong>functions</strong> on a <strong>vector</strong>. When you do each <strong>scalar</strong> within the <strong>vector</strong> will be acted upon.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>number_vec <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>number_vec <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="fu">log</span>(number_vec)</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="fu">length</span>(rodents)</span></code></pre></div>
<p>Some <strong>functions</strong> are specifically used for <strong>vectors</strong>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">mean</span>(number_vec)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="fu">summary</span>(number_vec)</span></code></pre></div>
<p>We can also test the values within <strong>vectors</strong>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>aquatic <span class="sc">==</span> <span class="st">&quot;Whale&quot;</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>number_vec <span class="sc">&gt;</span> <span class="dv">4</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>number_vec[number_vec <span class="sc">&gt;</span> <span class="dv">4</span>]</span></code></pre></div>
<p>The <code>paste()</code> <strong>function</strong> can be used to paste <strong>string scalars</strong> to other <strong>string scalars</strong> or to <strong>string vectors</strong>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Animals&quot;</span>, animals)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>bird_or_mammal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;mammal&quot;</span>,<span class="st">&quot;mammal&quot;</span>,<span class="st">&quot;mammal&quot;</span>,<span class="st">&quot;mammal&quot;</span>,<span class="st">&quot;bird&quot;</span>,<span class="st">&quot;mammal&quot;</span>,<span class="st">&quot;mammal&quot;</span>,<span class="st">&quot;mammal&quot;</span>)</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="fu">paste</span>(animals, bird_or_mammal, <span class="at">sep =</span> <span class="st">&quot;:&quot;</span>)</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="fu">paste</span>(animals, <span class="st">&quot; is a &quot;</span>, bird_or_mammal, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
</div>
<div id="data-frames-matrices" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Data frames &amp; Matrices</h3>
<p><img src="figures/Rmatrix.png" width="20%" style="display: block; margin: auto;" /></p>
<p><strong>Data frames</strong> &amp; <strong>matrices</strong> are 2-dimensional data structures as they have rows and columns.</p>
<p>A <strong>matrix</strong> only contains 1 <strong>class</strong> (homogeneous). A <strong>data frame</strong> can contain multiple <strong>classes</strong> (heterogeneous), but each column can only contain one <strong>class</strong>.</p>
<p>Most of the time <strong>data frames</strong> and <strong>matrices</strong> can be treated the same. Because of this I generally use <strong>data frames</strong> and so we will focus on them.</p>
<p>R comes with a set of pre-loaded data. If you are interested you can use the <strong>function</strong> <code>data()</code> to see the full list.</p>
<p>We will have a quick look at the dataset “mtcars”. This is a <strong>data frame</strong> containing information on various cars. To look at the <strong>data frame</strong> in the <strong>console window</strong> run the below.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>mtcars</span></code></pre></div>
<p>The above shows the info in the <strong>console window</strong>. However we can have a better look at it in RStudio if we save it as a <strong>variable</strong> in our <strong>environment</strong> and then click the <strong>variable</strong> name on the <strong>Environment pane</strong> of the <strong>“environment and history”</strong> <strong>window</strong>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>cars_info <span class="ot">&lt;-</span> mtcars</span></code></pre></div>
<p>Now the <strong>variable</strong> will be listed in your <strong>Environment pane</strong> in the <strong>“environment and history” window</strong> . Click on the name “cars_info” in the <strong>Environment pane</strong>. A tab in your <strong>script editor</strong> will open so you can have a good look at the contents of the <strong>data frame</strong>.</p>
<p>When you are ready, close the “cars_info” tab and remove the <strong>variable</strong> with the below command.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">rm</span>(cars_info)</span></code></pre></div>
<p>Now it is time to create our own <strong>data frame</strong>.</p>
<p>First we will create three <strong>variables</strong> containing <strong>vectors</strong>. These will be our three columns.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>Crab <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>Oystercatcher <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">4</span>)</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>Starfish <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">7</span>)</span></code></pre></div>
<p>Now let us create the <strong>data frame</strong>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="co">#Using the function data.frame to create a data frame</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>beach_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Crab,Oystercatcher,Starfish)</span></code></pre></div>
<p>Look at the <strong>variable</strong> “beach_df” (it is useful to use “df” in <strong>variable names</strong> to signify it is a <strong>data frame</strong>) and you will see that each <strong>vector</strong> has become a column. The <strong>variable names</strong> have become the column names (this is why we used capital letters in the <strong>variable names</strong>).</p>
<p>You can think of <strong>data frames</strong> in three different ways:</p>
<ul>
<li>A list of columns</li>
<li>A list of rows</li>
<li>A table</li>
</ul>
<p>Look at the column and row names with two new <strong>functions</strong>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">colnames</span>(beach_df)</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="fu">row.names</span>(beach_df)</span></code></pre></div>
<p>We can use the <strong>function</strong> <code>row.names()</code> and the <strong>assignment operator</strong> to change the row names to something more useful.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">row.names</span>(beach_df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Formby&quot;</span>,<span class="st">&quot;West Kirby&quot;</span>,<span class="st">&quot;Crosby&quot;</span>)</span></code></pre></div>
<p>Now look at your “beach_df” <strong>data frame</strong> to see the difference.</p>
</div>
</div>
<div id="objects-mcqs" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Objects MCQs</h2>
<p><img src="figures/question_bubble_purple.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Attempt the below MCQs.</p>
<ol style="list-style-type: decimal">
<li>What <strong>class</strong> are numbers normally stored in?
<div id="radio_OVORLSTXHJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OVORLSTXHJ" value="answer"></input> <span>Numeric</span></label><label><input type="radio" autocomplete="off" name="radio_OVORLSTXHJ" value=""></input> <span>Logical</span></label><label><input type="radio" autocomplete="off" name="radio_OVORLSTXHJ" value=""></input> <span>String</span></label>
</div></li>
<li>What <strong>class</strong> is text normally stored in?
<div id="radio_ZGJVVJCCSD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZGJVVJCCSD" value=""></input> <span>Numeric</span></label><label><input type="radio" autocomplete="off" name="radio_ZGJVVJCCSD" value=""></input> <span>Logical</span></label><label><input type="radio" autocomplete="off" name="radio_ZGJVVJCCSD" value="answer"></input> <span>String</span></label>
</div></li>
<li>What <strong>class</strong> has the value of TRUE or FALSE?
<div id="radio_NDWYAUTENN" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NDWYAUTENN" value=""></input> <span>Numeric</span></label><label><input type="radio" autocomplete="off" name="radio_NDWYAUTENN" value="answer"></input> <span>Logical</span></label><label><input type="radio" autocomplete="off" name="radio_NDWYAUTENN" value=""></input> <span>String</span></label>
</div></li>
<li>Which <strong>data structure</strong> is 2-dimensional and heterogeneous (can contain multiple <strong>classes</strong>)?
<div id="radio_MOCSOWMUQQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MOCSOWMUQQ" value=""></input> <span>Scalar</span></label><label><input type="radio" autocomplete="off" name="radio_MOCSOWMUQQ" value=""></input> <span>Vector</span></label><label><input type="radio" autocomplete="off" name="radio_MOCSOWMUQQ" value="answer"></input> <span>Data frame</span></label>
</div></li>
<li>Which <strong>data structure</strong> is 1-dimensional and homogeneous (can only contain 1 <strong>class</strong>)?
<div id="radio_DRRXGLMNTS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DRRXGLMNTS" value=""></input> <span>Scalar</span></label><label><input type="radio" autocomplete="off" name="radio_DRRXGLMNTS" value="answer"></input> <span>Vector</span></label><label><input type="radio" autocomplete="off" name="radio_DRRXGLMNTS" value=""></input> <span>Data frame</span></label>
</div></li>
<li>Which <strong>data structure</strong> consists of only one value?
<div id="radio_TLTGIXFIZI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TLTGIXFIZI" value="answer"></input> <span>Scalar</span></label><label><input type="radio" autocomplete="off" name="radio_TLTGIXFIZI" value=""></input> <span>Vector</span></label><label><input type="radio" autocomplete="off" name="radio_TLTGIXFIZI" value=""></input> <span>Data frame</span></label>
</div></li>
<li>Which <strong>function</strong> can show the <strong>class</strong> of an R <strong>object</strong>?
<div id="radio_QTXHDRWQBM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QTXHDRWQBM" value=""></input> <span><code>c()</code></span></label><label><input type="radio" autocomplete="off" name="radio_QTXHDRWQBM" value="answer"></input> <span><code>class()</code></span></label><label><input type="radio" autocomplete="off" name="radio_QTXHDRWQBM" value=""></input> <span><code>paste()</code></span></label>
</div></li>
<li>Which <strong>function</strong> can be used to combine <strong>strings</strong>?
<div id="radio_VRMTTUSKCV" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VRMTTUSKCV" value=""></input> <span><code>c()</code></span></label><label><input type="radio" autocomplete="off" name="radio_VRMTTUSKCV" value=""></input> <span><code>class()</code></span></label><label><input type="radio" autocomplete="off" name="radio_VRMTTUSKCV" value="answer"></input> <span><code>paste()</code></span></label>
</div></li>
<li>Which <strong>function</strong> can be used to create a <strong>vector</strong>?
<div id="radio_QFDCGJAWZT" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QFDCGJAWZT" value="answer"></input> <span><code>c()</code></span></label><label><input type="radio" autocomplete="off" name="radio_QFDCGJAWZT" value=""></input> <span><code>class()</code></span></label><label><input type="radio" autocomplete="off" name="radio_QFDCGJAWZT" value=""></input> <span><code>paste()</code></span></label>
</div></li>
<li>Which <strong>logical operator</strong> means “less than”?
<div id="radio_ODVEEPMRPU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ODVEEPMRPU" value="answer"></input> <span><code>&lt;</code></span></label><label><input type="radio" autocomplete="off" name="radio_ODVEEPMRPU" value=""></input> <span><code>!=</code></span></label><label><input type="radio" autocomplete="off" name="radio_ODVEEPMRPU" value=""></input> <span><code>&gt;=</code></span></label>
</div></li>
<li>Which <strong>logical operator</strong> means “not equal to”?
<div id="radio_OZQJFDBVCU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OZQJFDBVCU" value=""></input> <span><code>&lt;</code></span></label><label><input type="radio" autocomplete="off" name="radio_OZQJFDBVCU" value="answer"></input> <span><code>!=</code></span></label><label><input type="radio" autocomplete="off" name="radio_OZQJFDBVCU" value=""></input> <span><code>&gt;=</code></span></label>
</div></li>
<li>Which <strong>logical operator</strong> means “greater than or equal to”?
<div id="radio_ERBPVQIHZW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ERBPVQIHZW" value=""></input> <span><code>&lt;</code></span></label><label><input type="radio" autocomplete="off" name="radio_ERBPVQIHZW" value=""></input> <span><code>!=</code></span></label><label><input type="radio" autocomplete="off" name="radio_ERBPVQIHZW" value="answer"></input> <span><code>&gt;=</code></span></label>
</div></li>
</ol>
<p>There was quite a lot to go through in this chapter, so let us reinforce it all with exercise!</p>

</div>
</div>
<div id="robjectexercises" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> R objects exercises</h1>
<p><img src="figures/beach.png" width="20%" style="display: block; margin: auto;" />
For this exercise simply produce the following tables as <strong>data frames</strong> in R. Please carry this out in your <strong>“Exercises.R”</strong> script and remember about code sections and annotations.</p>
<p>Tip: You can either write completely new code or reuse and alter previous code.</p>
<div id="df" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> df</h2>
<p><strong>Note</strong>: The top row is the column names and the left-most column is the row names.</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
One
</th>
<th style="text-align:right;">
Three
</th>
<th style="text-align:right;">
Five
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Two
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
Four
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
Six
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
30
</td>
</tr>
</tbody>
</table>
</div>
<div id="beach_df_2" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> beach_df_2</h2>
<p><strong>Note</strong>: The top row is the column names and the left-most column is the row names.</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Crab
</th>
<th style="text-align:right;">
Oystercatcher
</th>
<th style="text-align:right;">
Sandpiper
</th>
<th style="text-align:right;">
Starfish
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Formby
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
West Kirby
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Crosby
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
New Brighton
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>
</table>

</div>
</div>
<div id="r-objects-solutions" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> R objects solutions</h1>
<p><img src="figures/week2_solutions.png" width="20%" style="display: block; margin: auto;" /></p>
<div id="df-solution" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> df solution</h2>
<div id="step-1" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Step 1</h3>
<p>Create <strong>vectors</strong> for columns and row names:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>One <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>Three <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>)</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>Five <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>)</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>row_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Two&quot;</span>, <span class="st">&quot;Four&quot;</span>, <span class="st">&quot;Six&quot;</span>)</span></code></pre></div>
</div>
<div id="step-2a" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Step 2a</h3>
<p>Create the <strong>data frame</strong> from vectors:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(One,Three,Five)</span></code></pre></div>
<p>Add row names:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">row.names</span>(df) <span class="ot">&lt;-</span> row_names</span></code></pre></div>
</div>
<div id="step-2b" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Step 2b</h3>
<p>Alternatively you can define the row names in the <code>data.frame()</code> <code>function</code> as an option:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(One,Three,Five, <span class="at">row.names =</span> row_names)</span></code></pre></div>
</div>
</div>
<div id="beach_df_2-solution" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> beach_df_2 solution</h2>
<div id="step-1-1" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Step 1</h3>
<p>Create <strong>vectors</strong> for columns and row names:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>Crab <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">4</span>)</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>Oystercatcher <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a>Sandpiper <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>Starfish <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">4</span>)</span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a>row_names_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Formby&quot;</span>,<span class="st">&quot;West Kirby&quot;</span>,<span class="st">&quot;Crosby&quot;</span>,<span class="st">&quot;New Brighton&quot;</span>)</span></code></pre></div>
</div>
<div id="step-2a-1" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Step 2a</h3>
<p>Create the <strong>data frame</strong> from <strong>vectors</strong>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>beach_df_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Crab,Oystercatcher,Sandpiper,Starfish)</span></code></pre></div>
<p>Add row names:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">row.names</span>(beach_df_2) <span class="ot">&lt;-</span> row_names_2</span></code></pre></div>
</div>
<div id="step-2b-1" class="section level3" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Step 2b</h3>
<p>Alternatively you can define the row names in the <code>data.frame()</code> <strong>function</strong> as an option:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>beach_df_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Crab,Oystercatcher,Sandpiper,Starfish, <span class="at">row.names =</span> row_names_2)</span></code></pre></div>

</div>
</div>
</div>



<div id="filesubsettingchap" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Files and subsetting data</h1>
<p><img src="figures/R_df.png" width="20%" style="display: block; margin: auto;" /></p>
<div id="reading-from-a-file" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Reading from a file</h2>
<p><img src="figures/r_read.png" width="20%" style="display: block; margin: auto;" /></p>
<p>In chapter 4 we created <strong>data frames</strong> with R <strong>functions</strong>. This was useful to help understand how <strong>data frames</strong> work in R. However, in real life you will most likely not do this very often. Instead you will have data files you need to analyse with R.</p>
<p>You can get your data into R by having R <strong>read</strong> your file.</p>
<div id="directory-and-file-setup" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Directory and file setup</h3>
<p>Prior to using a file you will need to acquire it.</p>
<ul>
<li>Make a directory/folder called “Chapter_7” within your main directory/folder for this workshop.</li>
<li>Download the file <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Liverpool_beaches.csv">Liverpool_beaches.csv</a> into “Chapter_7”.</li>
<li>Set your working directory to this new directory (<a href="#directories">Directories</a>). You will stay here for this chapter.</li>
</ul>
</div>
<div id="viewing-the-file" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Viewing the file</h3>
<p><img src="figures/view.png" width="15%" style="display: block; margin: auto;" /></p>
<p>The next task to carry out is to <strong>read</strong> in the file “Liverpool_beaches.csv” . Before <strong>reading</strong> in the file we can check the contents of the file. This can be carried out by opening it with notepad (or similar text tool) or viewing the file with RStudio.</p>
<p>To view the file with RStudio:</p>
<ul>
<li>Use the <strong>Files pane</strong> of the <strong>MISC window</strong> to navigate to the directory containing the file.</li>
<li>Click on the file name and then click “View File”</li>
<li>This will open a tab in the <strong>Source window</strong> matching the file name</li>
</ul>
<p>You will notice that the values are separated by commas as this is a “comma separated value” (.csv) file. Additionally, this is the same data as the “beach_df_2” <strong>data frame</strong> you created in the <a href="#robjectexercises">chapter 5 exercises</a>.</p>
<p><strong>Note</strong>: Create a new R script file called <strong>“3-Files_and_subsetting.r”</strong> for this chapter’s scripts.</p>
</div>
<div id="read.csv" class="section level3" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> read.csv()</h3>
<p><img src="figures/csv_file.png" width="15%" style="display: block; margin: auto;" /></p>
<p>There are various <strong>functions</strong> to <strong>read</strong> in files into R. My favourite is <code>read.csv()</code>. Use this function to <strong>read</strong> in the file “Liverpool_beaches.csv”:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>liv_beaches_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Liverpool_beaches.csv&quot;</span>)</span></code></pre></div>
<p>Have a look at the newly created <strong>data frame</strong>. Is it how you would like it?</p>
<p>The row names are empty and the beach names are in the first column. Let us fix this and make it so the beach names are the row names. This can be carried out by including the option <code>row.names = 1</code> to specify the 1st column will be the row names:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>liv_beaches_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Liverpool_beaches.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>We now know how to <strong>read</strong> in a csv file with <code>read.csv</code>.</p>
</div>
<div id="tsv-files" class="section level3" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> TSV files</h3>
<p><img src="figures/footprint.png" width="15%" style="display: block; margin: auto;" /></p>
<p>For our next task we will <strong>read</strong> a tab separated file.</p>
<p>Download <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Global_eco_footprint.tsv">Global_eco_footprint.tsv</a> into your “Chapter_7”. This file contains The ecological footprint measures the ecological assets that a given population requires to produce the natural resources it consumes.</p>
<div class="webex-solution">
<button>
More info on Global_eco_footprint.tsv
</button>
<p>More info can be found in the following link: <a href="https://www.kaggle.com/datasets/footprintnetwork/ecological-footprint" class="uri">https://www.kaggle.com/datasets/footprintnetwork/ecological-footprint</a>.</p>
</div>
<p>Now use <code>read.csv()</code> to <strong>read</strong> in the file. We’ll set <code>row.names = 1</code> again but we will also include the option <code>sep = "\t"</code>. This option specifies the columns are separated (<code>sep</code>) by tabs (<code>"\t"</code>).</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a>global_eco_footprint <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Global_eco_footprint.tsv&quot;</span>, </span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>                        <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>Look at the resulting <strong>data frame</strong> and you will notice the column names have been changed by R. This is annoying but thankfully there is an easy fix. <strong>Read</strong> in the data again with the inclusion of the parameter <code>check.names = FALSE</code>. This will stop the function <code>read.csv()</code> from ‘checking’ and ‘fixing’ the column names. I always use this option.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a>global_eco_footprint_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Global_eco_footprint.tsv&quot;</span>, </span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>                                 <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, </span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>                                 <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="excel-files-and-r" class="section level3" number="7.1.5">
<h3><span class="header-section-number">7.1.5</span> Excel files and R</h3>
<p><img src="figures/readxl.png" width="15%" style="display: block; margin: auto;" /></p>
<p>You may want to open excel files with R. Normally to do this I open the file in excel and save it as a .csv or a tab separated file and <strong>read</strong> this into R. Alternatively there are R packages that can directly <strong>read</strong> in excel files. If this is something you would like to do you can look at the following package:</p>
<p><a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a></p>
<p>An important note is that <strong>reading</strong> in a file into R will not change the file. You are creating a new R <strong>object</strong>. Modifying this <strong>object</strong> will not alter the original file. Later in the materials we will look into how to create new files or overwrite files by <strong>writing</strong>.</p>
</div>
</div>
<div id="subsetting-data" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Subsetting data</h2>
<p><img src="figures/R_subset.png" width="20%" style="display: block; margin: auto;" /></p>
<p>R allows you to specify specific points in <strong>R objects</strong>. This is one of the primary reasons R is so useful and flexible. With good use of <strong>assignment operators</strong> this allows for the subsetting of <strong>variables</strong>.</p>
<div id="vectors" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Vectors</h3>
<p><img src="figures/R_square_bracket.png" width="20%" style="display: block; margin: auto;" /></p>
<p>We will start with <strong>vectors</strong>. Before carrying out and subsetting let us create some new <strong>vectors</strong>. We will use a new <strong>function</strong> to create these, <code>seq()</code>.</p>
<p><strong>Tip</strong>: Look at the resulting <strong>vectors</strong> and, use <code>?seq()</code> or search online to understand the <code>seq()</code> <strong>function</strong> better.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>even_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">8</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>odd_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a>long_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">10</span>, <span class="at">to =</span> <span class="dv">300</span>, <span class="at">by =</span> <span class="dv">10</span>)</span></code></pre></div>
<p>Grand! Now let us subset the <strong>vectors</strong> with square brackets <code>[]</code>.</p>
<p><strong>Vectors</strong> are one-dimensional, we therefore provide the square brackets with one number or one range of numbers. The number/s we provide in the square brackets are the index.</p>
<p>Try out indexing/subsetting the <strong>vectors</strong>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>even_seq[<span class="dv">2</span>]</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>odd_seq[<span class="dv">1</span>]</span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>long_seq[<span class="dv">10</span>]</span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>even_seq[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>odd_seq[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>long_seq[<span class="dv">21</span><span class="sc">:</span><span class="dv">24</span>]</span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>long_seq[<span class="dv">24</span><span class="sc">:</span><span class="dv">21</span>]</span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>even_seq[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a>odd_seq[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">5</span>)]</span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a>long_seq[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">21</span>,<span class="dv">21</span><span class="sc">:</span><span class="dv">24</span>,<span class="dv">24</span><span class="sc">:</span><span class="dv">21</span>,<span class="dv">1</span>)]</span>
<span id="cb59-11"><a href="#cb59-11" tabindex="-1"></a><span class="co">#As long as the contents within the [] equal numbers they will work</span></span>
<span id="cb59-12"><a href="#cb59-12" tabindex="-1"></a>even_seq[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">3</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span>
<span id="cb59-13"><a href="#cb59-13" tabindex="-1"></a>even_seq[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">3</span>)]</span>
<span id="cb59-14"><a href="#cb59-14" tabindex="-1"></a>long_seq[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">19</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span>
<span id="cb59-15"><a href="#cb59-15" tabindex="-1"></a>even_seq[<span class="dv">1</span><span class="sc">*</span><span class="dv">2</span>]</span>
<span id="cb59-16"><a href="#cb59-16" tabindex="-1"></a>odd_seq[<span class="dv">2</span><span class="sc">/</span><span class="dv">1</span>]</span>
<span id="cb59-17"><a href="#cb59-17" tabindex="-1"></a>long_seq[(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">2</span>]</span></code></pre></div>
<p>The <strong>vectors</strong> even_seq and odd_seq have the indexes 1,2,3,4, and 5 as they each contain 5 <strong>scalars</strong>. What if we try to use a higher number to index than is available?</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>even_seq[<span class="dv">6</span>]</span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>even_seq[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">7</span>)]</span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>odd_seq[<span class="dv">3</span><span class="sc">:</span><span class="dv">9</span>]</span></code></pre></div>
<p>As you can see the above all work with no complaints. Any indexes that are out of range will return a <code>NA</code> value. <code>NA</code> stands for ‘Not Available’. We will not go into how <code>NA</code> works in R too much. The most important thing to know about <code>NA</code> is that you will most likely get <code>NA</code> if you use <strong>operators</strong> or <strong>functions</strong> with <code>NA</code>. Below are a few examples:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="co">#Will give NA</span></span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="cn">NA</span></span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a><span class="dv">2</span> <span class="sc">-</span> <span class="cn">NA</span></span>
<span id="cb61-4"><a href="#cb61-4" tabindex="-1"></a>even_seq[<span class="dv">2</span>] <span class="sc">*</span> <span class="cn">NA</span></span>
<span id="cb61-5"><a href="#cb61-5" tabindex="-1"></a>odd_seq[<span class="dv">5</span>] <span class="sc">/</span> <span class="cn">NA</span></span>
<span id="cb61-6"><a href="#cb61-6" tabindex="-1"></a><span class="co">#mean() function without NA</span></span>
<span id="cb61-7"><a href="#cb61-7" tabindex="-1"></a><span class="fu">mean</span>(even_seq[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb61-8"><a href="#cb61-8" tabindex="-1"></a><span class="co">#mean() function with NA</span></span>
<span id="cb61-9"><a href="#cb61-9" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="cn">NA</span>))</span>
<span id="cb61-10"><a href="#cb61-10" tabindex="-1"></a><span class="fu">mean</span>(even_seq[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>])</span></code></pre></div>
<p>Above we subsetted <strong>vectors</strong> by specifying which indexes we want. We can also specify which indexes we don’t want:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>even_seq[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a>odd_seq[<span class="sc">-</span><span class="dv">3</span><span class="sc">:-</span><span class="dv">5</span>]</span>
<span id="cb62-3"><a href="#cb62-3" tabindex="-1"></a>long_seq[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">-</span><span class="dv">2</span>,<span class="sc">-</span><span class="dv">6</span>)]</span></code></pre></div>
<p>The <code>rep()</code> <strong>function</strong> will replicate a <strong>scalar/vector</strong> a specified amount of times. We will use this <strong>function</strong> to overwrite our previously created <strong>variables</strong> with longer versions:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="co">#Replicate vector even_seq 2 times</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> even_seq, <span class="dv">2</span>)</span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a><span class="co">#Replicate vector even_seq 4 times and then assign even_seq as the newly created vector</span></span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a>even_seq <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> even_seq, <span class="dv">4</span>)</span>
<span id="cb63-5"><a href="#cb63-5" tabindex="-1"></a><span class="co">#More examples</span></span>
<span id="cb63-6"><a href="#cb63-6" tabindex="-1"></a>odd_seq <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> odd_seq, <span class="dv">4</span>)</span>
<span id="cb63-7"><a href="#cb63-7" tabindex="-1"></a>long_seq <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> long_seq, <span class="dv">3</span>)</span></code></pre></div>
<p><strong>Logical</strong> <strong>operators</strong> can be used as indexes to subset <strong>vectors</strong>. Having a logical expression (i.e. 1 &gt; 2) as the index will cause all TRUE positions to be included and all FALSE positions to be excluded.</p>
<p><strong>Tip</strong>: If it is difficult to deduce what the below commands are doing you can run the part in the square brackets by itself. Remember if you highlight code in the <strong>script editor</strong> it will only run that part, excluding unhighlighted parts of script in the same line.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a>even_seq <span class="sc">&gt;</span> <span class="dv">3</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>even_seq[even_seq  <span class="sc">&gt;</span> <span class="dv">2</span>]</span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a>odd_seq[odd_seq <span class="sc">&lt;=</span> <span class="dv">1</span> ]</span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a>long_seq <span class="ot">&lt;-</span> long_seq[long_seq <span class="sc">&lt;</span> <span class="dv">50</span>]</span></code></pre></div>
<p>We will quickly look at a new <strong>operator</strong>, <code>%%</code>. This is the modulus <strong>operator</strong>, it divides two numbers and gives the remainder of the division.</p>
<p>With the modulus <strong>operator</strong>, logical expressions, and subsetting we can extract even or odd numbers from a <strong>vector</strong>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="co">#First some basic modulus examples</span></span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a><span class="dv">2</span><span class="sc">%%</span><span class="dv">2</span></span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a><span class="dv">3</span><span class="sc">%%</span><span class="dv">2</span></span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a><span class="co">#Create a vector with numbers 0 to 9</span></span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a>single_digit_vec <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span></span>
<span id="cb65-6"><a href="#cb65-6" tabindex="-1"></a><span class="co">#Extract even numbers then odd numbers from the vector</span></span>
<span id="cb65-7"><a href="#cb65-7" tabindex="-1"></a><span class="co">#We carry this out by determining if numbers are divisible by 2 or not</span></span>
<span id="cb65-8"><a href="#cb65-8" tabindex="-1"></a>even_seq <span class="ot">&lt;-</span> single_digit_vec[(single_digit_vec <span class="sc">%%</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span> ]</span>
<span id="cb65-9"><a href="#cb65-9" tabindex="-1"></a>odd_seq <span class="ot">&lt;-</span> single_digit_vec[(single_digit_vec <span class="sc">%%</span> <span class="dv">2</span>) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb65-10"><a href="#cb65-10" tabindex="-1"></a><span class="co">#We can determine which numbers in a vector are divisible by any specific number</span></span>
<span id="cb65-11"><a href="#cb65-11" tabindex="-1"></a><span class="co">#Divisible by 3</span></span>
<span id="cb65-12"><a href="#cb65-12" tabindex="-1"></a><span class="co">#remember variable names cannot start with numbers</span></span>
<span id="cb65-13"><a href="#cb65-13" tabindex="-1"></a>divis_3_vec <span class="ot">&lt;-</span> single_digit_vec[(single_digit_vec <span class="sc">%%</span> <span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb65-14"><a href="#cb65-14" tabindex="-1"></a><span class="co">#Divisible by 7</span></span>
<span id="cb65-15"><a href="#cb65-15" tabindex="-1"></a>divis_7_vec <span class="ot">&lt;-</span> single_digit_vec[(single_digit_vec <span class="sc">%%</span> <span class="dv">7</span>) <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb65-16"><a href="#cb65-16" tabindex="-1"></a><span class="co">#Try out other numbers!</span></span></code></pre></div>
</div>
<div id="data-frames" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Data frames</h3>
<p><img src="figures/biodiversity.png" width="30%" style="display: block; margin: auto;" /></p>
<p><strong>Data frames</strong> can be subset similar to <strong>vectors</strong>. As with <strong>vectors</strong> you can use <code>[]</code>. Additionally, <code>$</code> can be used to subset <strong>data frames</strong>.</p>
<p>Square brackets must be provided indexes for rows and for columns. The structure for this is <code>df[row,column]</code>. It is very useful to remember that R always wants rows first then columns second.</p>
<p>To practice subsetting <strong>data frames</strong> with square brackets we will <strong>read</strong> in a new file called - <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/parks_biodiveristy.csv">parks_biodiveristy.csv</a>. This contains the number of different species of various groups (Bird, Mammal, etc.) in US national parks. Data can be found:</p>
<p><a href="https://www.kaggle.com/datasets/nationalparkservice/park-biodiversity" class="uri">https://www.kaggle.com/datasets/nationalparkservice/park-biodiversity</a></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="co">#Read in the file</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>parks_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;parks_biodiveristy.csv&quot;</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>                             <span class="at">row.names =</span> <span class="dv">1</span>)</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a><span class="co">#View the resulting object</span></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>parks_df</span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a><span class="co">#View its column names</span></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a><span class="fu">colnames</span>(parks_df)</span></code></pre></div>
<p>Now for some subset commands:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="co">#Scalar from the 1st row and 1st column</span></span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>parks_df[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a><span class="co">#Row names and column names can be used for indexing</span></span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a><span class="co">#Scalar from the row called L10 1LD and the column called Area</span></span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a>parks_df[<span class="st">&quot;YOSE&quot;</span>,<span class="st">&quot;Amphibian&quot;</span>]</span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a><span class="co">#More examples</span></span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a>parks_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">2</span>]</span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a>parks_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">&quot;State&quot;</span>]</span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a>parks_df[<span class="dv">3</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb67-10"><a href="#cb67-10" tabindex="-1"></a>parks_df[<span class="st">&quot;SAGU&quot;</span>,<span class="dv">2</span>]</span>
<span id="cb67-11"><a href="#cb67-11" tabindex="-1"></a>parks_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">&quot;Bird&quot;</span>]</span>
<span id="cb67-12"><a href="#cb67-12" tabindex="-1"></a>parks_df[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">6</span>),<span class="fu">c</span>(<span class="st">&quot;Bird&quot;</span>,<span class="st">&quot;Fish&quot;</span>)]</span></code></pre></div>
<p>Depending on how you subset a <strong>data frame</strong> you may get a <strong>scalar</strong>, <strong>vector</strong>, or <strong>data frame</strong>. Below describes which you will get based on the subsetting.</p>
<ul>
<li><strong>Scalar</strong>:
<ul>
<li>Indexing to get a single value by choosing one row and one column.</li>
<li>E.g. <code>parks_df[1,1]</code></li>
</ul></li>
<li><strong>Vector</strong>:
<ul>
<li>Indexing so you get multiple values from one column. This occurs as each column is in essence a <strong>vector</strong>.</li>
<li>E.g. <code>parks_df[1:10,2]</code></li>
</ul></li>
<li><strong>Data frame</strong>:
<ul>
<li>Indexing so you get multiple values from a row or multiple rows. Subsetting a <strong>data frame</strong> like this provides you a <strong>data frame</strong>.</li>
<li>E.g. <code>parks_df[3,2:4]</code> or <code>parks_df[3:4,2:4]</code></li>
</ul></li>
</ul>
<p>A quick <strong>function</strong> to subset a <strong>data frame</strong> is <code>head()</code>. By default it will return the first 6 rows.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="co">#Return first 6 rows</span></span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a><span class="fu">head</span>(parks_df)</span>
<span id="cb68-3"><a href="#cb68-3" tabindex="-1"></a><span class="co">#Return first 10 rows</span></span>
<span id="cb68-4"><a href="#cb68-4" tabindex="-1"></a><span class="fu">head</span>(parks_df, <span class="dv">10</span>)</span></code></pre></div>
<p>The <strong>data frame</strong> is quite large. We will therefore use the <code>head()</code> <strong>function</strong> and the <strong>assignment operator</strong> to make the <strong>data frame</strong> smaller for further examples.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>parks_df <span class="ot">&lt;-</span> <span class="fu">head</span>(parks_df, <span class="dv">20</span>)</span></code></pre></div>
<p>To return all the rows of the specified columns you can leave the part before the comma empty. Similarly you can leave the part after the comma empty to return all of the columns of the specified rows. Leave both sides empty and you will get the entire <strong>data frame</strong>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>parks_df[,]</span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>parks_df[,<span class="dv">2</span>]</span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a>parks_df[<span class="dv">3</span>,]</span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a>parks_df[,<span class="st">&quot;State&quot;</span>]</span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>parks_df[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>,]</span></code></pre></div>
<p>The sign <code>$</code> allows you to indicate which column you would like from the <strong>data frame</strong>. This is done like so:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>parks_df<span class="sc">$</span>State</span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a>parks_df<span class="sc">$</span>Amphibian</span>
<span id="cb71-3"><a href="#cb71-3" tabindex="-1"></a>parks_df<span class="sc">$</span>Fish</span></code></pre></div>
<p>You will notice that the above commands return <strong>vectors</strong>. We can therefore subset these <strong>vectors</strong> with <code>[]</code>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>parks_df<span class="sc">$</span>State[<span class="dv">2</span>]</span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>parks_df<span class="sc">$</span>Amphibian[<span class="dv">2</span>]</span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>parks_df<span class="sc">$</span>Fish[<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]</span></code></pre></div>
<p>Below are a selection of useful <strong>functions</strong> that can be used on <strong>vectors</strong>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="co">#Sum the values of a numeric vector</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a><span class="fu">sum</span>(parks_df<span class="sc">$</span>Mammal)</span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a><span class="co">#Mean of the values of a numeric vector</span></span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a><span class="fu">mean</span>(parks_df<span class="sc">$</span>Mammal)</span></code></pre></div>
<p>The above <strong>functions</strong> are useful but limiting if you are working with <strong>data frames</strong>. Thankfully there are also many <strong>functions</strong> used specifically for <strong>data frames</strong> (they can also be used for matrices).</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="co">#Sum numeric columns</span></span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a><span class="fu">colSums</span>(parks_df[,<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>])</span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a><span class="co">#Sum numeric rows</span></span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a><span class="fu">rowSums</span>(parks_df[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a><span class="co">#Mean of numeric columns</span></span>
<span id="cb74-6"><a href="#cb74-6" tabindex="-1"></a><span class="fu">colMeans</span>(parks_df[,<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>])</span>
<span id="cb74-7"><a href="#cb74-7" tabindex="-1"></a><span class="co">#Mean of numeric rows</span></span>
<span id="cb74-8"><a href="#cb74-8" tabindex="-1"></a><span class="fu">rowMeans</span>(parks_df[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb74-9"><a href="#cb74-9" tabindex="-1"></a><span class="co">#Summary information for each column</span></span>
<span id="cb74-10"><a href="#cb74-10" tabindex="-1"></a><span class="co">#This works for string and numeric columns with different outputs</span></span>
<span id="cb74-11"><a href="#cb74-11" tabindex="-1"></a><span class="fu">summary</span>(parks_df)</span></code></pre></div>
<p>Try out some of the above commands with the entire <strong>data frame</strong>. Do they give an error? Is so, why?</p>
<p>Before we learn how to <strong>write</strong> data to a file I will introduce one more <strong>data frame</strong> associated <strong>function</strong>. <code>t()</code> which stands for transpose:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a>parks_df[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a><span class="fu">t</span>(parks_df[,<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">t</span>(parks_df[,<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>]))</span></code></pre></div>
<p>Try the above commands without subsetting the <strong>data frame</strong>. What is happening and why?</p>
</div>
</div>
<div id="writing-to-a-file" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Writing to a file</h2>
<p><img src="figures/R_writing.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Before we <strong>write</strong> data to a file we will create a new <strong>data frame</strong> from “parks_df”.</p>
<p>First I like to create a new <strong>variable</strong> from our old <strong>variable</strong> if there are many steps. This means if we make a mistake we can go back and recreate the new <strong>variable</strong>.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a>parks_t_df <span class="ot">&lt;-</span> parks_df</span></code></pre></div>
<p>Next step we will create a new column called “Total_species”.</p>
<p><strong>NOTE</strong>: I am including many ways to subset columns as reminders. Normally I wouldn’t have so many different ways in one command.</p>
<p><strong>NOTE</strong>: We are using “_” instead of spaces as R doesn’t particularly like spaces in column names. We will see how to use spaces later.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a>parks_t_df<span class="sc">$</span>Total_species <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(parks_df[,<span class="dv">3</span><span class="sc">:</span><span class="dv">8</span>])</span></code></pre></div>
<p>The final step before writing is to transpose the <strong>data frame</strong> leaving out the Park name and State columns:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="co">#Transpose dataframe</span></span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a>parks_t_df <span class="ot">&lt;-</span> <span class="fu">t</span>(parks_t_df[,<span class="dv">3</span><span class="sc">:</span><span class="dv">8</span>])</span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a><span class="co">#Check structure</span></span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a><span class="fu">str</span>(parks_t_df)</span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a><span class="co">#It is not a dataframe</span></span>
<span id="cb78-6"><a href="#cb78-6" tabindex="-1"></a><span class="co">#Let us therefore convert it to a data frame</span></span>
<span id="cb78-7"><a href="#cb78-7" tabindex="-1"></a>parks_t_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(parks_t_df)</span>
<span id="cb78-8"><a href="#cb78-8" tabindex="-1"></a><span class="co">#Structure check</span></span>
<span id="cb78-9"><a href="#cb78-9" tabindex="-1"></a><span class="fu">str</span>(parks_t_df)</span></code></pre></div>
<p>After all that let us <strong>write</strong> the <strong>data frame</strong> to a file called “Park_species_info.csv”. When <strong>reading</strong> from a file I prefer <code>read.csv()</code>, however when writing to a file I prefer <code>write.table()</code>. With this <strong>function</strong> we will include the option <code>sep=","</code> to have commas as the column separators. We will also include the option <code>col.names=NA</code> to create an empty space above the row names. If this was not included then the first column name would be above the row names.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">write.table</span>(parks_t_df, <span class="at">file =</span> <span class="st">&quot;Park_species_info.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">col.names=</span><span class="cn">NA</span>)</span></code></pre></div>
<p>Have a look at the file contents with RStudio.</p>
<p>Let us do it one more time with the Global ecological footprint info. First let us <strong>read</strong> in the file again in case you do not have it. Then we will create a total sales column and finally transpose the <strong>data frame</strong>:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" tabindex="-1"></a><span class="co">#Read in</span></span>
<span id="cb80-2"><a href="#cb80-2" tabindex="-1"></a>global_eco_footprint_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Global_eco_footprint.tsv&quot;</span>, </span>
<span id="cb80-3"><a href="#cb80-3" tabindex="-1"></a>                                 <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, </span>
<span id="cb80-4"><a href="#cb80-4" tabindex="-1"></a>                                 <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb80-5"><a href="#cb80-5" tabindex="-1"></a><span class="co">#Transpose ensuring output is a data frame</span></span>
<span id="cb80-6"><a href="#cb80-6" tabindex="-1"></a>global_eco_footprint_t_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(global_eco_footprint_df))</span></code></pre></div>
<p><strong>Write</strong> the <strong>data frame</strong> to a tab delimited file (.tsv). This time we will make it so the row and column names are not surrounded by quotes:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="fu">write.table</span>(global_eco_footprint_t_df, </span>
<span id="cb81-2"><a href="#cb81-2" tabindex="-1"></a>            <span class="st">&quot;Global_eco_footprint_transposed.tsv&quot;</span>, </span>
<span id="cb81-3"><a href="#cb81-3" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>,  </span>
<span id="cb81-4"><a href="#cb81-4" tabindex="-1"></a>            <span class="at">col.names=</span><span class="cn">NA</span>, </span>
<span id="cb81-5"><a href="#cb81-5" tabindex="-1"></a>            <span class="at">quote =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>With the fundamentals of <strong>reading</strong>, subsetting <strong>data frames</strong>, and writing covered it is time to carry out some exercises.</p>
</div>
<div id="files-subsetting-mcqs" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Files &amp; subsetting MCQs</h2>
<p><img src="figures/question_bubble_blue.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Attempt the below MCQs.</p>
<ol style="list-style-type: decimal">
<li>Which function can be used to transpose a data frame?
<div id="radio_TGCCCZRLRC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TGCCCZRLRC" value=""></input> <span><strong><code>read.csv()</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_TGCCCZRLRC" value=""></input> <span><strong><code>write.table()</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_TGCCCZRLRC" value="answer"></input> <span><strong><code>t()</code></strong></span></label>
</div></li>
<li>Which function can be used to import the contents of a file into a R object?
<div id="radio_DVAFEUIKVY" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DVAFEUIKVY" value="answer"></input> <span><strong><code>read.csv()</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_DVAFEUIKVY" value=""></input> <span><strong><code>write.table()</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_DVAFEUIKVY" value=""></input> <span><strong><code>t()</code></strong></span></label>
</div></li>
<li>Which function can be used to export the contents of an R object into a file?
<div id="radio_ZFJUAYLDFO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZFJUAYLDFO" value=""></input> <span><strong><code>read.csv()</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_ZFJUAYLDFO" value="answer"></input> <span><strong><code>write.table()</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_ZFJUAYLDFO" value=""></input> <span><strong><code>t()</code></strong></span></label>
</div></li>
<li>For <code>read.csv()</code> or <code>write.table()</code> which option allows you to read/write comma separated files?
<div id="radio_LTHBHKJULM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LTHBHKJULM" value=""></input> <span><strong><code>sep="\t"</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_LTHBHKJULM" value="answer"></input> <span><strong><code>sep=","</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_LTHBHKJULM" value=""></input> <span><strong><code>check.names=FALSE</code></strong></span></label>
</div></li>
<li>For <code>read.csv()</code> which option allows you to read in the data without causing unwanted changes in the text of the column names?
<div id="radio_AGFEFXRWBG" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_AGFEFXRWBG" value=""></input> <span><strong><code>sep="\t"</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_AGFEFXRWBG" value=""></input> <span><strong><code>sep=","</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_AGFEFXRWBG" value="answer"></input> <span><strong><code>check.names=FALSE</code></strong></span></label>
</div></li>
<li>For <code>read.csv()</code> or <code>write.table()</code> which option allows you to read/write tab separated files
<div id="radio_ATOVHSLHEW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ATOVHSLHEW" value="answer"></input> <span><strong><code>sep="\t"</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_ATOVHSLHEW" value=""></input> <span><strong><code>sep=","</code></strong></span></label><label><input type="radio" autocomplete="off" name="radio_ATOVHSLHEW" value=""></input> <span><strong><code>check.names=FALSE</code></strong></span></label>
</div></li>
</ol>

</div>
</div>
<div id="files-exercises" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Files exercises</h1>
<p>This exercise will look at two files. You will be assigned tasks requiring you to <strong>read</strong> and <strong>write</strong> files as well as index <strong>data frames</strong>.</p>
<p>Use your <strong>“Exercises.R”</strong> file, ensuring you are using code sections to separate the different exercises. Additionally, set your working directory to your main workshop directory.</p>
<p>Create a new directory called “Chapter_8_files” within your main workshop directory to download the files <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/bat_roosts.csv">bat_roosts.csv</a> &amp; <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/UK_retail.tsv">UK_retail.tsv</a>.</p>
<p>As the files we are going to <strong>read</strong> are in a different directory to our working directory we will have to specify the directory along with the file names. For example, to read in the “Liverpool_beaches.csv” file from the main directory you could use the following command.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" tabindex="-1"></a>liv_beaches_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_7/Liverpool_beaches.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Ensure you also <strong>write</strong> any output to “Chapter_8_files”.</p>
<div id="bats" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Bats</h2>
<p><img src="figures/bat.png" width="20%" style="display: block; margin: auto;" /></p>
<p>First we will look at the file <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/bat_roosts.csv">bat_roosts.csv</a>. This contains information on the max number of roosts for different Bat species in different UK regions.</p>
<p>The data is from: “Bat Conservation Trust 2020. Roost Count peak counts summary data”. Available from <a href="https://www.bats.org.uk/our-work/national-bat-monitoring-programme/reports/nbmp-annual-report" class="uri">https://www.bats.org.uk/our-work/national-bat-monitoring-programme/reports/nbmp-annual-report</a></p>
<p>For this file carry out the below tasks:</p>
<ol style="list-style-type: decimal">
<li><strong>Read</strong> in the file “bat_roosts.csv” as a <strong>data frame</strong> <strong>variable</strong> called “bat_df”. Ensure the row names contain the Regions (Channel Islands, East Midlands, etc.).</li>
<li>Inspect the <strong>variable</strong> and ensure there are only numerics within the <strong>data frame</strong> with all strings only being in column and row names.</li>
<li>Add a row to “bat_df” called “UK” that contains the totals for each Species.</li>
<li>Add a column to “bat_df” called “All_Bat_Species” that contains the totals for each Region.</li>
<li>Create a transposed <strong>data frame</strong> of “bat_df” called “bat_t_df”.</li>
<li><strong>Write</strong> the <strong>data frame</strong> “bat_t_df” to a comma separated file called “bat_roosts_t.csv”. Ensure there are no quotes surrounding the row or column names.</li>
</ol>
<p>Now that you have carried that out, attempt following MCQs using the “bat_t_df” object.</p>
<ol style="list-style-type: decimal">
<li>Which region has no roosts?
<div id="radio_EMYPBVFJLC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EMYPBVFJLC" value="answer"></input> <span>Channel Islands</span></label><label><input type="radio" autocomplete="off" name="radio_EMYPBVFJLC" value=""></input> <span>North West</span></label><label><input type="radio" autocomplete="off" name="radio_EMYPBVFJLC" value=""></input> <span>Wales</span></label>
</div></li>
<li>Which region has the largest amount of <em>Myotis brandtii</em> roosts (excluding UK)?
<div id="radio_BODGUEMQXC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BODGUEMQXC" value=""></input> <span>Channel Islands</span></label><label><input type="radio" autocomplete="off" name="radio_BODGUEMQXC" value="answer"></input> <span>North West</span></label><label><input type="radio" autocomplete="off" name="radio_BODGUEMQXC" value=""></input> <span>Wales</span></label>
</div></li>
<li>Which Bat species has the highest number of roosts across the UK?
<div id="radio_QRGCPBJOGS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QRGCPBJOGS" value=""></input> <span>Pipistrellus nathusii</span></label><label><input type="radio" autocomplete="off" name="radio_QRGCPBJOGS" value="answer"></input> <span>Pipistrellus pygmaeus</span></label><label><input type="radio" autocomplete="off" name="radio_QRGCPBJOGS" value=""></input> <span>Rhinolophus hipposideros</span></label>
</div></li>
<li>Which Bat species has the lowest number of roosts across the UK?
<div id="radio_DOAZWPQBLB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DOAZWPQBLB" value="answer"></input> <span>Pipistrellus nathusii</span></label><label><input type="radio" autocomplete="off" name="radio_DOAZWPQBLB" value=""></input> <span>Pipistrellus pygmaeus</span></label><label><input type="radio" autocomplete="off" name="radio_DOAZWPQBLB" value=""></input> <span>Rhinolophus hipposideros</span></label>
</div></li>
</ol>
</div>
<div id="honey-bee-colonies" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Honey bee colonies</h2>
<p><img src="figures/beehive.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Next we have a file (<a href="https://neof-workshops.github.io/R_j4c0xh/downloads/honey_bee.tsv">honey_bee.tsv</a>) that contains information on the number of Honey Bee colonies in 4 different states. It is temporal data containing information on the 4 quarters for the years 2015-2018.</p>
<p>For more details and even more data please see the following link: <a href="https://www.kaggle.com/datasets/kyleahmurphy/nass-honey-bee-20152021" class="uri">https://www.kaggle.com/datasets/kyleahmurphy/nass-honey-bee-20152021</a></p>
<p>Carry out the below tasks:</p>
<ol style="list-style-type: decimal">
<li><strong>Read</strong> in the file “honey_bee.tsv” as a <strong>data frame</strong> <strong>variable</strong> called “bee_colonies_df”. Ensure the row names contain the Year info (2015-Q1, 2015-Q2, etc.).</li>
<li>Create a <strong>data frame</strong> called “bee_colonies_2017_2018_df” containing the rows for 2017 &amp; 2018 from “bee_colonies_df”.</li>
<li>For each month in 2017 &amp; 2018 print out the phrase “The number of colonies in Minnesota for &lt;Year&gt; was &lt;Value&gt;.
<ul>
<li>For example the first phrase will be “The number of colonies in Minnesota for 2017-Q1 was 27000”.</li>
<li>This can be done with one line of code using the <code>paste()</code> function.</li>
</ul></li>
<li>Make an average (mean) row for “bee_colonies_2017_2018_df”.</li>
<li>Finally write out the <strong>data frame</strong> “bee_colonies_2017_2018_df” as a tab separated file called “bee_colonies_2017_2018.tsv”.</li>
</ol>
<p>Now that you have carried that out, attempt the following questions based on the “bee_colonies_2017_2018_df” object.</p>
<ol style="list-style-type: decimal">
<li>Which state has the lowest average?
<div id="radio_BFRGLVCLKK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BFRGLVCLKK" value=""></input> <span>Montana</span></label><label><input type="radio" autocomplete="off" name="radio_BFRGLVCLKK" value="answer"></input> <span>New Mexico</span></label><label><input type="radio" autocomplete="off" name="radio_BFRGLVCLKK" value=""></input> <span>Pennsylvania</span></label>
</div></li>
<li>Which state has the highest minimum value of colonies?
<div id="radio_RGDUGVYCVZ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RGDUGVYCVZ" value="answer"></input> <span>Minnesota</span></label><label><input type="radio" autocomplete="off" name="radio_RGDUGVYCVZ" value=""></input> <span>New Mexico</span></label><label><input type="radio" autocomplete="off" name="radio_RGDUGVYCVZ" value=""></input> <span>Pennsylvania</span></label>
</div></li>
<li>Which state had 20,000 colonies in Q3 of 2018 (2018-Q3)?
<div id="radio_USHRDIECDU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_USHRDIECDU" value=""></input> <span>Montana</span></label><label><input type="radio" autocomplete="off" name="radio_USHRDIECDU" value=""></input> <span>New Mexico</span></label><label><input type="radio" autocomplete="off" name="radio_USHRDIECDU" value="answer"></input> <span>Pennsylvania</span></label>
</div></li>
</ol>
<p><strong>Tip</strong>: If you use the <code>summary()</code>, ensure you do not include the “Average” row.</p>
<p>Great! Have a look at the solutions and ask any questions you would like.</p>

</div>
</div>
<div id="files-solutions" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Files solutions</h1>
<p>Before looking at these solutions keep in mind that there are many different ways to do the same thing in R. Therefore if your scripts are different than the ones below it does not mean they are wrong. As long as they produce the intended output they are correct.</p>
<div id="bats-solution" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Bats solution</h2>
<p><img src="figures/bat_solution.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Read in the file as a <strong>data frame</strong>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a>bat_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_8_files/bat_roosts.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Add a row with column totals:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" tabindex="-1"></a>bat_df[<span class="st">&quot;UK&quot;</span>,] <span class="ot">&lt;-</span> <span class="fu">colSums</span>(bat_df) </span></code></pre></div>
<p>Add a column with row totals:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a>bat_df<span class="sc">$</span>All_Bat_Species <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(bat_df) </span></code></pre></div>
<p>Create transposed <strong>data frame</strong>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a>bat_t_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(bat_df)) </span></code></pre></div>
<p><strong>Write</strong> file:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="fu">write.table</span>(bat_t_df, <span class="at">file =</span> <span class="st">&quot;Chapter_8_files/bat_roosts_t.csv&quot;</span>, </span>
<span id="cb87-2"><a href="#cb87-2" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, <span class="at">col.names =</span> <span class="cn">NA</span>)</span></code></pre></div>
<div class="webex-solution">
<button>
Commands to help with the MCQs
</button>
<p>You can figure out the MCQs by viewing the data frame.
However, you can also figure them out with R code.
Below are commands to get the answers for the MCQs.
I will let you decipher them yourself.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a><span class="co">#Question 1: Which region has no roosts?</span></span>
<span id="cb88-2"><a href="#cb88-2" tabindex="-1"></a>col_names_logical_vec <span class="ot">&lt;-</span> bat_t_df[<span class="st">&quot;All_Bat_Species&quot;</span>,] <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb88-3"><a href="#cb88-3" tabindex="-1"></a><span class="fu">colnames</span>(bat_t_df)[col_names_logical_vec]</span>
<span id="cb88-4"><a href="#cb88-4" tabindex="-1"></a><span class="co">#Question 2: Which region has the largest amount of _Myotis brandtii_ roosts?</span></span>
<span id="cb88-5"><a href="#cb88-5" tabindex="-1"></a>species <span class="ot">&lt;-</span> <span class="st">&quot;Myotis brandtii&quot;</span></span>
<span id="cb88-6"><a href="#cb88-6" tabindex="-1"></a>df_wo_total_species_and_uk <span class="ot">&lt;-</span> bat_t_df[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(bat_t_df)<span class="sc">-</span><span class="dv">1</span>),<span class="dv">1</span><span class="sc">:</span>(<span class="fu">ncol</span>(bat_t_df)<span class="sc">-</span><span class="dv">1</span>)]</span>
<span id="cb88-7"><a href="#cb88-7" tabindex="-1"></a>max_colonies <span class="ot">&lt;-</span> <span class="fu">max</span>(df_wo_total_species_and_uk[species,])</span>
<span id="cb88-8"><a href="#cb88-8" tabindex="-1"></a>col_names_logical_vec <span class="ot">&lt;-</span> df_wo_total_species_and_uk[species,] <span class="sc">==</span> max_colonies</span>
<span id="cb88-9"><a href="#cb88-9" tabindex="-1"></a><span class="fu">colnames</span>(df_wo_total_species_and_uk)[col_names_logical_vec]</span>
<span id="cb88-10"><a href="#cb88-10" tabindex="-1"></a><span class="co">#Question 3: Which Bat species has the highest number of roosts across the UK?</span></span>
<span id="cb88-11"><a href="#cb88-11" tabindex="-1"></a>max_uk <span class="ot">&lt;-</span> <span class="fu">max</span>(bat_t_df[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(bat_t_df)<span class="sc">-</span><span class="dv">1</span>),<span class="st">&quot;UK&quot;</span>])</span>
<span id="cb88-12"><a href="#cb88-12" tabindex="-1"></a>row_names_logical_vec <span class="ot">&lt;-</span> bat_t_df<span class="sc">$</span>UK <span class="sc">==</span> max_uk</span>
<span id="cb88-13"><a href="#cb88-13" tabindex="-1"></a><span class="fu">row.names</span>(bat_t_df)[row_names_logical_vec]</span>
<span id="cb88-14"><a href="#cb88-14" tabindex="-1"></a><span class="co">#Question 4: Which Bat species has the lowest number of roosts across the UK?</span></span>
<span id="cb88-15"><a href="#cb88-15" tabindex="-1"></a>min_uk <span class="ot">&lt;-</span> <span class="fu">min</span>(bat_t_df[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(bat_t_df)<span class="sc">-</span><span class="dv">1</span>),<span class="st">&quot;UK&quot;</span>])</span>
<span id="cb88-16"><a href="#cb88-16" tabindex="-1"></a>row_names_logical_vec <span class="ot">&lt;-</span> bat_t_df<span class="sc">$</span>UK <span class="sc">==</span> min_uk</span>
<span id="cb88-17"><a href="#cb88-17" tabindex="-1"></a><span class="fu">row.names</span>(bat_t_df)[row_names_logical_vec]</span></code></pre></div>
</div>
</div>
<div id="honey-bee-colonies-1" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Honey bee colonies</h2>
<p><img src="figures/beehive_solution.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Read in file:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a>bee_colonies_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_8_files/honey_bee.tsv&quot;</span>, </span>
<span id="cb89-2"><a href="#cb89-2" tabindex="-1"></a>                         <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Create 2017 &amp; 2018 <strong>data frame</strong>:
Read in file:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" tabindex="-1"></a><span class="co">#Can index to get the desired columns</span></span>
<span id="cb90-2"><a href="#cb90-2" tabindex="-1"></a>bee_colonies_2017_2018_df <span class="ot">&lt;-</span> bee_colonies_df[<span class="dv">9</span><span class="sc">:</span><span class="dv">16</span>,]</span>
<span id="cb90-3"><a href="#cb90-3" tabindex="-1"></a><span class="co">#Alternatively the tail() function can be used</span></span>
<span id="cb90-4"><a href="#cb90-4" tabindex="-1"></a><span class="co">#It is like head() but will get lowest rows</span></span>
<span id="cb90-5"><a href="#cb90-5" tabindex="-1"></a>bee_colonies_2017_2018_df <span class="ot">&lt;-</span> <span class="fu">tail</span>(bee_colonies_df, <span class="at">n =</span> <span class="dv">8</span>)</span></code></pre></div>
<p>Print Minnesota colony numbers:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;The number of colonies in Minnesota for&quot;</span>, <span class="fu">row.names</span>(bee_colonies_2017_2018_df),</span>
<span id="cb91-2"><a href="#cb91-2" tabindex="-1"></a>      <span class="st">&quot;was&quot;</span>, bee_colonies_2017_2018_df<span class="sc">$</span>Minnesota, </span>
<span id="cb91-3"><a href="#cb91-3" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<p>Mean row:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" tabindex="-1"></a>bee_colonies_2017_2018_df[<span class="st">&quot;Average&quot;</span>,] <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(bee_colonies_2017_2018_df)</span></code></pre></div>
<p>Write out file:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a><span class="fu">write.table</span>(bee_colonies_2017_2018_df, <span class="st">&quot;Chapter_8_files/bee_colonies_2017_2018.tsv&quot;</span>, </span>
<span id="cb93-2"><a href="#cb93-2" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">col.names =</span> <span class="cn">NA</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="webex-solution">
<button>
Commands to help with the MCQs
</button>
<p>You can figure out the MCQs by viewing the data frame.
However, you can also figure them out with R code.
Below are commands to get the answers for the MCQs.
I will let you decipher them yourself.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" tabindex="-1"></a><span class="co">#Question 1: Which state has the lowest average?</span></span>
<span id="cb94-2"><a href="#cb94-2" tabindex="-1"></a>min_average <span class="ot">&lt;-</span> <span class="fu">min</span>(bee_colonies_2017_2018_df[<span class="st">&quot;Average&quot;</span>,])</span>
<span id="cb94-3"><a href="#cb94-3" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">colnames</span>(bee_colonies_2017_2018_df)</span>
<span id="cb94-4"><a href="#cb94-4" tabindex="-1"></a>min_average_state <span class="ot">&lt;-</span> states[bee_colonies_2017_2018_df[<span class="st">&quot;Average&quot;</span>,] <span class="sc">==</span> min_average]</span>
<span id="cb94-5"><a href="#cb94-5" tabindex="-1"></a>min_average_state</span>
<span id="cb94-6"><a href="#cb94-6" tabindex="-1"></a><span class="co">#Question 2: Which state has the highest minimum value of colonies?</span></span>
<span id="cb94-7"><a href="#cb94-7" tabindex="-1"></a>bee_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(bee_colonies_2017_2018_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>,])</span>
<span id="cb94-8"><a href="#cb94-8" tabindex="-1"></a>bee_summary</span>
<span id="cb94-9"><a href="#cb94-9" tabindex="-1"></a><span class="co">#Question 3: Which state had 20,000 colonies in Q3 of 2018 (2018-Q3)?</span></span>
<span id="cb94-10"><a href="#cb94-10" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">20000</span></span>
<span id="cb94-11"><a href="#cb94-11" tabindex="-1"></a>column_logical_vec <span class="ot">&lt;-</span> bee_colonies_2017_2018_df[<span class="st">&quot;2018-Q3&quot;</span>,] <span class="sc">==</span> n</span>
<span id="cb94-12"><a href="#cb94-12" tabindex="-1"></a>column_logical_vec</span>
<span id="cb94-13"><a href="#cb94-13" tabindex="-1"></a><span class="fu">colnames</span>(bee_colonies_2017_2018_df)[column_logical_vec]</span></code></pre></div>
</div>

</div>
</div>
<div id="tipsandtrickschap" class="section level1" number="10">
<h1><span class="header-section-number">Chapter 10</span> Handy tips &amp; tricks</h1>
<p><img src="figures/magic.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Welcome to Chapter 10! This chapter will include coding to reinforce what you have learnt up to this point. There will also be plenty of new handy <strong>functions</strong> and some more concepts to learn.</p>
<p>For this chapter create a directory called “Chapter_10-11” in your main directory and set it as the working directory. Then create a script called “4-Handy_tips.R”. Remember to use annotations (<code>#</code>) and code sections (<code>####</code>)!</p>
<p>I’ll first introduce you to some R conventions and then some useful abilities of RStudio.</p>
<div id="r-conventions" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> R conventions</h2>
<p><img src="figures/rules.png" width="20%" style="display: block; margin: auto;" /></p>
<p>R conventions are style guides. You do not need to follow them but they are intended to help make code easier to read. There are lots of different suggestions for different parts of R code. Here we will only look at conventions for <strong>object/variable names</strong> and wide vs long code formatting.</p>
<div id="variable-names" class="section level3" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Variable names</h3>
<p><strong>Variable names</strong> have certain rules that must be followed. We covered these in <a href="#foundations">chapter 2</a> but below is a reminder:</p>
<ul>
<li>Must start with a letter.</li>
<li>Cannot contain spaces.</li>
<li>Cannot start with a number.</li>
<li>Cannot share the same name as a command or function in R.</li>
<li>They are case sensitive. The <strong>variable</strong> name <code>BB</code> is different to the <strong>variable</strong> name <code>bb</code> which is different again to <code>bB</code>.</li>
</ul>
<p>On top of these rules there are a few naming styles that are recommended. It is very good to choose one naming style and stick with it always. Below are three commonly used naming conventions for R. Look through them and choose your favourite to use.</p>
<div id="snake-case" class="section level4" number="10.1.1.1">
<h4><span class="header-section-number">10.1.1.1</span> Snake case</h4>
<p><img src="figures/snake_case.png" width="20%" style="display: block; margin: auto;" />
Snake case is my preferred naming convention due to my background. It consists of using lower case letters with underscores (<code>_</code>) between words. Numbers can also be used. Below are some examples of names in snake case.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a>one</span>
<span id="cb95-2"><a href="#cb95-2" tabindex="-1"></a>two_df</span>
<span id="cb95-3"><a href="#cb95-3" tabindex="-1"></a>two_2_df</span>
<span id="cb95-4"><a href="#cb95-4" tabindex="-1"></a>three_four_five</span>
<span id="cb95-5"><a href="#cb95-5" tabindex="-1"></a>three_four_five_2_vec</span>
<span id="cb95-6"><a href="#cb95-6" tabindex="-1"></a>this_is_snake_case</span></code></pre></div>
</div>
<div id="period-separated" class="section level4" number="10.1.1.2">
<h4><span class="header-section-number">10.1.1.2</span> Period separated</h4>
<p><img src="figures/period_separated.png" width="20%" style="display: block; margin: auto;" />
Period separated is almost identical to snake case. Just swap the underscores (<code>_</code>) with periods (<code>.</code>). Below are some examples of names in period separated.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" tabindex="-1"></a>one</span>
<span id="cb96-2"><a href="#cb96-2" tabindex="-1"></a>two.df</span>
<span id="cb96-3"><a href="#cb96-3" tabindex="-1"></a>two.<span class="fl">2.</span>df</span>
<span id="cb96-4"><a href="#cb96-4" tabindex="-1"></a>three.four.five</span>
<span id="cb96-5"><a href="#cb96-5" tabindex="-1"></a>three.four.five.<span class="fl">2.</span>vec</span>
<span id="cb96-6"><a href="#cb96-6" tabindex="-1"></a>this.is.period.separated</span></code></pre></div>
</div>
<div id="camel-case" class="section level4" number="10.1.1.3">
<h4><span class="header-section-number">10.1.1.3</span> Camel case</h4>
<p><img src="figures/camelCase.png" width="15%" style="display: block; margin: auto;" />
Camel case has no symbols to separate words. Instead after the first word every word starts with an upper case. Below are some examples of names in Camel Case.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" tabindex="-1"></a>one</span>
<span id="cb97-2"><a href="#cb97-2" tabindex="-1"></a>twoDf</span>
<span id="cb97-3"><a href="#cb97-3" tabindex="-1"></a>two2Df</span>
<span id="cb97-4"><a href="#cb97-4" tabindex="-1"></a>threeFourFive</span>
<span id="cb97-5"><a href="#cb97-5" tabindex="-1"></a>threeFourFive2Vec</span>
<span id="cb97-6"><a href="#cb97-6" tabindex="-1"></a>thisIsCamelCase</span></code></pre></div>
<p>There are exceptions when you will want to break your preferred naming style. One such example is when you are creating <strong>vectors</strong> to be used as columns for a <strong>data frame</strong>.</p>
</div>
<div id="wide-vs-long-coding" class="section level4" number="10.1.1.4">
<h4><span class="header-section-number">10.1.1.4</span> Wide vs Long coding</h4>
<p>If a command/<strong>function</strong> is only on one line then you were using <strong>wide</strong> coding. This is good with short commands and <strong>functions</strong> but is not very suitable for longer commands. Below are examples of long commands over one line each.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a><span class="co">#Create a data frame called df</span></span>
<span id="cb98-2"><a href="#cb98-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">one =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>), <span class="at">three =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>), <span class="at">five =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>), <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">&quot;Two&quot;</span>, <span class="st">&quot;Four&quot;</span>, <span class="st">&quot;Six&quot;</span>))</span>
<span id="cb98-3"><a href="#cb98-3" tabindex="-1"></a><span class="co">#Create a data frame called beach_df_2</span></span>
<span id="cb98-4"><a href="#cb98-4" tabindex="-1"></a>beach_df_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Crab =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">4</span>), <span class="at">Oystercatcher =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">4</span>), <span class="at">Sandpiper =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">Starfish =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">4</span>), <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">&quot;Formby&quot;</span>,<span class="st">&quot;West Kirby&quot;</span>,<span class="st">&quot;Crosby&quot;</span>,<span class="st">&quot;New Brighton&quot;</span>))</span></code></pre></div>
<p>Compare the above with the below <strong>long</strong> coding where arguments are separated by new lines.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a><span class="co">#Create a data frame called df</span></span>
<span id="cb99-2"><a href="#cb99-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">one =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>), </span>
<span id="cb99-3"><a href="#cb99-3" tabindex="-1"></a>                 <span class="at">three =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>), </span>
<span id="cb99-4"><a href="#cb99-4" tabindex="-1"></a>                 <span class="at">five =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>), </span>
<span id="cb99-5"><a href="#cb99-5" tabindex="-1"></a>                 <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">&quot;Two&quot;</span>, <span class="st">&quot;Four&quot;</span>, <span class="st">&quot;Six&quot;</span>))</span>
<span id="cb99-6"><a href="#cb99-6" tabindex="-1"></a><span class="co">#Create a data frame called beach_df_2</span></span>
<span id="cb99-7"><a href="#cb99-7" tabindex="-1"></a>beach_df_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Crab =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">4</span>), </span>
<span id="cb99-8"><a href="#cb99-8" tabindex="-1"></a>                         <span class="at">Oystercatcher =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">4</span>),</span>
<span id="cb99-9"><a href="#cb99-9" tabindex="-1"></a>                         <span class="at">Sandpiper =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb99-10"><a href="#cb99-10" tabindex="-1"></a>                         <span class="at">Starfish =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">4</span>), </span>
<span id="cb99-11"><a href="#cb99-11" tabindex="-1"></a>                         <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">&quot;Formby&quot;</span>,<span class="st">&quot;West Kirby&quot;</span>,<span class="st">&quot;Crosby&quot;</span>,<span class="st">&quot;New Brighton&quot;</span>))</span></code></pre></div>
<p>Hopefully you will agree with me that the long coding is a lot easier and quicker to read.</p>
<p>If you are interested in more about R style guide I would recommend looking at the following resource: <a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a></p>
</div>
</div>
</div>
<div id="rstudio" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> RStudio</h2>
<p>RStudio has many useful features which we have not covered. Let us remedy this and cover a few.</p>
<div id="global-options" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Global options</h3>
<p><img src="figures/global.png" width="15%" style="display: block; margin: auto;" /></p>
<p>To get to the RStudio Global Options click “Tools” in the RStudio Toolbar, then from the drop down menu click “Global Options..” . You should see something similar to the below:
<img src="figures/RStudio_global_options.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Have a look through the “General”, “Code”, and “Appearance” sections. The other sections are more advanced and I would suggest you ignore them currently.</p>
<p>Feel free to click on options in the “Appearance” section to see what they do. If you do not like your choices you can click the “Cancel” button to negate your recent choices and close the window. If you want to save your changes you can click the “Apply” button.</p>
<p>Change the following for later.</p>
<ol style="list-style-type: decimal">
<li>Go to Global options.</li>
<li>Click on the “Code” section on the left.</li>
<li>Click on the “Completion” tab at the top.</li>
<li>Ensure “Show code completion:” is set to “Manually (Tab)”</li>
<li>Click “Apply” at the bottom followed by “OK”.</li>
</ol>
<p>This will be useful for tab completion which we will cover shortly.
<img src="figures/RStudio_manual_tab.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="sweep-buttons" class="section level3" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> Sweep buttons</h3>
<p><img src="figures/sweep.png" width="20%" style="display: block; margin: auto;" />
Sweep buttons allow you to sweep away items you no longer want in RStudio. There are two main sweep buttons, one for the <strong>Console window</strong> and one for the <strong>Environment pane</strong>.</p>
<p>The sweep button for the <strong>console window</strong> will clear all the text in the <strong>console pane</strong>. This is useful if you have filled the <strong>console</strong> with lots of commands and <strong>data frames</strong>. This sweep button will not actually affect any of your work so do not be afraid to use it. The location of the sweep button is shown below.
<img src="figures/RStudio_console_sweep.png" width="60%" style="display: block; margin: auto;" /></p>
<p>The sweep button for the <strong>Environment pane</strong> is a bit more dangerous. This sweep button will clear all the objects from your environment. This will remove all the <strong>variables</strong> you have created. This is not too bad if you have been using the <strong>script editor</strong> to do your work as you can rerun all your commands to refill your environment. The location of the sweep button is shown below.
<img src="figures/RStudio_env_sweep.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="multiplication-table" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Multiplication table</h2>
<p><img src="figures/multiplication.png" width="20%" style="display: block; margin: auto;" />
Hopefully you’ll find the above useful. We will learn some new <strong>functions</strong> but before that let us create a quick <strong>data frame</strong>. You are going to make a multiplication table. The <strong>data frame</strong> will be a 10 by 10 table with numbers one to ten as the row names and the column names. The value in each cell/index will be equal to the row name number multiplied by the column name number.</p>
<p>Before looking at the code below can you think of a way to do this?</p>
<p>The code below shows a method to create this <strong>data frame</strong>. I have tried to show you a variety of methods to create the <strong>vectors</strong> below for demonstration purposes. Look at each command and make sure you understand how they work before continuing. In real life I would use one of these methods rather than many different methods.</p>
<p><strong>Tip</strong>: If you double click a word/name in the <strong>script editor</strong> it will highlight it. You can then start typing to replace the highlighted word.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" tabindex="-1"></a><span class="co">#Vectors that will become columns</span></span>
<span id="cb100-2"><a href="#cb100-2" tabindex="-1"></a>one <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb100-3"><a href="#cb100-3" tabindex="-1"></a>two <span class="ot">&lt;-</span> one<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb100-4"><a href="#cb100-4" tabindex="-1"></a>three <span class="ot">&lt;-</span> one<span class="sc">+</span>two</span>
<span id="cb100-5"><a href="#cb100-5" tabindex="-1"></a>four <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">4</span>, <span class="at">to =</span> <span class="dv">40</span>, <span class="at">by =</span> <span class="dv">4</span>)</span>
<span id="cb100-6"><a href="#cb100-6" tabindex="-1"></a>five <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">5</span></span>
<span id="cb100-7"><a href="#cb100-7" tabindex="-1"></a>six <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">6</span>, <span class="at">by =</span> <span class="dv">6</span>, <span class="at">length.out =</span> <span class="dv">10</span>)</span>
<span id="cb100-8"><a href="#cb100-8" tabindex="-1"></a>seven <span class="ot">&lt;-</span> one <span class="sc">*</span> (<span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">7</span>, <span class="dv">10</span>))</span>
<span id="cb100-9"><a href="#cb100-9" tabindex="-1"></a>ate <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)[((<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>) <span class="sc">%%</span> <span class="dv">8</span>) <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb100-10"><a href="#cb100-10" tabindex="-1"></a>nine <span class="ot">&lt;-</span> one <span class="sc">*</span> (<span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">9</span>, <span class="dv">10</span>))</span>
<span id="cb100-11"><a href="#cb100-11" tabindex="-1"></a>ten <span class="ot">&lt;-</span> (<span class="fu">seq</span>(<span class="dv">100</span>,<span class="dv">1000</span>,<span class="dv">100</span>))<span class="sc">/</span><span class="fu">rep</span>(<span class="dv">10</span>,<span class="dv">10</span>)</span>
<span id="cb100-12"><a href="#cb100-12" tabindex="-1"></a><span class="co">#Vector for row name</span></span>
<span id="cb100-13"><a href="#cb100-13" tabindex="-1"></a>row_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;one&quot;</span>,<span class="st">&quot;two&quot;</span>,<span class="st">&quot;three&quot;</span>,<span class="st">&quot;four&quot;</span>,<span class="st">&quot;five&quot;</span>,</span>
<span id="cb100-14"><a href="#cb100-14" tabindex="-1"></a>               <span class="st">&quot;six&quot;</span>,<span class="st">&quot;sefen&quot;</span>,<span class="st">&quot;ate&quot;</span>,<span class="st">&quot;nine&quot;</span>,<span class="st">&quot;ten&quot;</span>)</span>
<span id="cb100-15"><a href="#cb100-15" tabindex="-1"></a><span class="co">#Create data frame</span></span>
<span id="cb100-16"><a href="#cb100-16" tabindex="-1"></a>multiplication_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(one, two, three,</span>
<span id="cb100-17"><a href="#cb100-17" tabindex="-1"></a>                                four, five, six,</span>
<span id="cb100-18"><a href="#cb100-18" tabindex="-1"></a>                                seven, ate, nine, ten,</span>
<span id="cb100-19"><a href="#cb100-19" tabindex="-1"></a>                                <span class="at">row.names =</span> row_names)</span></code></pre></div>
<p>Have a look at the resulting <strong>data frame</strong>. You may have noticed that two of the row names and one of the column names is incorrect. We’ll use the <strong>functions</strong> <code>colnames()</code>and <code>row.names()</code> along with indexes and assignment to change these.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a><span class="co">#Change the 8th column name (&quot;ate&quot;) to &quot;eight&quot;</span></span>
<span id="cb101-2"><a href="#cb101-2" tabindex="-1"></a><span class="fu">colnames</span>(multiplication_df)[<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="st">&quot;eight&quot;</span></span>
<span id="cb101-3"><a href="#cb101-3" tabindex="-1"></a><span class="co">#Change the 7th and 8th row names (&quot;sefen&quot; and &quot;ate&quot;) to &quot;seven&quot; and &quot;eight&quot;</span></span>
<span id="cb101-4"><a href="#cb101-4" tabindex="-1"></a><span class="fu">row.names</span>(multiplication_df)[<span class="dv">7</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;seven&quot;</span>,<span class="st">&quot;eight&quot;</span>)</span></code></pre></div>
</div>
<div id="tab-complete" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Tab complete</h2>
<p><img src="figures/tab.png" width="15%" style="display: block; margin: auto;" />
Tab completion is a very useful method when coding in any language. It takes some practice to get used to but it increases the speed of coding and drastically reduces typos.</p>
<p>Before we continue, the tab key is the key above the “CAPS” key and left of the ‘q’ key. If you would like a demonstration of tab completion please ask!</p>
<p>The first way to tab complete is to tab complete file names. First you will need to download the following files into your “Chapter_10-11” directory.</p>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/tea_consumption.csv">tea_consumption.csv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/english_speaking_population_of_countries.tsv">english_speaking_population_of_countries.tsv</a></li>
</ul>
<p>Next you will run the command that is below. However, when your cursor is in the double quotes first press tab. This will hopefully show a dropdown of selections. There are two ways to then get to your choice:</p>
<ol style="list-style-type: decimal">
<li>Use the up and down arrow keys to move to the file name you want and then press enter to have the file name be autofilled.</li>
<li>Start typing your file name till it is the top choice of the drop down menu. You can then press enter to autofill the file name.</li>
</ol>
<p>In this case tab complete should only show “tea_consumption.csv” as it is the only file in your working directory.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" tabindex="-1"></a>tea_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;tea_consumption.csv&quot;</span>, <span class="at">check.names=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p>You may notice that we only provided the file name and the <code>check.names=FALSE</code> for the <code>read.csv()</code> <strong>function</strong>. This is because of the format of the input file. In this case we do not want any of the input columns converted into row names. Additionally, the file was comma separated and the default separator to be used for <code>read.csv()</code> is commas. We will come back to this <strong>data frame</strong> so either keep the <strong>variable</strong> in your <strong>environment</strong> or keep the <strong>read</strong> code handy.</p>
<p>Let us <strong>read</strong> in another file using tab complete to autofill the file name again.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" tabindex="-1"></a>english_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;english_speaking_population_of_countries.tsv&quot;</span>, </span>
<span id="cb103-2"><a href="#cb103-2" tabindex="-1"></a>                   <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, </span>
<span id="cb103-3"><a href="#cb103-3" tabindex="-1"></a>                   <span class="at">row.names =</span> <span class="dv">1</span>,</span>
<span id="cb103-4"><a href="#cb103-4" tabindex="-1"></a>                   <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Great!</p>
<p>The second way to use tab completion is to autofill <strong>variable</strong> names, <strong>function</strong> names and options. To autofill a <strong>variable</strong> or <strong>function</strong> name you can start typing the name then press tab to get the dropdown menu.</p>
<p>Whilst in the <code>()</code> of a <strong>function</strong> you can press tab to get a drop down menu of the option choices and press enter on the highlighted choice to autofill it.</p>
<p>This only works if the name currently exists. I.e. you cannot autofill a <strong>variable name</strong> if the <strong>variable</strong> is not in your <strong>environment</strong>.</p>
<p>Continue using tab complete for the rest of the course. Practice makes perfect.</p>
<p>If you really don’t like it you don’t have to use it.</p>
<p>Data from above files:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/List_of_countries_by_tea_consumption_per_capita" class="uri">https://en.wikipedia.org/wiki/List_of_countries_by_tea_consumption_per_capita</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_countries_by_English-speaking_population" class="uri">https://en.wikipedia.org/wiki/List_of_countries_by_English-speaking_population</a></li>
</ul>
</div>
<div id="tea" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> Tea</h2>
<p><img src="figures/tea.png" width="20%" style="display: block; margin: auto;" />
We will have a quick look at the “tea_df”. This data shows the annual consumption of tea per capita with a rank based on the highest to lowest consumers.</p>
<p>Unfortunately the third column has the annual per capita consumption in kilograms (KG) and pounds (LB) with the two values separated by a “_“. Thankfully we can use the <strong>function</strong> <code>gsub()</code> to fix this.</p>
<p><code>gsub()</code> will look for a specified pattern and replace it with a specified replacement.
<code>gsub()</code> is only to be used for <strong>strings</strong>.</p>
<p>Before fixing our <strong>data frame</strong> I’ll show you some examples of <code>gsub()</code>.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" tabindex="-1"></a><span class="co">#Scalar string with mistake</span></span>
<span id="cb104-2"><a href="#cb104-2" tabindex="-1"></a>sentence <span class="ot">&lt;-</span> <span class="st">&quot;The number 8 is spelt ate&quot;</span></span>
<span id="cb104-3"><a href="#cb104-3" tabindex="-1"></a><span class="co">#gsub to print out line with mistake fixed</span></span>
<span id="cb104-4"><a href="#cb104-4" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;ate&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;eight&quot;</span>, sentence)</span>
<span id="cb104-5"><a href="#cb104-5" tabindex="-1"></a><span class="co">#We can assign the scalar with the fix</span></span>
<span id="cb104-6"><a href="#cb104-6" tabindex="-1"></a>sentence <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;ate&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;eight&quot;</span>, sentence)</span>
<span id="cb104-7"><a href="#cb104-7" tabindex="-1"></a></span>
<span id="cb104-8"><a href="#cb104-8" tabindex="-1"></a><span class="co">#Vector with unwanted capital As</span></span>
<span id="cb104-9"><a href="#cb104-9" tabindex="-1"></a>letter_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;Ab&quot;</span>,<span class="st">&quot;Abc&quot;</span>,<span class="st">&quot;Abcd&quot;</span>)</span>
<span id="cb104-10"><a href="#cb104-10" tabindex="-1"></a><span class="co">#Replace pattern A with replacement a</span></span>
<span id="cb104-11"><a href="#cb104-11" tabindex="-1"></a>letter_vec <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;A&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;a&quot;</span>, letter_vec)</span>
<span id="cb104-12"><a href="#cb104-12" tabindex="-1"></a></span>
<span id="cb104-13"><a href="#cb104-13" tabindex="-1"></a><span class="co">#Vector with unwanted info after &quot;_&quot;</span></span>
<span id="cb104-14"><a href="#cb104-14" tabindex="-1"></a>extra_info_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A_some&quot;</span>,<span class="st">&quot;B_nada&quot;</span>,<span class="st">&quot;C_stuff&quot;</span>,<span class="st">&quot;D_nill&quot;</span>)</span>
<span id="cb104-15"><a href="#cb104-15" tabindex="-1"></a><span class="co">#Replace the _ and everything after it with nothing</span></span>
<span id="cb104-16"><a href="#cb104-16" tabindex="-1"></a><span class="co">#We signify this with &quot;.*&quot; which means any character (.) repeated zero or more times (*)</span></span>
<span id="cb104-17"><a href="#cb104-17" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;_.*&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, extra_info_vec)</span>
<span id="cb104-18"><a href="#cb104-18" tabindex="-1"></a></span>
<span id="cb104-19"><a href="#cb104-19" tabindex="-1"></a><span class="co">#What if we use gsub() with numerics?</span></span>
<span id="cb104-20"><a href="#cb104-20" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="dv">5</span>, <span class="at">replacement =</span> <span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb104-21"><a href="#cb104-21" tabindex="-1"></a><span class="co">#The output will be strings!</span></span></code></pre></div>
<p><code>.</code> and <code>*</code> are regular expressions. There are many regular expressions but we will only use <code>.*</code> to represent “all strings”. The best part about this is we can put the <code>.*</code> after a specific character to replace the specific character and everything after it. Alternatively we can put the <code>.*</code> before a specific character to replace the specific character and everything before it.</p>
<p>Let us carry this out with the “tea_df” so it will hopefully make more sense. We are going to do this so we can make a kilogram column and a pound column.</p>
<p><strong>Note</strong>: Make sure you have the “tea_df” in your environment before proceeding.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" tabindex="-1"></a><span class="co">#Create a column for lb (pound). We&#39;ll copy the KG_LB_annual_per_capita column</span></span>
<span id="cb105-2"><a href="#cb105-2" tabindex="-1"></a>tea_df<span class="sc">$</span>lb <span class="ot">&lt;-</span> tea_df<span class="sc">$</span>KG_LB_annual_per_capita</span>
<span id="cb105-3"><a href="#cb105-3" tabindex="-1"></a><span class="co">#For the lb column we&#39;ll replace the &quot;_&quot; and everything before it with nothing</span></span>
<span id="cb105-4"><a href="#cb105-4" tabindex="-1"></a>tea_df<span class="sc">$</span>lb <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;.*_&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, tea_df<span class="sc">$</span>lb)</span>
<span id="cb105-5"><a href="#cb105-5" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" tabindex="-1"></a><span class="co">#Change the column name KG_LB_annual_per_capita to kg</span></span>
<span id="cb105-7"><a href="#cb105-7" tabindex="-1"></a><span class="fu">colnames</span>(tea_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;kg&quot;</span></span>
<span id="cb105-8"><a href="#cb105-8" tabindex="-1"></a><span class="co">#For the kg column we&#39;ll replace the &quot;_&quot; and everything after it with nothing</span></span>
<span id="cb105-9"><a href="#cb105-9" tabindex="-1"></a>tea_df<span class="sc">$</span>kg <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;_.*&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, tea_df<span class="sc">$</span>kg)</span>
<span id="cb105-10"><a href="#cb105-10" tabindex="-1"></a></span>
<span id="cb105-11"><a href="#cb105-11" tabindex="-1"></a><span class="co">#Since the columns initially contained &quot;_&quot; they are string columns</span></span>
<span id="cb105-12"><a href="#cb105-12" tabindex="-1"></a><span class="co">#Check if this is correct with the str() function</span></span>
<span id="cb105-13"><a href="#cb105-13" tabindex="-1"></a><span class="fu">str</span>(tea_df)</span>
<span id="cb105-14"><a href="#cb105-14" tabindex="-1"></a><span class="co">#Change the kg and lb columns to numerics</span></span>
<span id="cb105-15"><a href="#cb105-15" tabindex="-1"></a>tea_df<span class="sc">$</span>kg <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tea_df<span class="sc">$</span>kg)</span>
<span id="cb105-16"><a href="#cb105-16" tabindex="-1"></a>tea_df<span class="sc">$</span>lb <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tea_df<span class="sc">$</span>lb)</span>
<span id="cb105-17"><a href="#cb105-17" tabindex="-1"></a><span class="co">#Check with str() to see if it is now numerics</span></span>
<span id="cb105-18"><a href="#cb105-18" tabindex="-1"></a><span class="fu">str</span>(tea_df)</span></code></pre></div>
<p>If you are interested in more regular expressions I would recommend looking at the following resources:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/strings.html#matching-patterns-with-regular-expressions" class="uri">https://r4ds.had.co.nz/strings.html#matching-patterns-with-regular-expressions</a></li>
<li><a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/regex.pdf" class="uri">https://raw.githubusercontent.com/rstudio/cheatsheets/main/regex.pdf</a></li>
</ul>
</div>
<div id="english-speakers-across-the-world" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> English speakers across the world</h2>
<p><img src="figures/language.png" width="20%" style="display: block; margin: auto;" />
Now we will do some processing of the “english_df” <strong>data frame</strong>. This shows the various number of english speakers with info on the number of those who have English as a first language and those who have it as an additional language. View the <strong>data frame</strong> to see its contents.</p>
<p>There are a lot of NA values. Looking at the values in the <strong>data frame</strong> try to figure out the two reasons that these NA values are present. Once you have had a thought you can have a look at the below two reasons.</p>
<ol style="list-style-type: decimal">
<li>Some countries have zero population of English first speakers and some countries have zero population of people who speak English as an additional language.</li>
<li>Some countries are missing data on the number of first and additional speakers, e.g.. Ukraine.</li>
</ol>
<p>We will fix these issues one by one. First let us change all NAs to the number 0.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" tabindex="-1"></a>english_df[<span class="fu">is.na</span>(english_df)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<p>We have changed all NAs. However, some of the rows in the 3rd and 4th column don’t equal the 2nd column. We’ll now remove these rows as they have missing data and we don’t want that here.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" tabindex="-1"></a><span class="co">#1st method with multiple lines for clarity</span></span>
<span id="cb107-2"><a href="#cb107-2" tabindex="-1"></a><span class="co">#Create a vector of first language + additional language</span></span>
<span id="cb107-3"><a href="#cb107-3" tabindex="-1"></a>english_total_vec <span class="ot">&lt;-</span> english_df[,<span class="dv">3</span>] <span class="sc">+</span> english_df[,<span class="st">&quot;As an additional language&quot;</span>]</span>
<span id="cb107-4"><a href="#cb107-4" tabindex="-1"></a><span class="co">#Compare the column of total english speakers against the vector we created above</span></span>
<span id="cb107-5"><a href="#cb107-5" tabindex="-1"></a><span class="co">#This will create a logical vector (TRUE or FALSE)</span></span>
<span id="cb107-6"><a href="#cb107-6" tabindex="-1"></a>english_total_logical_vec <span class="ot">&lt;-</span> english_df<span class="sc">$</span><span class="st">`</span><span class="at">Total English speakers</span><span class="st">`</span> <span class="sc">==</span> english_total_vec</span>
<span id="cb107-7"><a href="#cb107-7" tabindex="-1"></a><span class="co">#Now create a new data frame by indexing the english_df rows by the logical vector</span></span>
<span id="cb107-8"><a href="#cb107-8" tabindex="-1"></a><span class="co">#This will mean all TRUE rows will be kept and all FALSE rows will not be kept</span></span>
<span id="cb107-9"><a href="#cb107-9" tabindex="-1"></a>english_complete_datasets_df <span class="ot">&lt;-</span> english_df[english_total_logical_vec,]</span>
<span id="cb107-10"><a href="#cb107-10" tabindex="-1"></a><span class="co">#Remove the vectors we do not need any more</span></span>
<span id="cb107-11"><a href="#cb107-11" tabindex="-1"></a><span class="fu">rm</span>(english_total_vec,english_total_logical_vec)</span>
<span id="cb107-12"><a href="#cb107-12" tabindex="-1"></a></span>
<span id="cb107-13"><a href="#cb107-13" tabindex="-1"></a><span class="co">#2nd method is to carry out the above all in one command</span></span>
<span id="cb107-14"><a href="#cb107-14" tabindex="-1"></a>english_complete_datasets_df_2 <span class="ot">&lt;-</span> </span>
<span id="cb107-15"><a href="#cb107-15" tabindex="-1"></a>  english_df[</span>
<span id="cb107-16"><a href="#cb107-16" tabindex="-1"></a>    (english_df<span class="sc">$</span><span class="st">`</span><span class="at">As first language</span><span class="st">`</span> <span class="sc">+</span> english_df<span class="sc">$</span><span class="st">`</span><span class="at">As an additional language</span><span class="st">`</span>) <span class="sc">==</span></span>
<span id="cb107-17"><a href="#cb107-17" tabindex="-1"></a>      english_df<span class="sc">$</span><span class="st">`</span><span class="at">Total English speakers</span><span class="st">`</span>,</span>
<span id="cb107-18"><a href="#cb107-18" tabindex="-1"></a>    ]</span>
<span id="cb107-19"><a href="#cb107-19" tabindex="-1"></a></span>
<span id="cb107-20"><a href="#cb107-20" tabindex="-1"></a><span class="co">#We can compare our two created data frames with the identical() function</span></span>
<span id="cb107-21"><a href="#cb107-21" tabindex="-1"></a><span class="fu">identical</span>(english_complete_datasets_df,english_complete_datasets_df_2)</span></code></pre></div>
<p>I would use the one command method but the multi line method is just as valid. It doesn’t matter if your R code is not as compact as possible. The main things that matter are:</p>
<ol style="list-style-type: decimal">
<li>Your code works. When writing your own code make sure you test it with small datasets first so you know it is doing what you think it is doing.</li>
<li>Your code is well annotated. This will help with the first step and it will help your future self and others who will read your code.</li>
<li>You can read and understand your own code (annotation helps). There is little point in code you cannot read. You will most likely need to debug code you write (I know I do). Write code in a way that you know you will be able to read. If this means doing little parts over multiple lines then do it that way.</li>
</ol>
<p>We will come back to the <strong>data frames</strong> “tea_df” and “english_complete_datasets_df” for the exercises. But let us go onto 2 more topics.</p>
</div>
<div id="identical" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> Identical</h2>
<p><img src="figures/identikeys.png" width="20%" style="display: block; margin: auto;" />
I touched on the <code>identical()</code> <strong>function</strong> above to compare the two resulting <strong>data frames</strong>. <code>identical()</code> will compare two objects and if the objects are exactly identical it will print TRUE. If they are not exactly identical it will print FALSE. The function can be given <strong>scalars</strong>, <strong>vectors</strong>, <strong>data frames</strong> etc. Below are some examples</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb108-2"><a href="#cb108-2" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb108-3"><a href="#cb108-3" tabindex="-1"></a><span class="fu">identical</span>(<span class="st">&quot;word&quot;</span>,<span class="st">&quot;word&quot;</span>)</span>
<span id="cb108-4"><a href="#cb108-4" tabindex="-1"></a><span class="fu">identical</span>(<span class="st">&quot;word&quot;</span>,<span class="st">&quot;orb&quot;</span>)</span>
<span id="cb108-5"><a href="#cb108-5" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">1</span>,<span class="st">&quot;1&quot;</span>)</span>
<span id="cb108-6"><a href="#cb108-6" tabindex="-1"></a><span class="fu">identical</span>(<span class="st">&quot;one&quot;</span>,<span class="dv">1</span>)</span>
<span id="cb108-7"><a href="#cb108-7" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb108-8"><a href="#cb108-8" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">6</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb108-9"><a href="#cb108-9" tabindex="-1"></a><span class="fu">identical</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb108-10"><a href="#cb108-10" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>))</span>
<span id="cb108-11"><a href="#cb108-11" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;c&quot;</span>,<span class="st">&quot;b&quot;</span>))</span>
<span id="cb108-12"><a href="#cb108-12" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;b&quot;</span>,<span class="st">&quot;a&quot;</span>))</span>
<span id="cb108-13"><a href="#cb108-13" tabindex="-1"></a><span class="fu">identical</span>(english_df,english_df)</span>
<span id="cb108-14"><a href="#cb108-14" tabindex="-1"></a><span class="fu">identical</span>(english_df,tea_df)</span></code></pre></div>
</div>
<div id="shortcuts" class="section level2" number="10.8">
<h2><span class="header-section-number">10.8</span> Shortcuts</h2>
<p><img src="figures/keyboard.png" width="30%" style="display: block; margin: auto;" />
RStudio has many keyboard shortcuts for the <strong>Script editor</strong>. Some of these are common shortcuts used for other software and some are unique to RStudio.</p>
<p>Below are a few:</p>
<ul>
<li>“Ctrl + a” : This will highlight all text in a <strong>Script editor</strong> that your cursor is in. This is useful to run all your code by highlighting it all and then pressing “Ctrl + enter”. Be careful though as if you starting typing when all the text is highlighted it will delete it all.</li>
<li>“Ctrl + z” : This will undo your last typing action. You can undo your actions till the last time you saved your script. Very useful if you accidentally delete some text.</li>
<li>“Ctrl + c” : Copy highlighted text.</li>
<li>“Ctrl + p” : Paste text.</li>
<li>“Ctrl + shift + c” : This will put a <code>#</code> at the start of each highlighted line. This is useful to annotate multiple lines at once. To unannotate the lines, highlight them again and use the shortcut.</li>
<li>“Ctrl + f” : This will bring the search and replace menu at the top of the <strong>Script editor</strong>.</li>
</ul>
<p>There are a lot more shortcuts. If you want to see the full list go to “Tools” on the RStudio toolbar and then select “Keyboard Shortcuts Help”</p>
</div>
<div id="handy-tips-tricks-mcqs" class="section level2" number="10.9">
<h2><span class="header-section-number">10.9</span> Handy tips &amp; tricks MCQs</h2>
<p><img src="figures/question_bubble_blue.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Attempt the below MCQs.</p>
<ol style="list-style-type: decimal">
<li>Which <strong>variable</strong> naming convention uses underscores to separate words?
<div id="radio_WJEPCKGNIV" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WJEPCKGNIV" value=""></input> <span>Camel case</span></label><label><input type="radio" autocomplete="off" name="radio_WJEPCKGNIV" value=""></input> <span>Period separated</span></label><label><input type="radio" autocomplete="off" name="radio_WJEPCKGNIV" value="answer"></input> <span>Snake case</span></label>
</div></li>
<li>Which <strong>variable</strong> naming convention uses upper case to denote new words?
<div id="radio_QKJRYIWXFE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_QKJRYIWXFE" value="answer"></input> <span>Camel case</span></label><label><input type="radio" autocomplete="off" name="radio_QKJRYIWXFE" value=""></input> <span>Period separated</span></label><label><input type="radio" autocomplete="off" name="radio_QKJRYIWXFE" value=""></input> <span>Snake case</span></label>
</div></li>
<li>Which button can you use to clear the text from your console or environment?
<div id="radio_JKHWJTGDSW" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JKHWJTGDSW" value=""></input> <span><code>seq()</code></span></label><label><input type="radio" autocomplete="off" name="radio_JKHWJTGDSW" value="answer"></input> <span>Sweep</span></label><label><input type="radio" autocomplete="off" name="radio_JKHWJTGDSW" value=""></input> <span><code>rep()</code></span></label>
</div></li>
<li>Which <strong>function</strong> allows you replicate an <strong>object</strong>?
<div id="radio_LHWEPKJEOC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LHWEPKJEOC" value=""></input> <span><code>seq()</code></span></label><label><input type="radio" autocomplete="off" name="radio_LHWEPKJEOC" value=""></input> <span>Sweep</span></label><label><input type="radio" autocomplete="off" name="radio_LHWEPKJEOC" value="answer"></input> <span><code>rep()</code></span></label>
</div></li>
<li>Which <strong>function</strong> can be used to create a numeric sequence?
<div id="radio_YJUJJEQHNB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YJUJJEQHNB" value="answer"></input> <span><code>seq()</code></span></label><label><input type="radio" autocomplete="off" name="radio_YJUJJEQHNB" value="answer"></input> <span>Sweep</span></label><label><input type="radio" autocomplete="off" name="radio_YJUJJEQHNB" value=""></input> <span><code>rep()</code></span></label>
</div></li>
<li>Which <strong>function</strong> is useful for changing NAs to 0s?
<div id="radio_PAWCSILECJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PAWCSILECJ" value=""></input> <span><code>gsub()</code></span></label><label><input type="radio" autocomplete="off" name="radio_PAWCSILECJ" value="answer"></input> <span><code>is.na()</code></span></label><label><input type="radio" autocomplete="off" name="radio_PAWCSILECJ" value=""></input> <span>Tab</span></label>
</div></li>
<li>Which key can be used to auto-complete file and <strong>function</strong> names?
<div id="radio_BQVGVYTKNQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BQVGVYTKNQ" value=""></input> <span><code>gsub()</code></span></label><label><input type="radio" autocomplete="off" name="radio_BQVGVYTKNQ" value=""></input> <span><code>is.na()</code></span></label><label><input type="radio" autocomplete="off" name="radio_BQVGVYTKNQ" value="answer"></input> <span>Tab</span></label>
</div></li>
<li>Which <strong>function</strong> can be used to replace patterns?
<div id="radio_AQHYIVPZXL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_AQHYIVPZXL" value="answer"></input> <span><code>gsub()</code></span></label><label><input type="radio" autocomplete="off" name="radio_AQHYIVPZXL" value=""></input> <span><code>is.na()</code></span></label><label><input type="radio" autocomplete="off" name="radio_AQHYIVPZXL" value=""></input> <span>Tab</span></label>
</div></li>
</ol>
<p>Now time for exercises!</p>

</div>
</div>
<div id="handy-exercises" class="section level1" number="11">
<h1><span class="header-section-number">Chapter 11</span> Handy exercises</h1>
<p><img src="figures/exercises.png" width="20%" style="display: block; margin: auto;" /></p>
<p>There has been a lot covered this session so these exercises will hopefully be straightforward.</p>
<p>Please set the working directory to your main workshop directory and use your “Exercises.R” script. Ensure you are using annotations and code sections to keep the contents clear and separated.</p>
<p>Additionally <strong>read</strong> in and <strong>write</strong> out files to “Chapter_10-11” .</p>
<div id="tea-exercise" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Tea exercise</h2>
<p><img src="figures/tea.png" width="20%" style="display: block; margin: auto;" /></p>
<p>The first task you will carry out is printing out information from “tea_df”. Below is an example statement for the country Turkey:</p>
<p>“Turkey is the number 1 consumer of tea. It consumes 5.8kg of tea annually per capita.”</p>
<p>Print out this statement for the countries Ireland, United Kingdom, France, and Australia with their relevant information. Make sure the kilogram value only has one decimal place.</p>
<p><strong>Tip</strong>: You will require the <strong>functions</strong> <code>paste()</code> and <code>round()</code> from day 1.</p>
</div>
<div id="english-speakers-across-the-world-exercise" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> English speakers across the world exercise</h2>
<p><img src="figures/language.png" width="20%" style="display: block; margin: auto;" />
The last exercise is to create the following table as a <strong>data frame</strong> called “english_100mil_df”. Use the “english_complete_datasets_df” <strong>data frame</strong> as a start.</p>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Eligible population
</th>
<th style="text-align:right;">
Total English speakers
</th>
<th style="text-align:right;">
As first language
</th>
<th style="text-align:right;">
As an additional language
</th>
<th style="text-align:right;">
Fraction of population that are English speakers
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
United States
</td>
<td style="text-align:right;">
296603003
</td>
<td style="text-align:right;">
283160411
</td>
<td style="text-align:right;">
234171556
</td>
<td style="text-align:right;">
48988855
</td>
<td style="text-align:right;">
0.9546782
</td>
</tr>
<tr>
<td style="text-align:left;">
Nigeria
</td>
<td style="text-align:right;">
156493000
</td>
<td style="text-align:right;">
79000000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
79000000
</td>
<td style="text-align:right;">
0.5048149
</td>
</tr>
<tr>
<td style="text-align:left;">
Philippines
</td>
<td style="text-align:right;">
110000000
</td>
<td style="text-align:right;">
64025890
</td>
<td style="text-align:right;">
36935
</td>
<td style="text-align:right;">
63988955
</td>
<td style="text-align:right;">
0.5820535
</td>
</tr>
<tr>
<td style="text-align:left;">
Bangladesh
</td>
<td style="text-align:right;">
163323100
</td>
<td style="text-align:right;">
30108031
</td>
<td style="text-align:right;">
709873
</td>
<td style="text-align:right;">
29398158
</td>
<td style="text-align:right;">
0.1843464
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
1210000000
</td>
<td style="text-align:right;">
10000000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10000000
</td>
<td style="text-align:right;">
0.0082645
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
205000000
</td>
<td style="text-align:right;">
10542000
</td>
<td style="text-align:right;">
292000
</td>
<td style="text-align:right;">
10250000
</td>
<td style="text-align:right;">
0.0514244
</td>
</tr>
<tr>
<td style="text-align:left;">
Mexico
</td>
<td style="text-align:right;">
120664000
</td>
<td style="text-align:right;">
15686262
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15686262
</td>
<td style="text-align:right;">
0.1299995
</td>
</tr>
<tr>
<td style="text-align:left;">
Mean
</td>
<td style="text-align:right;">
323154729
</td>
<td style="text-align:right;">
70360371
</td>
<td style="text-align:right;">
33601481
</td>
<td style="text-align:right;">
36758890
</td>
<td style="text-align:right;">
0.3450831
</td>
</tr>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:right;">
2262083103
</td>
<td style="text-align:right;">
492522594
</td>
<td style="text-align:right;">
235210364
</td>
<td style="text-align:right;">
257312230
</td>
<td style="text-align:right;">
0.2177297
</td>
</tr>
</tbody>
</table>
</div>
<p>The <strong>data frame</strong> only contains countries that have an eligible population that is greater than 100 million (100000000). Ensure the “Total” row was not calculated using the “Mean row”.</p>
<p>When you have created yours check it with the above one. Is your value for the “Total” “Fraction of population that are English speakers” correct?.</p>
<p>Once you have created the <strong>data frame</strong> <strong>write</strong> it out as a comma separated file with the function <code>write.table()</code> called “English_top_7_populated_countries.csv”. Have the row and column names surrounded by quotes in your file. Make sure there is an empty value above your row names.</p>
</div>
<div id="extra-exercise" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Extra exercise</h2>
<p><img src="figures/multiplication.png" width="20%" style="display: block; margin: auto;" />
If you still have time this session and you do not have any questions please attempt the following task:</p>
<p>Create a multiplication table like the one in the practice from today. However have the row and column names equal one to twelve.</p>
<p>Then <strong>write</strong> the <strong>data frame</strong> to a file. The name and format of the file is up to you.</p>
<p>There is no solution to this in the next section.</p>

</div>
</div>
<div id="handy-solutions" class="section level1" number="12">
<h1><span class="header-section-number">Chapter 12</span> Handy Solutions</h1>
<p><img src="figures/answers.png" width="20%" style="display: block; margin: auto;" /></p>
<div id="tea-solution" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Tea solution</h2>
<p><img src="figures/tea.png" width="20%" style="display: block; margin: auto;" />
First ensure you have the “tea_df” loaded (remember your working directory will need to be in the correct location first). Also it needs to be preprocessed with the <code>gsub()</code> function.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" tabindex="-1"></a>tea_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_10-11/tea_consumption.csv&quot;</span>, <span class="at">check.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb109-2"><a href="#cb109-2" tabindex="-1"></a>tea_df<span class="sc">$</span>lb <span class="ot">&lt;-</span> tea_df<span class="sc">$</span>KG_LB_annual_per_capita</span>
<span id="cb109-3"><a href="#cb109-3" tabindex="-1"></a>tea_df<span class="sc">$</span>lb <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;.*_&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, tea_df<span class="sc">$</span>lb)</span>
<span id="cb109-4"><a href="#cb109-4" tabindex="-1"></a><span class="fu">colnames</span>(tea_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;kg&quot;</span></span>
<span id="cb109-5"><a href="#cb109-5" tabindex="-1"></a>tea_df<span class="sc">$</span>kg <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;_.*&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, tea_df<span class="sc">$</span>kg)</span>
<span id="cb109-6"><a href="#cb109-6" tabindex="-1"></a>tea_df<span class="sc">$</span>kg <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tea_df<span class="sc">$</span>kg)</span>
<span id="cb109-7"><a href="#cb109-7" tabindex="-1"></a>tea_df<span class="sc">$</span>lb <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tea_df<span class="sc">$</span>lb)</span></code></pre></div>
<p>Remember there are many ways to carry this out but here is one.</p>
<p>First create a <strong>vector</strong> with the names of the countries we want:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Ireland&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Australia&quot;</span>)</span></code></pre></div>
<p>Set the row names to the countries for easy indexing:</p>
<p><strong>Note</strong>: Row name must be unique which is the case here.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" tabindex="-1"></a><span class="fu">row.names</span>(tea_df) <span class="ot">&lt;-</span> tea_df<span class="sc">$</span>Country</span></code></pre></div>
<p>Create a <strong>data frame</strong> that only contains our countries of interest. We use the <strong>vector</strong> as an index for the rows.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" tabindex="-1"></a>tea_df_subset <span class="ot">&lt;-</span> tea_df[countries,]</span></code></pre></div>
<p>Here because we are working with a temporary <strong>variable</strong> we will overwrite the kg column so the values only contain one decimal place</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" tabindex="-1"></a>tea_df_subset<span class="sc">$</span>kg <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="at">x =</span> tea_df_subset<span class="sc">$</span>kg, <span class="at">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Last step is to print out the statement. We will use <code>paste0()</code> which is exactly like <code>paste()</code> but the <code>sep =</code> option is set to <code>""</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" tabindex="-1"></a><span class="fu">paste0</span>(tea_df_subset<span class="sc">$</span>Country, <span class="st">&quot; is the number &quot;</span>, </span>
<span id="cb114-2"><a href="#cb114-2" tabindex="-1"></a>       tea_df_subset<span class="sc">$</span>Rank, <span class="st">&quot; consumer of tea. It consumes &quot;</span>, </span>
<span id="cb114-3"><a href="#cb114-3" tabindex="-1"></a>       tea_df_subset<span class="sc">$</span>kg, <span class="st">&quot;kg of tea annually per capita.&quot;</span>)</span></code></pre></div>
</div>
<div id="english-speakers-across-the-world-solution" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> English speakers across the world solution</h2>
<p><img src="figures/language.png" width="20%" style="display: block; margin: auto;" /></p>
<p>First make sure the <strong>data frame</strong> is created. Remember to set your working directory to where the file is.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" tabindex="-1"></a>english_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_10-11/english_speaking_population_of_countries.tsv&quot;</span>, </span>
<span id="cb115-2"><a href="#cb115-2" tabindex="-1"></a>                   <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, </span>
<span id="cb115-3"><a href="#cb115-3" tabindex="-1"></a>                   <span class="at">row.names =</span> <span class="dv">1</span>,</span>
<span id="cb115-4"><a href="#cb115-4" tabindex="-1"></a>                   <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-5"><a href="#cb115-5" tabindex="-1"></a>english_df[<span class="fu">is.na</span>(english_df)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb115-6"><a href="#cb115-6" tabindex="-1"></a>english_complete_datasets_df <span class="ot">&lt;-</span> </span>
<span id="cb115-7"><a href="#cb115-7" tabindex="-1"></a>  english_df[</span>
<span id="cb115-8"><a href="#cb115-8" tabindex="-1"></a>    (english_df<span class="sc">$</span><span class="st">`</span><span class="at">As first language</span><span class="st">`</span> <span class="sc">+</span> english_df<span class="sc">$</span><span class="st">`</span><span class="at">As an additional language</span><span class="st">`</span>) <span class="sc">==</span></span>
<span id="cb115-9"><a href="#cb115-9" tabindex="-1"></a>      english_df<span class="sc">$</span><span class="st">`</span><span class="at">Total English speakers</span><span class="st">`</span>,</span>
<span id="cb115-10"><a href="#cb115-10" tabindex="-1"></a>    ]</span></code></pre></div>
<p>Create new <strong>data frame</strong> only containing countries with an eligible population of &gt; 100 million.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" tabindex="-1"></a>english_100mil_df <span class="ot">&lt;-</span> english_complete_datasets_df[</span>
<span id="cb116-2"><a href="#cb116-2" tabindex="-1"></a>  english_complete_datasets_df<span class="sc">$</span><span class="st">`</span><span class="at">Eligible population</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">100000000</span>,</span>
<span id="cb116-3"><a href="#cb116-3" tabindex="-1"></a>  ]</span></code></pre></div>
<p>Create column with fraction of total english speakers against population</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" tabindex="-1"></a>english_100mil_df<span class="sc">$</span><span class="st">`</span><span class="at">Fraction of population that are English speakers</span><span class="st">`</span> <span class="ot">&lt;-</span> </span>
<span id="cb117-2"><a href="#cb117-2" tabindex="-1"></a>  english_100mil_df<span class="sc">$</span><span class="st">`</span><span class="at">Total English speakers</span><span class="st">`</span> <span class="sc">/</span></span>
<span id="cb117-3"><a href="#cb117-3" tabindex="-1"></a>  english_100mil_df<span class="sc">$</span><span class="st">`</span><span class="at">Eligible population</span><span class="st">`</span></span></code></pre></div>
<p>Create row with mean values</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" tabindex="-1"></a>english_100mil_df[<span class="st">&quot;Mean&quot;</span>,] <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(english_100mil_df)</span></code></pre></div>
<p>Create row with totals</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" tabindex="-1"></a>english_100mil_df[<span class="st">&quot;Total&quot;</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">colSums</span>(english_100mil_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span></code></pre></div>
<p>Create the total fraction of english speakers</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" tabindex="-1"></a>english_100mil_df[<span class="st">&quot;Total&quot;</span>,<span class="st">&quot;Fraction of population that are English speakers&quot;</span>] <span class="ot">&lt;-</span> </span>
<span id="cb120-2"><a href="#cb120-2" tabindex="-1"></a>  english_100mil_df[<span class="st">&quot;Total&quot;</span>,<span class="st">&quot;Total English speakers&quot;</span>] <span class="sc">/</span></span>
<span id="cb120-3"><a href="#cb120-3" tabindex="-1"></a>  english_100mil_df[<span class="st">&quot;Total&quot;</span>,<span class="st">&quot;Eligible population&quot;</span>]</span></code></pre></div>
<p><strong>Write</strong> the data as a file</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" tabindex="-1"></a><span class="fu">write.table</span>(<span class="at">x =</span> english_100mil_df, </span>
<span id="cb121-2"><a href="#cb121-2" tabindex="-1"></a>            <span class="at">file =</span> <span class="st">&quot;Chapter_10-11/English_top_7_populated_countries.csv&quot;</span>, </span>
<span id="cb121-3"><a href="#cb121-3" tabindex="-1"></a>            <span class="at">col.names=</span><span class="cn">NA</span>,</span>
<span id="cb121-4"><a href="#cb121-4" tabindex="-1"></a>            <span class="at">quote =</span> <span class="cn">TRUE</span>, </span>
<span id="cb121-5"><a href="#cb121-5" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>

</div>
</div>



<div id="histsandlineschap" class="section level1" number="13">
<h1><span class="header-section-number">Chapter 13</span> Histograms and Line graphs</h1>
<p><img src="figures/palette.png" width="20%" style="display: block; margin: auto;" /></p>
<p>In this chapter we will learn how to create two different types of plots; Histograms and Line graphs. I have chosen these two types of plots first as they are relatively straightforward to create.</p>
<p>Create and use the directory “Chapter_13-16” as the working directory for this chapter. Additionally create a new script called “Histograms_n_line_graphs.R” for this chapter.</p>
<div id="histogram" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Histogram</h2>
<p><img src="figures/histogram.png" width="20%" style="display: block; margin: auto;" />
A histogram consists of bars showing the frequency of variables present in numbered ranges (bins). This allows you to see an approximate distribution of numerical data.</p>
<p>We are starting with histograms as the <strong>function</strong> <code>hist()</code>, which creates a histogram, only requires one <strong>vector</strong>.</p>
<p>The following code creates a numerical <strong>vector</strong> and then produces a histogram. When you run the <code>hist()</code> command a plot should appear in your <strong>“Plots” pane</strong> of the <strong>MISC window</strong>.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" tabindex="-1"></a>numeric_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">40</span></span>
<span id="cb122-2"><a href="#cb122-2" tabindex="-1"></a><span class="fu">hist</span>(numeric_vec)</span></code></pre></div>
<p>You will notice that the histogram is not very interesting. There are 8 bars all of equal size. This is because we plotted the numbers from 1-40 so numbers 1-5 are counted in the first bar/bin, 6-10 in the second bar/bin and so forth. To get a more interesting histogram we will create a more interesting <strong>vector</strong>.</p>
<p>Histograms are good to see the numerical distribution of data. In this case we are going to look at the number of cities (with greater than 300,000 population) in EU countries (<a href="https://en.Wikipedia.org/wiki/List_of_cities_in_the_European_Union_by_population_within_city_limits" class="uri">https://en.Wikipedia.org/wiki/List_of_cities_in_the_European_Union_by_population_within_city_limits</a>).</p>
<p>The first step is to create a <strong>vector</strong> with the numbers of cities in EU countries, however we won’t know what countries these correspond to yet. Then we will create a histogram and set the colour of the bars with the option <code>col =</code>.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" tabindex="-1"></a>eu_cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>,</span>
<span id="cb123-2"><a href="#cb123-2" tabindex="-1"></a>               <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">22</span>,</span>
<span id="cb123-3"><a href="#cb123-3" tabindex="-1"></a>               <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">1</span>,</span>
<span id="cb123-4"><a href="#cb123-4" tabindex="-1"></a>               <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">7</span>,</span>
<span id="cb123-5"><a href="#cb123-5" tabindex="-1"></a>               <span class="dv">1</span>, <span class="dv">12</span>, <span class="dv">3</span>)</span>
<span id="cb123-6"><a href="#cb123-6" tabindex="-1"></a><span class="fu">hist</span>(eu_cities, <span class="at">col =</span> <span class="st">&quot;orange&quot;</span>)</span></code></pre></div>
<p>With that histogram we can see that most EU countries have 1-5 cities with a few having a much larger amount. As most of the time you will not be working with just <strong>vectors</strong> let us make a <strong>data frame</strong> containing the number of EU cities and the population of the EU countries.</p>
<p>The population numbers will be in millions to the closest 1 decimal place and consist of the 2020 Eurostat figures from: <a href="https://en.Wikipedia.org/wiki/List_of_European_Union_member_states_by_population" class="uri">https://en.Wikipedia.org/wiki/List_of_European_Union_member_states_by_population</a></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" tabindex="-1"></a>eu_country_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Austria&quot;</span>, <span class="st">&quot;Belgium&quot;</span>, <span class="st">&quot;Bulgaria&quot;</span>, <span class="st">&quot;Croatia&quot;</span>, <span class="st">&quot;Czech Republic&quot;</span>, </span>
<span id="cb124-2"><a href="#cb124-2" tabindex="-1"></a>                      <span class="st">&quot;Denmark&quot;</span>, <span class="st">&quot;Estonia&quot;</span>, <span class="st">&quot;Finland&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Germany&quot;</span>, </span>
<span id="cb124-3"><a href="#cb124-3" tabindex="-1"></a>                      <span class="st">&quot;Greece&quot;</span>, <span class="st">&quot;Hungary&quot;</span>, <span class="st">&quot;Ireland&quot;</span>, <span class="st">&quot;Italy&quot;</span>, <span class="st">&quot;Latvia&quot;</span>, </span>
<span id="cb124-4"><a href="#cb124-4" tabindex="-1"></a>                      <span class="st">&quot;Lithuania&quot;</span>, <span class="st">&quot;Netherlands&quot;</span>, <span class="st">&quot;Poland&quot;</span>, <span class="st">&quot;Portugal&quot;</span>, <span class="st">&quot;Romania&quot;</span>, </span>
<span id="cb124-5"><a href="#cb124-5" tabindex="-1"></a>                      <span class="st">&quot;Slovakia&quot;</span>, <span class="st">&quot;Spain&quot;</span>, <span class="st">&quot;Sweden&quot;</span>)</span>
<span id="cb124-6"><a href="#cb124-6" tabindex="-1"></a>eu_pop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">8.9</span>, <span class="fl">11.5</span>, <span class="fl">7.0</span>, <span class="fl">4.1</span>, <span class="fl">10.7</span>,</span>
<span id="cb124-7"><a href="#cb124-7" tabindex="-1"></a>            <span class="fl">5.8</span>, <span class="fl">1.3</span>, <span class="fl">5.5</span>, <span class="fl">67.1</span>, <span class="fl">83.2</span>,</span>
<span id="cb124-8"><a href="#cb124-8" tabindex="-1"></a>            <span class="fl">10.7</span>, <span class="fl">9.8</span>, <span class="fl">5.0</span>, <span class="fl">60.2</span>, <span class="fl">1.9</span>,</span>
<span id="cb124-9"><a href="#cb124-9" tabindex="-1"></a>            <span class="fl">2.8</span>, <span class="fl">17.4</span>, <span class="fl">38.0</span>, <span class="fl">10.3</span>, <span class="fl">19.3</span>,</span>
<span id="cb124-10"><a href="#cb124-10" tabindex="-1"></a>            <span class="fl">5.5</span>, <span class="fl">47.3</span>, <span class="fl">10.3</span>)</span>
<span id="cb124-11"><a href="#cb124-11" tabindex="-1"></a>eu_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(eu_cities,eu_pop,</span>
<span id="cb124-12"><a href="#cb124-12" tabindex="-1"></a>                    <span class="at">row.names =</span> eu_country_names)</span></code></pre></div>
<p>We will quickly create a histogram for the population numbers. We’ll make the bar colours purple and we’ll make the x axis label “2020 Eurostat population number in millions” with the <code>xlab =</code> option.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" tabindex="-1"></a><span class="fu">hist</span>(eu_df<span class="sc">$</span>eu_pop, <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>,</span>
<span id="cb125-2"><a href="#cb125-2" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;2020 Eurostat population number in millions&quot;</span>)</span></code></pre></div>
<p>We have a similar pattern as with the number of cities (most have low numbers, some high numbers).</p>
<p>We can quickly check if the countries with the high number of cities also have the high populations by creating a new column equal to population / number of cities. This will give us nice ratios. We can plot the distribution of these ratios in a histogram.</p>
<p>For this histogram we will also add a title to the plot with the option <code>main =</code>. Additionally we will choose a different colour. Having different colours and main titles makes it easier for you to instantly know which plot you are looking at.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" tabindex="-1"></a><span class="co">#Create ratio column</span></span>
<span id="cb126-2"><a href="#cb126-2" tabindex="-1"></a>eu_df<span class="sc">$</span>pop_cities_ratio <span class="ot">&lt;-</span> eu_df<span class="sc">$</span>eu_pop <span class="sc">/</span> eu_df<span class="sc">$</span>eu_cities</span>
<span id="cb126-3"><a href="#cb126-3" tabindex="-1"></a><span class="co">#Histogram of ratio distribution</span></span>
<span id="cb126-4"><a href="#cb126-4" tabindex="-1"></a><span class="fu">hist</span>(eu_df<span class="sc">$</span>pop_cities_ratio, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb126-5"><a href="#cb126-5" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Ratio of population (millions) to numer of cities&quot;</span>,</span>
<span id="cb126-6"><a href="#cb126-6" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;EU countries ratio of population to cities&quot;</span>)</span></code></pre></div>
<p>Looking at the plot most countries seem to have a ratio of 2-6 million citizens to every city. However, it is still not a perfect match with some lower and some higher ratios. Of course a result is a result and we have hopefully found out something new.</p>
<p>Before we go onto line graphs I’ll show you how to look at your previous plots. In the <strong>Plots pane</strong> of the <strong>MISC window</strong> there are two arrows on the top left. You can use these to go backwards and forwards between the plots you have created since you opened RStudio. Give it a go!</p>
<p><img src="figures/RStudio_plot_pane_arrows.png" width="40%" style="display: block; margin: auto;" /></p>
</div>
<div id="line-graphs" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Line graphs</h2>
<p><img src="figures/line_graph.png" width="20%" style="display: block; margin: auto;" />
Line graphs are perfect for showing change over time. Knowing this we’ll go back to a data set we have touched before, the file “honey_bee.tsv” from Chapter 8. This file showed the number of Honey Bee colonies in various US states from 2015-2018.</p>
<div id="read-in-data" class="section level3" number="13.2.1">
<h3><span class="header-section-number">13.2.1</span> Read in data</h3>
<p>First step is to <strong>read</strong> in the data from the “Chapter_8_files” directory. Once the <strong>data frame</strong> is created we will remove all non 2017 &amp; 2018 information.</p>
<p><strong>Note</strong>: The <code>../</code> below represents going up one directory. I.e. going up from your current working directory (“Chapter_13-16”) to the main directory so it can be directed to “Chapter_8_files”.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" tabindex="-1"></a>bee_colonies_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../Chapter_8_files/honey_bee.tsv&quot;</span>, </span>
<span id="cb127-2"><a href="#cb127-2" tabindex="-1"></a>                            <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb127-3"><a href="#cb127-3" tabindex="-1"></a>bee_colonies_2017_2018_df <span class="ot">&lt;-</span> bee_colonies_df[<span class="dv">9</span><span class="sc">:</span><span class="dv">16</span>,]</span></code></pre></div>
<p>Before we continue have a look at the <strong>data frame</strong> and make sure you are comfortable with what it contains.</p>
</div>
<div id="plotting-a-line-graph" class="section level3" number="13.2.2">
<h3><span class="header-section-number">13.2.2</span> Plotting a line graph</h3>
<p>We are going to plot the entire information for the state of Minnesota. We will use the <strong>function</strong> <code>plot()</code> with the option <code>type = "l"</code>. This will produce a plot of type “line” (<code>"l"</code>).</p>
<p>This requires we provide a numeric <strong>vector</strong> for the x axis (option <code>x =</code>) and the y axis (option <code>y =</code>). Currently our quarter and year information is in the row names as strings.</p>
<p>Therefore before we plot the information we will create a new column called “time_point” with the numbers 1 to the number of rows. We will carry this out with the <strong>function</strong> <code>nrow()</code> which produces one number equal to the number of rows in the specified <strong>data frame</strong>.</p>
<p>We won’t use it here but the <strong>function</strong> <code>ncol()</code> is similar to <code>nrow()</code> but for the number of columns.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" tabindex="-1"></a><span class="co">#Produce time_point column</span></span>
<span id="cb128-2"><a href="#cb128-2" tabindex="-1"></a>bee_colonies_df<span class="sc">$</span>time_point <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(bee_colonies_df))</span>
<span id="cb128-3"><a href="#cb128-3" tabindex="-1"></a><span class="co">#Produce line plot of Minnesota over time point.</span></span>
<span id="cb128-4"><a href="#cb128-4" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Minnesota, bee_colonies_df<span class="sc">$</span>time_point, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
</div>
<div id="adding-lines-to-a-plot" class="section level3" number="13.2.3">
<h3><span class="header-section-number">13.2.3</span> Adding lines to a plot</h3>
<p>This is looking decent but you normally want more than one line in a line graph. Thankfully we can do this with the <strong>function</strong> <code>lines()</code>. We can add the other three states to the line graph like below:</p>
<p><strong>Tip</strong>: Remember to use tab completion to auto fill <strong>function</strong>, <strong>variable</strong>, and column names as well as for <strong>function</strong> options.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Montana, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb129-2"><a href="#cb129-2" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span><span class="st">`</span><span class="at">New Mexico</span><span class="st">`</span>, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb129-3"><a href="#cb129-3" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Pennsylvania, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span></code></pre></div>
<p>We have created the line graph with all the states However all the data is not visible.</p>
</div>
<div id="axis-limits" class="section level3" number="13.2.4">
<h3><span class="header-section-number">13.2.4</span> Axis limits</h3>
<p>To fix this we need to make sure all the data is within the graph. When the <code>plot()</code> <strong>function</strong> was run it created the y limits based on Minnesota which has a minimum and maximum value of 136000 and 27000. Unfortunately the other some other states barely fit in this range.</p>
<p>To prevent this issue we can use the <code>plot()</code> option of <code>ylim =</code>. This option is provided with a <strong>vector</strong> of 2 numbers. The first number is where the y axis will start. The second number is where the y axis will end.</p>
<p>To find out where the y axis will end we will use the <code>max()</code> <strong>function</strong>. This will give one number which is equal to the highest number found in a numeric <strong>object</strong>. This <strong>object</strong> can be a <strong>scalar</strong>, <strong>vector</strong>, or a <strong>data frame</strong>.</p>
<p>We will use the <strong>function</strong> <code>min()</code> just like <code>max()</code> to find where the y axis should start.</p>
<p>Let us therefore recreate the plot with an appropriate y axis range.</p>
<p><strong>Note</strong>: Some times it is more appropriate to set values for the y limits (i.e. starting the y axis at 0).</p>
<p><strong>Tip</strong>: Copying your past code in the script editor and editing it will make the following examples a lot quicker to carry out.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" tabindex="-1"></a><span class="co">#Minimum and maximum for y axis</span></span>
<span id="cb130-2"><a href="#cb130-2" tabindex="-1"></a><span class="co">#Provide the function a subset of the bee_colonies_df</span></span>
<span id="cb130-3"><a href="#cb130-3" tabindex="-1"></a><span class="co">#so it is not using the time_point column</span></span>
<span id="cb130-4"><a href="#cb130-4" tabindex="-1"></a>min_y <span class="ot">&lt;-</span> <span class="fu">min</span>(bee_colonies_df[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb130-5"><a href="#cb130-5" tabindex="-1"></a>max_y <span class="ot">&lt;-</span> <span class="fu">max</span>(bee_colonies_df[,<span class="sc">-</span><span class="dv">5</span>])</span>
<span id="cb130-6"><a href="#cb130-6" tabindex="-1"></a><span class="co">#Produce line plot of Minnesota over time point.</span></span>
<span id="cb130-7"><a href="#cb130-7" tabindex="-1"></a><span class="co">#Set y limits (min,max)</span></span>
<span id="cb130-8"><a href="#cb130-8" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Minnesota, bee_colonies_df<span class="sc">$</span>time_point, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb130-9"><a href="#cb130-9" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(min_y,max_y))</span>
<span id="cb130-10"><a href="#cb130-10" tabindex="-1"></a><span class="co">#Add lines</span></span>
<span id="cb130-11"><a href="#cb130-11" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Montana, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb130-12"><a href="#cb130-12" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span><span class="st">`</span><span class="at">New Mexico</span><span class="st">`</span>, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb130-13"><a href="#cb130-13" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Pennsylvania, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span></code></pre></div>
<p>Great! That is much better. We can now see that two lines fall after time_point 2 whilst one increases.</p>
</div>
<div id="axis-labels" class="section level3" number="13.2.5">
<h3><span class="header-section-number">13.2.5</span> Axis labels</h3>
<p>Numbers on the x axis are not ideal in this case. We will therefore use the <code>axis()</code> function to set our own x axis labels. We will use the following options for this:</p>
<ul>
<li><code>1</code>: The first option to <code>axis()</code> indicates the location of the axis labels. <code>1</code> indicates they will be located on the x axis (below).</li>
<li><code>at = bee_colonies_df$time_point</code>: This indicates where the points tic marks will be drawn.</li>
<li><code>labels = row.names(bee_colonies_df)</code>: A character <strong>vector</strong> for the labels to be placed at the tick marks.</li>
</ul>
<p>For more info for <code>axis()</code> run the command <code>?axis</code> to see its help page.</p>
<p>To use the <code>axis()</code> <strong>function</strong> correctly we need to make sure there are no preexisting labels and tick marks on the x axis or else the new labels will go on top of the old. To do this we provide the <code>plot()</code> <strong>function</strong> with the option <code>xaxt ='n'</code>, i.e. no x axis ticks.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" tabindex="-1"></a><span class="co">#Produce line plot of Minnesota over time point.</span></span>
<span id="cb131-2"><a href="#cb131-2" tabindex="-1"></a><span class="co">#Ensure x axis ticks and labels are not displayed</span></span>
<span id="cb131-3"><a href="#cb131-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Minnesota, bee_colonies_df<span class="sc">$</span>time_point, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb131-4"><a href="#cb131-4" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(min_y,max_y), <span class="at">xaxt =</span> <span class="st">&#39;n&#39;</span>)</span>
<span id="cb131-5"><a href="#cb131-5" tabindex="-1"></a><span class="co">#Add row names (year and quarter strings) as x axix labels</span></span>
<span id="cb131-6"><a href="#cb131-6" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> bee_colonies_df<span class="sc">$</span>time_point, <span class="at">labels =</span> <span class="fu">row.names</span>(bee_colonies_df))</span>
<span id="cb131-7"><a href="#cb131-7" tabindex="-1"></a><span class="co">#Add lines</span></span>
<span id="cb131-8"><a href="#cb131-8" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Montana, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb131-9"><a href="#cb131-9" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span><span class="st">`</span><span class="at">New Mexico</span><span class="st">`</span>, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb131-10"><a href="#cb131-10" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Pennsylvania, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span></code></pre></div>
<p>When the plot is generated there may be only some labels showing for the x axis. If you would like to show them all increase the size of the <strong>MISC window</strong>.</p>
</div>
<div id="plot-titles" class="section level3" number="13.2.6">
<h3><span class="header-section-number">13.2.6</span> Plot titles</h3>
<p>Before we colour the lines different colours, let us add a main title and provide the x and y axis with better titles.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" tabindex="-1"></a><span class="co">#Produce line plot of Minnesota over time point.</span></span>
<span id="cb132-2"><a href="#cb132-2" tabindex="-1"></a><span class="co">#Add main, x, and y titles</span></span>
<span id="cb132-3"><a href="#cb132-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Minnesota, bee_colonies_df<span class="sc">$</span>time_point, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb132-4"><a href="#cb132-4" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(min_y,max_y), <span class="at">xaxt =</span> <span class="st">&#39;n&#39;</span>,</span>
<span id="cb132-5"><a href="#cb132-5" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Number of Honey Bee colonies in 4 US states over 2017 &amp; 2018&quot;</span>,</span>
<span id="cb132-6"><a href="#cb132-6" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Bee colonies&quot;</span>,</span>
<span id="cb132-7"><a href="#cb132-7" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Year and Quarter&quot;</span>)</span>
<span id="cb132-8"><a href="#cb132-8" tabindex="-1"></a><span class="co">#Add row names (year and quarter strings) as x axix labels</span></span>
<span id="cb132-9"><a href="#cb132-9" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> bee_colonies_df<span class="sc">$</span>time_point, <span class="at">labels =</span> <span class="fu">row.names</span>(bee_colonies_df))</span>
<span id="cb132-10"><a href="#cb132-10" tabindex="-1"></a><span class="co">#Add lines</span></span>
<span id="cb132-11"><a href="#cb132-11" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Montana, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb132-12"><a href="#cb132-12" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span><span class="st">`</span><span class="at">New Mexico</span><span class="st">`</span>, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span>
<span id="cb132-13"><a href="#cb132-13" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Pennsylvania, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point)</span></code></pre></div>
</div>
<div id="line-colours" class="section level3" number="13.2.7">
<h3><span class="header-section-number">13.2.7</span> Line colours</h3>
<p>Next we will colour the lines differently to differentiate the states. We carry this out with the <code>col =</code> options for <code>plot()</code> and <code>lines()</code>.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" tabindex="-1"></a><span class="co">#Produce line plot of Minnesota over time point.</span></span>
<span id="cb133-2"><a href="#cb133-2" tabindex="-1"></a><span class="co">#Include the colour red for the bars</span></span>
<span id="cb133-3"><a href="#cb133-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Minnesota, bee_colonies_df<span class="sc">$</span>time_point, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb133-4"><a href="#cb133-4" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(min_y,max_y), <span class="at">xaxt =</span> <span class="st">&#39;n&#39;</span>,</span>
<span id="cb133-5"><a href="#cb133-5" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Number of Honey Bee colonies in 4 US states over 2017 &amp; 2018&quot;</span>,</span>
<span id="cb133-6"><a href="#cb133-6" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Bee colonies&quot;</span>,</span>
<span id="cb133-7"><a href="#cb133-7" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Year and Quarter&quot;</span>,</span>
<span id="cb133-8"><a href="#cb133-8" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb133-9"><a href="#cb133-9" tabindex="-1"></a><span class="co">#Add row names (year and quarter strings) as x axix labels</span></span>
<span id="cb133-10"><a href="#cb133-10" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> bee_colonies_df<span class="sc">$</span>time_point, <span class="at">labels =</span> <span class="fu">row.names</span>(bee_colonies_df))</span>
<span id="cb133-11"><a href="#cb133-11" tabindex="-1"></a><span class="co">#Add lines with different colours</span></span>
<span id="cb133-12"><a href="#cb133-12" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Montana, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb133-13"><a href="#cb133-13" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span><span class="st">`</span><span class="at">New Mexico</span><span class="st">`</span>, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span>
<span id="cb133-14"><a href="#cb133-14" tabindex="-1"></a><span class="fu">lines</span>(<span class="at">y =</span> bee_colonies_df<span class="sc">$</span>Pennsylvania, <span class="at">x =</span> bee_colonies_df<span class="sc">$</span>time_point, <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>)</span></code></pre></div>
</div>
<div id="plot-legend" class="section level3" number="13.2.8">
<h3><span class="header-section-number">13.2.8</span> Plot legend</h3>
<p>We are almost there! The one thing we are missing now is a legend so we can quickly see what colour represents each state.</p>
<p>This can be carried out by using the <strong>function</strong> <code>legend()</code> after the plot is created. In this case the <strong>function</strong> is run with the following options:</p>
<ul>
<li><code>x = "topleft"</code>: The legend will be placed in the top left of the plot.</li>
<li><code>legend = colnames(bee_colonies_df[,1:4])</code>: This dictates the labels that will be in the legend.</li>
<li><code>col = c("red","blue","green","purple")</code>: This indicates the matching colours for the labels.</li>
<li><code>lty = 1</code>: This indicates that the colours will be presented as lines of type 1.</li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb134-2"><a href="#cb134-2" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">colnames</span>(bee_colonies_df[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]),</span>
<span id="cb134-3"><a href="#cb134-3" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;purple&quot;</span>),</span>
<span id="cb134-4"><a href="#cb134-4" tabindex="-1"></a>       <span class="at">lty =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>That is a good amount to go through. The next chapter will go into scatter plots and box plots. If you have time read through the above again and possibly try to create a histogram or line plot with one of the data sets from previous chapters.</p>

</div>
</div>
</div>
<div id="scatterandboxchap" class="section level1" number="14">
<h1><span class="header-section-number">Chapter 14</span> Scatter plots and Box plots</h1>
<p><img src="figures/large_brush.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Last chapter we learnt how to make Histograms and Line graphs. In this chapter it is Scatter plots and Box plots.</p>
<p>Continue using the directory “Chapter_13-16” as the working directory.</p>
<div id="scatter-plot" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Scatter plot</h2>
<p><img src="figures/Scatterplot_2.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Scatter plots are a great way to compare two matching variables. To make a scatter plot we use the <code>plot()</code> <strong>function</strong> again. This means a lot of what we went through the last chapter will be helpful for this chapter</p>
<div id="basic-examples" class="section level3" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Basic examples</h3>
<p>First we’ll create a simple scatter plot plotting the numbers 1:20 against the same range of numbers times by 2. For this we provide the option <code>type = "p"</code> to indicate we want the data plotted as points.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">y =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)<span class="sc">*</span><span class="dv">2</span>, <span class="at">type =</span> <span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<p>That was a nice linear plot. We’ll make a curve this time.</p>
<p>In the command we will not include the option <code>type = "p"</code> as this is the default for <code>plot()</code>.</p>
<p>Additionally we will not provide the option names <code>x =</code> and <code>y =</code>. <strong>Functions</strong> have an order to their options so if you leave out the option names but provide options (in this case <strong>vectors</strong>) it will use the options in the order. In the case of <code>plot()</code> it will take the first option as <code>x =</code> and the second option as <code>y =</code>. It is common for plotting functions to take x first then y.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, (<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>))</span></code></pre></div>
</div>
<div id="animal-sizes" class="section level3" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> Animal sizes</h3>
<p><img src="figures/blue_whale.png" width="15%" style="display: block; margin: auto;" />
For our scatter plot from real data we will look at the sizes of the largest animals in the world. This data is from: <a href="https://en.Wikipedia.org/wiki/Largest_organisms" class="uri">https://en.Wikipedia.org/wiki/Largest_organisms</a></p>
<p>The data we will be using will contain the following information:</p>
<ul>
<li>Animal names</li>
<li>Average mass in tonnes</li>
<li>Maximum mass in tonnes</li>
<li>Average total length in metres</li>
<li>Group, In this case are they Mammals or Reptiles</li>
<li>Biom, are they aquatic, semiaquatic, or terrestrial</li>
</ul>
<p>First download the <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/animal_sizes.csv">animal_sizes.csv</a> file into your “Chapter_13-16” directory.</p>
<p>Next, <strong>read</strong> the data into R. We have included a new option: <code>stringsAsFactors = TRUE</code>. This is important for plotting and will be explained more later.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" tabindex="-1"></a>animal_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;animal_sizes.csv&quot;</span>, </span>
<span id="cb137-2"><a href="#cb137-2" tabindex="-1"></a>                      <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb137-3"><a href="#cb137-3" tabindex="-1"></a>                      <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span></span>
<span id="cb137-4"><a href="#cb137-4" tabindex="-1"></a>                      )</span></code></pre></div>
<p>Check the column names with the <strong>function</strong> <code>colnames()</code>. With these column names we can create some quick plots.</p>
<p>We’ll compare the average and maximum weight</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average mass (tonnes)</span><span class="st">`</span>,</span>
<span id="cb138-2"><a href="#cb138-2" tabindex="-1"></a>     <span class="at">y =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Maximum mass (tonnes)</span><span class="st">`</span>)</span></code></pre></div>
<p>Average and maximum weight appear to correlate as expected.</p>
<p>Sometimes a quick and easy plot is all you want. If you’re not going to present a plot then it doesn’t need to be pretty. As long as it is functional it is useful.</p>
<p>Now let’s compare the average weight and length</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average mass (tonnes)</span><span class="st">`</span>,</span>
<span id="cb139-2"><a href="#cb139-2" tabindex="-1"></a>     <span class="at">y =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average total length (m)</span><span class="st">`</span>)</span></code></pre></div>
<p>With that we can see the following:</p>
<ul>
<li>At lower weights (&lt; 20 tonnes) a longer length does not necessarily mean a higher mass</li>
<li>At higher weights (&gt;20 tonnes) there appears to be an overall trend of longer lengths equaling higher masses with the animal with the highest mass having the longest length</li>
</ul>
<p>However it is quite hard to see the overall trend in the lower mass animals as they are squashed in a small part of the plot. We can zoom into this part in two different ways</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" tabindex="-1"></a><span class="co">#First method is to set the x and y limits manually </span></span>
<span id="cb140-2"><a href="#cb140-2" tabindex="-1"></a><span class="co">#This allows us to choose the specific part to zoom into</span></span>
<span id="cb140-3"><a href="#cb140-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average mass (tonnes)</span><span class="st">`</span>,</span>
<span id="cb140-4"><a href="#cb140-4" tabindex="-1"></a>     <span class="at">y =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average total length (m)</span><span class="st">`</span>,</span>
<span id="cb140-5"><a href="#cb140-5" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>))</span>
<span id="cb140-6"><a href="#cb140-6" tabindex="-1"></a><span class="co">#The other method is to subset the data</span></span>
<span id="cb140-7"><a href="#cb140-7" tabindex="-1"></a><span class="co">#so we only plot the data we want</span></span>
<span id="cb140-8"><a href="#cb140-8" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> animal_df[animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average mass (tonnes)</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">10</span>,</span>
<span id="cb140-9"><a href="#cb140-9" tabindex="-1"></a>                   <span class="st">&quot;Average mass (tonnes)&quot;</span>],</span>
<span id="cb140-10"><a href="#cb140-10" tabindex="-1"></a>     <span class="at">y =</span> animal_df[animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average total length (m)</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">10</span>,</span>
<span id="cb140-11"><a href="#cb140-11" tabindex="-1"></a>                   <span class="st">&quot;Average total length (m)&quot;</span>])</span>
<span id="cb140-12"><a href="#cb140-12" tabindex="-1"></a><span class="co">#I personally prefer the x and y limit approach</span></span></code></pre></div>
<p>We can also include the Biom metadata as an aesthetic in the plot</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" tabindex="-1"></a><span class="co">#Plot</span></span>
<span id="cb141-2"><a href="#cb141-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average mass (tonnes)</span><span class="st">`</span>,</span>
<span id="cb141-3"><a href="#cb141-3" tabindex="-1"></a>     <span class="at">y =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average total length (m)</span><span class="st">`</span>, </span>
<span id="cb141-4"><a href="#cb141-4" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">as.numeric</span>(animal_df<span class="sc">$</span>Biom),</span>
<span id="cb141-5"><a href="#cb141-5" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">1</span></span>
<span id="cb141-6"><a href="#cb141-6" tabindex="-1"></a>     )</span>
<span id="cb141-7"><a href="#cb141-7" tabindex="-1"></a><span class="co">#Legend</span></span>
<span id="cb141-8"><a href="#cb141-8" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottomright&quot;</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(animal_df<span class="sc">$</span>Biom), </span>
<span id="cb141-9"><a href="#cb141-9" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(animal_df<span class="sc">$</span>Biom), <span class="at">pch =</span> <span class="dv">1</span>)</span></code></pre></div>
</div>
</div>
<div id="factors" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Factors</h2>
<p>The last command used a lot of <strong>factors</strong>.</p>
<p><strong>Factors</strong> are a new <strong>class</strong>! They are a combination of <strong>String</strong> and <strong>Numeric</strong>. They are useful for categorical data where the same values will appear multiple times.</p>
<p>View the <strong>data frame</strong> and then check its structure with <code>str()</code>. You should notice that the columns Group and Biom are <strong>Factors</strong> with different amounts of <strong>levels</strong>.</p>
<p>The Group column has 2 <strong>levels</strong>. Confirm this with the <strong>function</strong> <code>levels()</code> which returns the levels and <code>nlevels()</code> which returns the number of <strong>levels</strong>.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" tabindex="-1"></a><span class="fu">levels</span>(animal_df<span class="sc">$</span>Group)</span>
<span id="cb142-2"><a href="#cb142-2" tabindex="-1"></a><span class="fu">nlevels</span>(animal_df<span class="sc">$</span>Group)</span></code></pre></div>
<p>What are <strong>levels</strong>?</p>
<p><strong>Levels</strong> are the unique values in a <strong>factor</strong>. <strong>Levels</strong> also store a matching number. This number determines the order of the levels. In the case of Group “Mammal” is assigned the number 1 and “Reptile” is assigned the number 2. This is because numbers are assigned to <strong>Levels</strong> in alphabetical order by default.</p>
<p>The other part of a <strong>factor</strong> is the <strong>elements</strong>. The <strong>elements</strong> are the part of a <strong>vector</strong> we are familiar with. Let us look at the <strong>factor vector</strong></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" tabindex="-1"></a>animal_df<span class="sc">$</span>Group</span></code></pre></div>
<p>It looks just like a <strong>character vector</strong> except there are no double quotes and the <strong>levels</strong> are at the bottom.</p>
<p>However, the <strong>elements</strong> are actually numbers! Each number is assigned a <strong>string</strong> by the <strong>level</strong>. This means:</p>
<ul>
<li>The <strong>factor</strong> only needs to store a number for each <strong>element</strong> and then it stores each unique <strong>level</strong> only once. This will take up less memory than storing a <strong>string</strong> multiple times.</li>
<li>A <strong>factor</strong> can be used as a <strong>numeric</strong> or a <strong>string</strong>. This is very useful for plotting.</li>
</ul>
<p>If you don’t understand <strong>factors</strong> from that explanation that is fine. I find it is a hard concept to explain or understand.</p>
<p>An analogy would be a map key. You could just write “town”, “Mountain”, “railroad”, “Lake” over a map to say where everything is like below:
<img src="figures/town_words.png" width="40%" style="display: block; margin: auto;" /></p>
<p>Compare this to our map with symbols and a key:
<img src="figures/town_symbols.png" width="40%" style="display: block; margin: auto;" /></p>
<p>The key represents the <strong>levels</strong> with our unique <strong>strings</strong> corresponding to symbols (numbers). Instead of each string being stored on the map multiple times only the symbols (numbers) are.</p>
<p>Time for a more practical example with code. We will first create a <strong>character vector</strong> then create a <strong>factor</strong> from it with the <strong>function</strong> <code>factor()</code>. We’ll then see what we can do with a <strong>factor</strong>.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" tabindex="-1"></a><span class="co">#Create a character vector</span></span>
<span id="cb144-2"><a href="#cb144-2" tabindex="-1"></a>char_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;a&quot;</span>,<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;d&quot;</span>,<span class="st">&quot;d&quot;</span>,<span class="st">&quot;c&quot;</span>)</span>
<span id="cb144-3"><a href="#cb144-3" tabindex="-1"></a><span class="co">#Attempt to convert it to a numeric</span></span>
<span id="cb144-4"><a href="#cb144-4" tabindex="-1"></a><span class="fu">as.numeric</span>(char_vec)</span>
<span id="cb144-5"><a href="#cb144-5" tabindex="-1"></a><span class="co">#As expected this does not work and will give NAs</span></span>
<span id="cb144-6"><a href="#cb144-6" tabindex="-1"></a></span>
<span id="cb144-7"><a href="#cb144-7" tabindex="-1"></a><span class="co">#Create a factor vector from our previous character vector</span></span>
<span id="cb144-8"><a href="#cb144-8" tabindex="-1"></a>factor_vec <span class="ot">&lt;-</span> <span class="fu">factor</span>(char_vec)</span>
<span id="cb144-9"><a href="#cb144-9" tabindex="-1"></a><span class="co">#Look at the factor</span></span>
<span id="cb144-10"><a href="#cb144-10" tabindex="-1"></a><span class="co">#You will notice that even though d is present in an earlier element</span></span>
<span id="cb144-11"><a href="#cb144-11" tabindex="-1"></a><span class="co">#c is the 3rd level whilst d is the 4th level</span></span>
<span id="cb144-12"><a href="#cb144-12" tabindex="-1"></a><span class="co">#This is because levels are ordered alphabetically</span></span>
<span id="cb144-13"><a href="#cb144-13" tabindex="-1"></a>factor_vec</span>
<span id="cb144-14"><a href="#cb144-14" tabindex="-1"></a><span class="co">#Convert to string</span></span>
<span id="cb144-15"><a href="#cb144-15" tabindex="-1"></a><span class="fu">as.character</span>(factor_vec)</span>
<span id="cb144-16"><a href="#cb144-16" tabindex="-1"></a><span class="co">#Convert to numeric</span></span>
<span id="cb144-17"><a href="#cb144-17" tabindex="-1"></a><span class="fu">as.numeric</span>(factor_vec)</span></code></pre></div>
<p>We will get back to plotting soon but first I want to show you how to specify the order of <strong>levels</strong>. This is important as a lot of the time alphabetically is not wanted. One example is with months.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" tabindex="-1"></a><span class="co">#Create a factor vector of months</span></span>
<span id="cb145-2"><a href="#cb145-2" tabindex="-1"></a><span class="co">#We&#39;ll only include the 1st 3 months for brevity</span></span>
<span id="cb145-3"><a href="#cb145-3" tabindex="-1"></a>months_factor_vec <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;jan&quot;</span>,<span class="st">&quot;jan&quot;</span>,<span class="st">&quot;feb&quot;</span>,<span class="st">&quot;jan&quot;</span>,<span class="st">&quot;feb&quot;</span>,</span>
<span id="cb145-4"><a href="#cb145-4" tabindex="-1"></a>                     <span class="st">&quot;feb&quot;</span>,<span class="st">&quot;mar&quot;</span>,<span class="st">&quot;jan&quot;</span>,<span class="st">&quot;feb&quot;</span>,<span class="st">&quot;mar&quot;</span>))</span>
<span id="cb145-5"><a href="#cb145-5" tabindex="-1"></a><span class="co">#Check the vector and you will notice feb is before jan in the levels</span></span>
<span id="cb145-6"><a href="#cb145-6" tabindex="-1"></a>months_factor_vec</span>
<span id="cb145-7"><a href="#cb145-7" tabindex="-1"></a><span class="fu">levels</span>(months_factor_vec)</span>
<span id="cb145-8"><a href="#cb145-8" tabindex="-1"></a><span class="co">#Before reordering our factor we will create a vector string</span></span>
<span id="cb145-9"><a href="#cb145-9" tabindex="-1"></a><span class="co">#This will contain our levels in the order we want</span></span>
<span id="cb145-10"><a href="#cb145-10" tabindex="-1"></a><span class="co">#They must contain the same spelling as the existing levels</span></span>
<span id="cb145-11"><a href="#cb145-11" tabindex="-1"></a>months_order_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;jan&quot;</span>,<span class="st">&quot;feb&quot;</span>,<span class="st">&quot;mar&quot;</span>)</span>
<span id="cb145-12"><a href="#cb145-12" tabindex="-1"></a><span class="co">#We use the factor function on our factor</span></span>
<span id="cb145-13"><a href="#cb145-13" tabindex="-1"></a><span class="co">#But we include the option levels providing the ordered character vector</span></span>
<span id="cb145-14"><a href="#cb145-14" tabindex="-1"></a>months_factor_vec <span class="ot">&lt;-</span><span class="fu">factor</span>(months_factor_vec, </span>
<span id="cb145-15"><a href="#cb145-15" tabindex="-1"></a>                           <span class="at">levels =</span> months_order_vec)</span>
<span id="cb145-16"><a href="#cb145-16" tabindex="-1"></a><span class="co">#Check the factor now</span></span>
<span id="cb145-17"><a href="#cb145-17" tabindex="-1"></a>months_factor_vec</span>
<span id="cb145-18"><a href="#cb145-18" tabindex="-1"></a><span class="fu">levels</span>(months_factor_vec)</span></code></pre></div>
<p>Now let us make a nice scatter plot of the animal data with points coloured by Biom and shaped (<code>pch =</code>) by Group.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" tabindex="-1"></a><span class="co">#Plot</span></span>
<span id="cb146-2"><a href="#cb146-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average mass (tonnes)</span><span class="st">`</span>,</span>
<span id="cb146-3"><a href="#cb146-3" tabindex="-1"></a>     <span class="at">y =</span> animal_df<span class="sc">$</span><span class="st">`</span><span class="at">Average total length (m)</span><span class="st">`</span>, </span>
<span id="cb146-4"><a href="#cb146-4" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">as.numeric</span>(animal_df<span class="sc">$</span>Biom),</span>
<span id="cb146-5"><a href="#cb146-5" tabindex="-1"></a>     <span class="at">pch =</span> <span class="fu">as.numeric</span>(animal_df<span class="sc">$</span>Group),</span>
<span id="cb146-6"><a href="#cb146-6" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Average mass in tonnes&quot;</span>,</span>
<span id="cb146-7"><a href="#cb146-7" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Average total length in metres&quot;</span>,</span>
<span id="cb146-8"><a href="#cb146-8" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;The mass and length of the largest animals&quot;</span></span>
<span id="cb146-9"><a href="#cb146-9" tabindex="-1"></a>     )</span>
<span id="cb146-10"><a href="#cb146-10" tabindex="-1"></a><span class="co">#Legend for biom colours</span></span>
<span id="cb146-11"><a href="#cb146-11" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottomright&quot;</span>, <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(animal_df<span class="sc">$</span>Biom), </span>
<span id="cb146-12"><a href="#cb146-12" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(animal_df<span class="sc">$</span>Biom), <span class="at">pch =</span> <span class="dv">1</span>)</span>
<span id="cb146-13"><a href="#cb146-13" tabindex="-1"></a><span class="co">#Legend for group shapes</span></span>
<span id="cb146-14"><a href="#cb146-14" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottom&quot;</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb146-15"><a href="#cb146-15" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(animal_df<span class="sc">$</span>Group), </span>
<span id="cb146-16"><a href="#cb146-16" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(animal_df<span class="sc">$</span>Group))</span></code></pre></div>
<p>Quite a complicated plot but now we can see:</p>
<ul>
<li>Mammals are larger than Reptiles</li>
<li>Semiaquatic reptiles are larger than Aquatic and Terrestrial reptiles</li>
</ul>
<p>Why do you think the above 2 points are true? Check out what specific animals are in the <strong>data frame</strong> animal_df to confirm your thoughts or help to figure it out.</p>
<p>Hopefully that has helped you figure out what a <strong>factor</strong> is. If not give it a break and let us do some more plots. Hopefully it will click a bit more over time.</p>
<p>If not some more tutorials are:
<a href="https://swcarpentry.github.io/r-novice-inflammation/12-supp-factors/index.html" class="uri">https://swcarpentry.github.io/r-novice-inflammation/12-supp-factors/index.html</a>
<a href="https://www.tutorialspoint.com/r/r_factors.htm" class="uri">https://www.tutorialspoint.com/r/r_factors.htm</a></p>
<p>Working with factors resource: <a href="https://departmentfortransport.github.io/R-cookbook/factors.html" class="uri">https://departmentfortransport.github.io/R-cookbook/factors.html</a></p>
</div>
<div id="box-plot" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Box plot</h2>
<p><img src="figures/boxplot.png" width="20%" style="display: block; margin: auto;" /></p>
<p>Next we are going to make a box plot with some Penguin data from:
<a href="https://allisonhorst.github.io/palmerpenguins/" class="uri">https://allisonhorst.github.io/palmerpenguins/</a></p>
<p>This data contains information on individual penguins that were gathered from Palmer Station LTER.</p>
<p>First download the <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/penguin.tsv">penguin.tsv</a> file into your “Chapter_13-16” directory.</p>
<p>As you expect the next step is to <strong>read</strong> in the file. This time the file is a tsv (tab separated file) with no row names. We will ensure that columns containing strings are converted to <strong>factors</strong>.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" tabindex="-1"></a>penguin_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;penguin.tsv&quot;</span>, </span>
<span id="cb147-2"><a href="#cb147-2" tabindex="-1"></a>                      <span class="at">check.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb147-3"><a href="#cb147-3" tabindex="-1"></a>                      <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>,</span>
<span id="cb147-4"><a href="#cb147-4" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span></span>
<span id="cb147-5"><a href="#cb147-5" tabindex="-1"></a>                      )</span></code></pre></div>
<p>Each row is a measurement of a penguin. The columns for this <strong>data frame</strong> are:</p>
<ul>
<li>species: Species of Penguin</li>
<li>island: Island the Penguin was found on</li>
<li>bill_length_mm: The bill length of the Penguin in millimetres</li>
<li>bill_depth_mm: The bill depth of the Penguin in millimetres</li>
<li>flipper_length_mm: The flipper length of the Penguin in millimetres</li>
<li>body_mass_g: Weight of Penguin in grams</li>
<li>sex: female or male</li>
<li>year: Year the measurement was carried out in</li>
</ul>
<p>With all that information we’ll make a nice boxplot to show the body mass against the species.</p>
<p>The <strong>function</strong> <code>boxplot()</code> can be used with this. This <strong>function</strong> is different than the others where the first option is <code>yaxis_column_name~xaxis_column_name</code>. This is followed by the option <code>data =</code> where you provide the <strong>data frame</strong>.</p>
<p>Below is the command for this:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>species, <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>What if we want to split the 3 box plots into sex?</p>
<p>We can do that like below:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>species<span class="sc">*</span>sex, <span class="at">data =</span> penguin_df,</span>
<span id="cb149-2"><a href="#cb149-2" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;green&quot;</span>))</span></code></pre></div>
<p>I will show you some more examples followed by a final nice plot.</p>
<p>x axis = island, y axis = flipper length</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" tabindex="-1"></a><span class="fu">boxplot</span>(flipper_length_mm<span class="sc">~</span>island, <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>x axis = island, y axis = bill depth</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" tabindex="-1"></a><span class="fu">boxplot</span>(bill_depth_mm<span class="sc">~</span>island, <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>x axis = bill length, y axis = species and sex</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" tabindex="-1"></a><span class="fu">boxplot</span>(bill_length_mm<span class="sc">~</span>species<span class="sc">*</span>sex, <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>What happens if we try to plot a <strong>factor</strong> on the y axis?</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" tabindex="-1"></a><span class="fu">boxplot</span>(island<span class="sc">~</span>species<span class="sc">*</span>sex, <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>It does not work as an object with <strong>class</strong> <strong>factor</strong> can not be added to the x axis <strong>object</strong>.</p>
<p>What about a numeric to the x axis?</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" tabindex="-1"></a><span class="fu">boxplot</span>(flipper_length_mm<span class="sc">~</span>year, <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>That works and looks good because it is a discrete set of numbers. In fact you can have a <strong>factor</strong> where the <strong>levels</strong> are numerics. If you do this make sure it is a discrete set of numbers.</p>
<p>What if we use a continuous set of numbers?</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>bill_length_mm , <span class="at">data =</span> penguin_df)</span></code></pre></div>
<p>This does work! However, a scatter plot would most likely be a lot more suited to plotting this data.</p>
<p>We will now make one final plot for this section. I will not explain what the code is doing. Instead read and run the code to figure it out.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>species<span class="sc">*</span>year , </span>
<span id="cb156-2"><a href="#cb156-2" tabindex="-1"></a>        <span class="at">data =</span> penguin_df, </span>
<span id="cb156-3"><a href="#cb156-3" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>,<span class="st">&quot;grey&quot;</span>,<span class="st">&quot;orange&quot;</span>),</span>
<span id="cb156-4"><a href="#cb156-4" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Mass of different Penguin species for 2007 - 2009&quot;</span>,</span>
<span id="cb156-5"><a href="#cb156-5" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Species and year&quot;</span>,</span>
<span id="cb156-6"><a href="#cb156-6" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Body mass in grams&quot;</span>)</span></code></pre></div>
</div>
<div id="saving-a-plot-to-a-file" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Saving a plot to a file</h2>
<p><img src="figures/r_save.png" width="20%" style="display: block; margin: auto;" />
To save a plot to a file you can use the <strong>functions</strong> <code>png()</code> and <code>dev.off()</code>.</p>
<p>The <strong>function</strong> <code>png()</code> goes before all the plotting commands. It has various options but the ones we will use are:</p>
<ul>
<li><code>filename =</code>: Provide this with a string that will be the filename of the resulting file.</li>
<li><code>units =</code>: The units the width and height will be in. the default is “px” for pixels but I like to go for “mm” for millimetres.</li>
<li><code>width =</code>: The width of the plot in the file.</li>
<li><code>height =</code>: The height of the plot in the file.</li>
<li><code>res =</code>: Resolution of the plot. Usually a number between 50 and 300 with 300 being better quality. This number refers to dpi (dots per inch).</li>
</ul>
<p>After the <code>png()</code> and plotting <strong>functions</strong> you use the <strong>function</strong> <code>dev.off()</code>. This lets R know you are finished plotting and so the file from <code>png()</code> will be created.</p>
<p>You can then look at the plot. If it is not how you would like you can edit the script and rerun from <code>png()</code> to <code>dev.off()</code>. Through trial and error you can make the plot look how you like.</p>
<p>Let us save the last plot as a png file:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;penguin_species_and_year_against_mass.png&quot;</span>,</span>
<span id="cb157-2"><a href="#cb157-2" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>, <span class="at">width =</span> <span class="dv">50</span>, <span class="at">height =</span> <span class="dv">50</span>, <span class="at">res =</span> <span class="dv">150</span>)</span>
<span id="cb157-3"><a href="#cb157-3" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>species<span class="sc">*</span>year , </span>
<span id="cb157-4"><a href="#cb157-4" tabindex="-1"></a>        <span class="at">data =</span> penguin_df, </span>
<span id="cb157-5"><a href="#cb157-5" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>,<span class="st">&quot;grey&quot;</span>,<span class="st">&quot;orange&quot;</span>),</span>
<span id="cb157-6"><a href="#cb157-6" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Mass of different Penguin species for 2007 - 2009&quot;</span>,</span>
<span id="cb157-7"><a href="#cb157-7" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Species and year&quot;</span>,</span>
<span id="cb157-8"><a href="#cb157-8" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Body mass in grams&quot;</span>)</span>
<span id="cb157-9"><a href="#cb157-9" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>Looking at the plot we made the width and height way too small. Therefore let us edit the width and height and then run it again.</p>
<p><strong>Note</strong>: You will need to close and open the file after running the command to see the new plot.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;penguin_species_and_year_against_mass.png&quot;</span>,</span>
<span id="cb158-2"><a href="#cb158-2" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>, <span class="at">width =</span> <span class="dv">250</span>, <span class="at">height =</span> <span class="dv">250</span>, <span class="at">res =</span> <span class="dv">150</span>)</span>
<span id="cb158-3"><a href="#cb158-3" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>species<span class="sc">*</span>year , </span>
<span id="cb158-4"><a href="#cb158-4" tabindex="-1"></a>        <span class="at">data =</span> penguin_df, </span>
<span id="cb158-5"><a href="#cb158-5" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>,<span class="st">&quot;grey&quot;</span>,<span class="st">&quot;orange&quot;</span>),</span>
<span id="cb158-6"><a href="#cb158-6" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Mass of different Penguin species for 2007 - 2009&quot;</span>,</span>
<span id="cb158-7"><a href="#cb158-7" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Species and year&quot;</span>,</span>
<span id="cb158-8"><a href="#cb158-8" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Body mass in grams&quot;</span>)</span>
<span id="cb158-9"><a href="#cb158-9" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>That overall is much better. But we cannot see all the labels on the x axis. Therefore let us make it wider.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;penguin_species_and_year_against_mass.png&quot;</span>,</span>
<span id="cb159-2"><a href="#cb159-2" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>, <span class="at">width =</span> <span class="dv">400</span>, <span class="at">height =</span> <span class="dv">250</span>, <span class="at">res =</span> <span class="dv">150</span>)</span>
<span id="cb159-3"><a href="#cb159-3" tabindex="-1"></a><span class="fu">boxplot</span>(body_mass_g<span class="sc">~</span>species<span class="sc">*</span>year , </span>
<span id="cb159-4"><a href="#cb159-4" tabindex="-1"></a>        <span class="at">data =</span> penguin_df, </span>
<span id="cb159-5"><a href="#cb159-5" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>,<span class="st">&quot;grey&quot;</span>,<span class="st">&quot;orange&quot;</span>),</span>
<span id="cb159-6"><a href="#cb159-6" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Mass of different Penguin species for 2007 - 2009&quot;</span>,</span>
<span id="cb159-7"><a href="#cb159-7" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Species and year&quot;</span>,</span>
<span id="cb159-8"><a href="#cb159-8" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Body mass in grams&quot;</span>)</span>
<span id="cb159-9"><a href="#cb159-9" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>Super! You can save plots in other file formats and there are more options. Check them out with <code>?png</code>.</p>
<p>I hope you are ready to make more plots with the Penguin data because it is time for some exercises.</p>

</div>
</div>
<div id="plots-exercises" class="section level1" number="15">
<h1><span class="header-section-number">Chapter 15</span> Plots exercises</h1>
<p><img src="figures/penguin.png" width="20%" style="display: block; margin: auto;" />
These exercises will primarily use the “penguin_df” from the theory and practice session.</p>
<p>Please use your “Exercises.R” script for this exercise and the main workshop directory as the working directory. Ensure you are using annotations and code sections to keep the contents clear and separated.</p>
<p>For convenience the code to load the Penguin <strong>data frame</strong> directory will be:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" tabindex="-1"></a>penguin_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_13-16/penguin.tsv&quot;</span>, </span>
<span id="cb160-2"><a href="#cb160-2" tabindex="-1"></a>                      <span class="at">check.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb160-3"><a href="#cb160-3" tabindex="-1"></a>                      <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>,</span>
<span id="cb160-4"><a href="#cb160-4" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span></span>
<span id="cb160-5"><a href="#cb160-5" tabindex="-1"></a>                      )</span></code></pre></div>
<p>Your plots might not look exactly the same. As long as your plot contains the same data it is good. If you ar enot sure if your plot is correct, feel fre to look at the solutions to look at my code.</p>
<div id="line-graph" class="section level2" number="15.1">
<h2><span class="header-section-number">15.1</span> Line graph</h2>
<p>First we will ignore “penguin_df”.</p>
<p>Create the below plot. You will need to create the <strong>vectors</strong> yourself.
<img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-302-1.png" width="672" /></p>
<p><strong>Tip</strong>: The x and y labels may help you figure out the commands to create the <strong>vectors</strong>.</p>
</div>
<div id="histogram-1" class="section level2" number="15.2">
<h2><span class="header-section-number">15.2</span> Histogram</h2>
<p>From the “penguin_df” create the below plot:</p>
<p><strong>Note</strong>: The colour of the bars are “blue”.
<img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-303-1.png" width="672" /></p>
</div>
<div id="scatterplot" class="section level2" number="15.3">
<h2><span class="header-section-number">15.3</span> Scatterplot</h2>
<p>From the “penguin_df” create the below plot:</p>
<p><strong>Note</strong>: You can check what numbers refer to what shape for <code>pch =</code> at: <a href="http://www.sthda.com/english/wiki/r-plot-pch-symbols-the-different-point-shapes-available-in-r" class="uri">http://www.sthda.com/english/wiki/r-plot-pch-symbols-the-different-point-shapes-available-in-r</a>
<img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-304-1.png" width="672" /></p>
<p>Before you continue save this plot. Details below:</p>
<ul>
<li>Save the file as a png called “Penguins_2009_bill_depth_vs_length_scatterplot.png”</li>
<li>Save the plot with a width and height of 250 and resolution of 150</li>
</ul>
</div>
<div id="boxplot" class="section level2" number="15.4">
<h2><span class="header-section-number">15.4</span> Boxplot</h2>
<p>From the “penguin_df” create the below plot:</p>
<p><strong>Note</strong>: Make sure the x axis is in the same order as below.
<img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-305-1.png" width="1152" /></p>
<p>For the last task, save this plot. Details below:</p>
<ul>
<li>Save the file as a jpg called “Penguins_species_and_flipper_length_boxplot.jpg” in “Chapter_13-16”.</li>
<li>Save the plot with a width of 300, height of 250, and resolution of 150</li>
</ul>

</div>
</div>
<div id="plots-solutions" class="section level1" number="16">
<h1><span class="header-section-number">Chapter 16</span> Plots solutions</h1>
<p><img src="figures/penguin_solutions.png" width="20%" style="display: block; margin: auto;" /></p>
<div id="line-graph-solution" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Line graph solution</h2>
<p>Below is the code and the plot:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" tabindex="-1"></a><span class="co">#Produce the plot with vectors created inside the function</span></span>
<span id="cb161-2"><a href="#cb161-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span>), </span>
<span id="cb161-3"><a href="#cb161-3" tabindex="-1"></a>     <span class="at">y =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fl">0.5</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="fl">0.5</span>),</span>
<span id="cb161-4"><a href="#cb161-4" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb161-5"><a href="#cb161-5" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&#39;A line graph with &quot;red&quot; as the colour&#39;</span>,</span>
<span id="cb161-6"><a href="#cb161-6" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-308-1.png" width="672" /></p>
</div>
<div id="histogram-solution" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> Histogram solution</h2>
<p>Below is the code and the plot:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" tabindex="-1"></a><span class="co">#Create data frame with only the Penguins from Torgersen</span></span>
<span id="cb162-2"><a href="#cb162-2" tabindex="-1"></a>penguins_torgensen_df <span class="ot">&lt;-</span> penguin_df[penguin_df<span class="sc">$</span>island <span class="sc">==</span> <span class="st">&quot;Torgersen&quot;</span>,]</span>
<span id="cb162-3"><a href="#cb162-3" tabindex="-1"></a><span class="co">#Create a column with body mass in kilograms</span></span>
<span id="cb162-4"><a href="#cb162-4" tabindex="-1"></a>penguins_torgensen_df<span class="sc">$</span>body_mass_kg <span class="ot">&lt;-</span> </span>
<span id="cb162-5"><a href="#cb162-5" tabindex="-1"></a>  penguins_torgensen_df<span class="sc">$</span>body_mass_g <span class="sc">/</span> <span class="dv">1000</span></span>
<span id="cb162-6"><a href="#cb162-6" tabindex="-1"></a><span class="co">#Plot the histogram</span></span>
<span id="cb162-7"><a href="#cb162-7" tabindex="-1"></a><span class="fu">hist</span>(penguins_torgensen_df<span class="sc">$</span>body_mass_kg,</span>
<span id="cb162-8"><a href="#cb162-8" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Histogram of the body mass of Penguins from Torgersen Island&quot;</span>,</span>
<span id="cb162-9"><a href="#cb162-9" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Body mass in kilograms&quot;</span>,</span>
<span id="cb162-10"><a href="#cb162-10" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;frequency&quot;</span>,</span>
<span id="cb162-11"><a href="#cb162-11" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-309-1.png" width="672" /></p>
</div>
<div id="scatterplot-solution" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Scatterplot solution</h2>
<p>Below is the code and the plot:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" tabindex="-1"></a><span class="co">#Create data frame with only the Penguins from 2009</span></span>
<span id="cb163-2"><a href="#cb163-2" tabindex="-1"></a>penguin_2009_df <span class="ot">&lt;-</span> penguin_df[penguin_df<span class="sc">$</span>year <span class="sc">==</span> <span class="st">&quot;2009&quot;</span>,]</span>
<span id="cb163-3"><a href="#cb163-3" tabindex="-1"></a><span class="co">#Produce plot</span></span>
<span id="cb163-4"><a href="#cb163-4" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> penguin_2009_df<span class="sc">$</span>bill_length_mm,</span>
<span id="cb163-5"><a href="#cb163-5" tabindex="-1"></a>     <span class="at">y =</span> penguin_2009_df<span class="sc">$</span>bill_depth_mm,</span>
<span id="cb163-6"><a href="#cb163-6" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">as.numeric</span>(penguin_2009_df<span class="sc">$</span>species),</span>
<span id="cb163-7"><a href="#cb163-7" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Penguin bills vs depth in 2009&quot;</span>,</span>
<span id="cb163-8"><a href="#cb163-8" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Bill length (mm)&quot;</span>,</span>
<span id="cb163-9"><a href="#cb163-9" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Bill depth (mm)&quot;</span>,</span>
<span id="cb163-10"><a href="#cb163-10" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">15</span>)</span>
<span id="cb163-11"><a href="#cb163-11" tabindex="-1"></a><span class="co">#Create legend</span></span>
<span id="cb163-12"><a href="#cb163-12" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottomleft&quot;</span>, </span>
<span id="cb163-13"><a href="#cb163-13" tabindex="-1"></a>       <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(penguin_2009_df<span class="sc">$</span>species),</span>
<span id="cb163-14"><a href="#cb163-14" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(penguin_2009_df<span class="sc">$</span>species),</span>
<span id="cb163-15"><a href="#cb163-15" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">15</span>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-310-1.png" width="672" /></p>
<p>To save the plot the code is:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" tabindex="-1"></a><span class="co">#Create data frame with only the Penguins from 2009</span></span>
<span id="cb164-2"><a href="#cb164-2" tabindex="-1"></a>penguin_2009_df <span class="ot">&lt;-</span> penguin_df[penguin_df<span class="sc">$</span>year <span class="sc">==</span> <span class="st">&quot;2009&quot;</span>,]</span>
<span id="cb164-3"><a href="#cb164-3" tabindex="-1"></a><span class="co">#Start png function</span></span>
<span id="cb164-4"><a href="#cb164-4" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;Chapter_13-16/Penguins_2009_bill_depth_vs_length_scatterplot.png&quot;</span>,</span>
<span id="cb164-5"><a href="#cb164-5" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>, <span class="at">height =</span> <span class="dv">250</span>, <span class="at">width =</span> <span class="dv">250</span>, <span class="at">res =</span> <span class="dv">150</span> )</span>
<span id="cb164-6"><a href="#cb164-6" tabindex="-1"></a><span class="co">#Produce plot</span></span>
<span id="cb164-7"><a href="#cb164-7" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> penguin_2009_df<span class="sc">$</span>bill_length_mm,</span>
<span id="cb164-8"><a href="#cb164-8" tabindex="-1"></a>     <span class="at">y =</span> penguin_2009_df<span class="sc">$</span>bill_depth_mm,</span>
<span id="cb164-9"><a href="#cb164-9" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">as.numeric</span>(penguin_2009_df<span class="sc">$</span>species),</span>
<span id="cb164-10"><a href="#cb164-10" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Penguin bills vs depth in 2009&quot;</span>,</span>
<span id="cb164-11"><a href="#cb164-11" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Bill length (mm)&quot;</span>,</span>
<span id="cb164-12"><a href="#cb164-12" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Bill depth (mm)&quot;</span>,</span>
<span id="cb164-13"><a href="#cb164-13" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">15</span>)</span>
<span id="cb164-14"><a href="#cb164-14" tabindex="-1"></a><span class="co">#Create legend</span></span>
<span id="cb164-15"><a href="#cb164-15" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottomleft&quot;</span>, </span>
<span id="cb164-16"><a href="#cb164-16" tabindex="-1"></a>       <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(penguin_2009_df<span class="sc">$</span>species),</span>
<span id="cb164-17"><a href="#cb164-17" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(penguin_2009_df<span class="sc">$</span>species),</span>
<span id="cb164-18"><a href="#cb164-18" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">15</span>)</span>
<span id="cb164-19"><a href="#cb164-19" tabindex="-1"></a><span class="co">#Save file</span></span>
<span id="cb164-20"><a href="#cb164-20" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="boxplot-solutions" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Boxplot solutions</h2>
<p>Below is the code and the plot:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" tabindex="-1"></a><span class="co">#Produce boxplot</span></span>
<span id="cb165-2"><a href="#cb165-2" tabindex="-1"></a><span class="fu">boxplot</span>(flipper_length_mm<span class="sc">~</span>sex<span class="sc">*</span>species,</span>
<span id="cb165-3"><a href="#cb165-3" tabindex="-1"></a>        <span class="at">data =</span> penguin_df,</span>
<span id="cb165-4"><a href="#cb165-4" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;green&quot;</span>),</span>
<span id="cb165-5"><a href="#cb165-5" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Flipper length of different species&quot;</span>,</span>
<span id="cb165-6"><a href="#cb165-6" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Species and sex of Penguin&quot;</span>,</span>
<span id="cb165-7"><a href="#cb165-7" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Flipper length (mm)&quot;</span></span>
<span id="cb165-8"><a href="#cb165-8" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-312-1.png" width="1152" /></p>
<p>To save the plot the code is:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" tabindex="-1"></a><span class="co">#Start png function</span></span>
<span id="cb166-2"><a href="#cb166-2" tabindex="-1"></a><span class="fu">jpeg</span>(<span class="at">filename =</span> <span class="st">&quot;Chapter_13-16/Penguins_species_and_flipper_length_boxplot.jpg&quot;</span>,</span>
<span id="cb166-3"><a href="#cb166-3" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>, <span class="at">height =</span> <span class="dv">250</span>, <span class="at">width =</span> <span class="dv">300</span>, <span class="at">res =</span> <span class="dv">150</span> )</span>
<span id="cb166-4"><a href="#cb166-4" tabindex="-1"></a><span class="co">#Produce boxplot</span></span>
<span id="cb166-5"><a href="#cb166-5" tabindex="-1"></a><span class="fu">boxplot</span>(flipper_length_mm<span class="sc">~</span>sex<span class="sc">*</span>species,</span>
<span id="cb166-6"><a href="#cb166-6" tabindex="-1"></a>        <span class="at">data =</span> penguin_df,</span>
<span id="cb166-7"><a href="#cb166-7" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;green&quot;</span>),</span>
<span id="cb166-8"><a href="#cb166-8" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Flipper length of different species&quot;</span>,</span>
<span id="cb166-9"><a href="#cb166-9" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Species and sex of Penguin&quot;</span>,</span>
<span id="cb166-10"><a href="#cb166-10" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Flipper length (mm)&quot;</span></span>
<span id="cb166-11"><a href="#cb166-11" tabindex="-1"></a>)</span>
<span id="cb166-12"><a href="#cb166-12" tabindex="-1"></a><span class="co">#Save file</span></span>
<span id="cb166-13"><a href="#cb166-13" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>

</div>
</div>



<div id="basicstats" class="section level1" number="17">
<h1><span class="header-section-number">Chapter 17</span> Basic stats</h1>
<p><img src="figures/basic_stats.png" width="20%" style="display: block; margin: auto;" /></p>
<p>This week we’ll learn how to carry out some basic stats. This will involve linear regressions and some t-tests.</p>
<p>Create and use the directory “Chapter_17-18” as the working directory for this chapter. Additionally create a new script called “Stats.R” for this chapter.</p>
<p>Before we continue just a reminder about <a href="#annotations">annotations</a> and <a href="#codesections">code sections</a>.</p>
<div id="linear-regression" class="section level2" number="17.1">
<h2><span class="header-section-number">17.1</span> Linear regression</h2>
<p><img src="figures/linear_regression.png" width="20%" style="display: block; margin: auto;" />
Linear regression is a method to model the relationship between two <strong>numeric vectors</strong>. Ultimately we want to produce the predictive equation:</p>
<p><span class="math display">\[
y = mx + c
\]</span></p>
<p>Where <em>m</em> is equal to the gradient and <em>c</em> is equal to the intercept. With this we can predict the value of <em>y</em> if we know the value of <em>x</em> and vice versa.</p>
<div id="fish-market-dataset" class="section level3" number="17.1.1">
<h3><span class="header-section-number">17.1.1</span> Fish market dataset</h3>
<p><img src="figures/bream.png" width="30%" style="display: block; margin: auto;" />
Before getting to the analysis we need to read in the data. For this chapter we will be looking at the file <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Fish.csv">Fish.csv</a> which contains information of 7 common fish species sold in Fish markets (Source: <a href="https://www.kaggle.com/aungpyaeap/fish-market" class="uri">https://www.kaggle.com/aungpyaeap/fish-market</a>).</p>
<p>The columns for the data are:</p>
<ul>
<li><strong>Species</strong>: Species of fish (“Bream”, “Roach”, “Whitefish”,
“Parkki”, “Perch”, “Pike”, and “Smelt”).</li>
<li><strong>Weight</strong>: Weight of the fish in grams.</li>
<li><strong>Length1</strong>: Vertical length of the fish in centimetres.</li>
<li><strong>Length2</strong>: Diagonal length of the fish in centimetres.</li>
<li><strong>Length3</strong>: Cross length of the fish in centimetres.</li>
<li><strong>Height</strong>: Height of the fish in centimetres.</li>
<li><strong>Width</strong>: Diagonal width of the fish in centimetres.</li>
</ul>
<p>The dataset is primarily interested in predicting the weight of a fish based on its length, height, or width.</p>
<p>First step is to <strong>read</strong> in the data:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" tabindex="-1"></a>fish_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Fish.csv&quot;</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Have a look at the <strong>data frame</strong> and you’ll see it looks pretty good with no <code>NA</code> values.</p>
<p>For now we only want to look at the information for the species Bream. Let’s create a “bream_df”:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" tabindex="-1"></a><span class="co">#Create the data frame</span></span>
<span id="cb168-2"><a href="#cb168-2" tabindex="-1"></a>bream_df <span class="ot">&lt;-</span> fish_df[fish_df<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;Bream&quot;</span>,]</span>
<span id="cb168-3"><a href="#cb168-3" tabindex="-1"></a><span class="co">#Check how many rows it has</span></span>
<span id="cb168-4"><a href="#cb168-4" tabindex="-1"></a><span class="fu">nrow</span>(bream_df)</span></code></pre></div>
<p>We are left with 35 data points which should be plenty for our linear regression.</p>
</div>
<div id="scatterplot-1" class="section level3" number="17.1.2">
<h3><span class="header-section-number">17.1.2</span> Scatterplot</h3>
<p><img src="figures/Scatterplot_2.png" width="20%" style="display: block; margin: auto;" />
Before we carry out the linear regression we’ll create a scatterplot of the two <strong>vectors</strong> we want to compare. For the first instance we will compare <strong>Height</strong> to <strong>Length1</strong> (vertical length).</p>
<p>In fact before we do, let’s change the column name “Length1” to “v_length” so it is a bit more intuitive for us. Whilst we are at it we’ll change the other length column names.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" tabindex="-1"></a><span class="fu">colnames</span>(bream_df)[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;v_length&quot;</span>, <span class="st">&quot;d_length&quot;</span>, <span class="st">&quot;c_length&quot;</span>)</span></code></pre></div>
<p>Time to quickly plot “v_length” (x) against “Weight” (y):</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> bream_df<span class="sc">$</span>v_length, <span class="at">y =</span> bream_df<span class="sc">$</span>Weight)</span></code></pre></div>
<p>Super! That looks like a decently linear plot with a positive trend. We will therefore fit the linear model.</p>
</div>
<div id="linear-model" class="section level3" number="17.1.3">
<h3><span class="header-section-number">17.1.3</span> Linear model</h3>
<p><img src="figures/lm.png" width="20%" style="display: block; margin: auto;" />
We can fit a linear model with the <strong>function</strong> <code>lm()</code>. We simply provide the column names as a formula ( <code>y_column_name ~ x_column_name</code> ) similar to the <code>boxplot()</code> <strong>function</strong>.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(Weight<span class="sc">~</span>v_length, <span class="at">data=</span>bream_df)</span></code></pre></div>
<p>We can now add the linear model as a line to our plot with the <strong>function</strong> <code>abline()</code></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" tabindex="-1"></a><span class="fu">abline</span>(fit)</span></code></pre></div>
<p>With the line added we also want to add the linear equation to the plot. To do this we need to check the contents of the “fit” <strong>variable</strong> first so we know what to add.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" tabindex="-1"></a>fit</span></code></pre></div>
<p>You’ll see the following two sections:</p>
<ul>
<li><code>Call:</code> Shows the <strong>function</strong> with options you ran to create “fit”</li>
<li><code>Coefficients:</code>: This contains 2 parts
<ul>
<li><code>(Intercept)</code>: This is the intercept value of the linear model (<em>c</em>)</li>
<li><code>v_length</code>: This is the gradient values (<em>m</em>)</li>
</ul></li>
</ul>
<p>Our next step is to create a <strong>string scalar</strong> containing the linear equation. To do this we can extract the coefficients from the “fit” <strong>object</strong> like below:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> fit<span class="sc">$</span>coefficients[<span class="dv">2</span>]</span>
<span id="cb174-2"><a href="#cb174-2" tabindex="-1"></a>c <span class="ot">&lt;-</span> fit<span class="sc">$</span>coefficients[<span class="dv">1</span>]</span></code></pre></div>
<p>If you print out “m” and “c” to the console you’ll notice they have a different number of decimal places than when displayed through printing “fit”. We will therefore change these to 2 decimal places with the <code>round()</code> <strong>function</strong>:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">round</span>(m, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb175-2"><a href="#cb175-2" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">round</span>(c, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Now to use the <code>paste0()</code> <strong>function</strong> to create our linear equation as a <strong>string scalar</strong>:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" tabindex="-1"></a>linear_equation <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;y = &quot;</span>, m , <span class="st">&quot;x + &quot;</span>, c)</span></code></pre></div>
<p>Finally we will recreate our plot, add the abline, and then add the linear equation. We will add the linear equation with the <strong>function</strong> <code>text()</code>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> bream_df<span class="sc">$</span>v_length, <span class="at">y =</span> bream_df<span class="sc">$</span>Weight)</span>
<span id="cb177-2"><a href="#cb177-2" tabindex="-1"></a><span class="fu">abline</span>(fit)</span>
<span id="cb177-3"><a href="#cb177-3" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="dv">30</span>, <span class="at">y =</span> <span class="dv">800</span>, <span class="at">labels =</span> linear_equation)</span></code></pre></div>
<p>The <code>text()</code> options <code>x =</code> and <code>y =</code> normally require a bit of trial and error to set it in a nice location. This can be a bit fiddly but is made much easier by making the label smaller (e.g. making the numbers have a smaller amount of decimal places).</p>
</div>
</div>
<div id="t-test" class="section level2" number="17.2">
<h2><span class="header-section-number">17.2</span> t-test</h2>
<p><img src="figures/scale.png" width="20%" style="display: block; margin: auto;" />
A t-test can be used to determine if there is a significant difference between the means of two groups.</p>
<p>In this example we will compare the weights of the fish Bream, Parkki, and Roach. Therefore let’s subset our <strong>data frame</strong> so we have three <strong>data frames</strong>, one for each species.</p>
<p>We already have a “bream_df” so we only need to make one for Parkki and one for Roach. Before we do we’ll change the column names for “fish_df” like we did for “bream_df”</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" tabindex="-1"></a><span class="fu">colnames</span>(fish_df)[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;v_length&quot;</span>, <span class="st">&quot;d_length&quot;</span>, <span class="st">&quot;c_length&quot;</span>)</span>
<span id="cb178-2"><a href="#cb178-2" tabindex="-1"></a>parkki_df <span class="ot">&lt;-</span> fish_df[fish_df<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;Parkki&quot;</span>,]</span>
<span id="cb178-3"><a href="#cb178-3" tabindex="-1"></a>roach_df <span class="ot">&lt;-</span> fish_df[fish_df<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;Roach&quot;</span>,]</span></code></pre></div>
<div id="boxplot-1" class="section level3" number="17.2.1">
<h3><span class="header-section-number">17.2.1</span> Boxplot</h3>
<p><img src="figures/boxplot.png" width="20%" style="display: block; margin: auto;" />
Before carrying out a t-test it can be useful to visualise the difference between groups with a boxplot.</p>
<p>Before we do this we need to combine the three <strong>data frames</strong> into one. This can be done by binding the rows with <code>rbind()</code>. This will combine two provided <strong>data frames</strong> which contain the same number of columns with the same column names.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" tabindex="-1"></a><span class="co">#Combine bream_df and parkki_df</span></span>
<span id="cb179-2"><a href="#cb179-2" tabindex="-1"></a>fish_subset_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(bream_df, parkki_df)</span>
<span id="cb179-3"><a href="#cb179-3" tabindex="-1"></a><span class="co">#Now rbind roach_df to our new df</span></span>
<span id="cb179-4"><a href="#cb179-4" tabindex="-1"></a>fish_subset_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(fish_subset_df, roach_df)</span></code></pre></div>
<p>There is also <code>cbind</code> to combine <strong>data frames</strong> by columns. In this case the <strong>data frames</strong> need to have the same number of rows with the same order and names.</p>
<p>Time for a boxplot!</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" tabindex="-1"></a><span class="fu">boxplot</span>(Weight<span class="sc">~</span>Species, <span class="at">data =</span> fish_subset_df)</span></code></pre></div>
<p>We can clearly see that the weights of Parkki and Roach are very similar to each other but very different to Bream’s weight.</p>
</div>
<div id="t-test-comparison" class="section level3" number="17.2.2">
<h3><span class="header-section-number">17.2.2</span> t-test comparison</h3>
<p><img src="figures/five_percent.png" width="15%" style="display: block; margin: auto;" />
Let us see if what we see visually is also visible statistically.</p>
<p>We can carry out a t-test with the <strong>function</strong> <code>t.test()</code>. Simply provide the <strong>function</strong> with the two <strong>numerical vectors</strong> you would like to compare.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" tabindex="-1"></a>bream_parkki_ttest <span class="ot">&lt;-</span> <span class="fu">t.test</span>(bream_df<span class="sc">$</span>Weight, parkki_df<span class="sc">$</span>Weight)</span>
<span id="cb181-2"><a href="#cb181-2" tabindex="-1"></a>bream_roach_ttest <span class="ot">&lt;-</span> <span class="fu">t.test</span>(bream_df<span class="sc">$</span>Weight, roach_df<span class="sc">$</span>Weight)</span>
<span id="cb181-3"><a href="#cb181-3" tabindex="-1"></a>parkki_roach_ttest <span class="ot">&lt;-</span> <span class="fu">t.test</span>(parkki_df<span class="sc">$</span>Weight, roach_df<span class="sc">$</span>Weight)</span></code></pre></div>
<p>Print the resulting <strong>variables</strong> to the console and you will see a lot of information. I am sure all these values can say a lot about the data but we are only interested in the p-values.</p>
<p>In this case we can say the means between the two groups tested are significantly different if the p-value is less than 0.05 (1 in 20).</p>
<p>It can be a bit annoying to have to look through the <code>t.test()</code> output for each result so we’ll create a <strong>vector</strong> to contain the p-values for comparisons against Bream.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" tabindex="-1"></a>fish_species_weight_ttests <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb182-2"><a href="#cb182-2" tabindex="-1"></a>  bream_parkki_ttest<span class="sc">$</span>p.value,</span>
<span id="cb182-3"><a href="#cb182-3" tabindex="-1"></a>  bream_roach_ttest<span class="sc">$</span>p.value</span>
<span id="cb182-4"><a href="#cb182-4" tabindex="-1"></a>)</span></code></pre></div>
<p>This is pretty useful but we can’t immediately see which comparison each t-test is equal to. Thankfully just like <strong>data frames</strong> have row and column names, <strong>vectors</strong> can have names for each element.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" tabindex="-1"></a><span class="co">#Add the vector names</span></span>
<span id="cb183-2"><a href="#cb183-2" tabindex="-1"></a><span class="fu">names</span>(fish_species_weight_ttests) <span class="ot">&lt;-</span> </span>
<span id="cb183-3"><a href="#cb183-3" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;bream_vs_parkki&quot;</span>,<span class="st">&quot;bream_vs_roach&quot;</span>)</span>
<span id="cb183-4"><a href="#cb183-4" tabindex="-1"></a><span class="co">#Look at the vector with the added names</span></span>
<span id="cb183-5"><a href="#cb183-5" tabindex="-1"></a>fish_species_weight_ttests</span></code></pre></div>
<p>We can then index the <strong>vector</strong> through the names.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" tabindex="-1"></a><span class="co">#Access the p-value of Bream against Roach</span></span>
<span id="cb184-2"><a href="#cb184-2" tabindex="-1"></a>fish_species_weight_ttests[<span class="st">&quot;bream_vs_roach&quot;</span>]</span>
<span id="cb184-3"><a href="#cb184-3" tabindex="-1"></a><span class="co">#Add the p-value of Parkki against Roach</span></span>
<span id="cb184-4"><a href="#cb184-4" tabindex="-1"></a>fish_species_weight_ttests[<span class="st">&quot;parkki_vs_roach&quot;</span>] <span class="ot">&lt;-</span> </span>
<span id="cb184-5"><a href="#cb184-5" tabindex="-1"></a>  parkki_roach_ttest<span class="sc">$</span>p.value</span></code></pre></div>
<p>With our nice <strong>vector</strong> of p-values we can quickly see where the p-value is less than 0.05 (i.e. the means are significantly different) and where it is higher (i.e. the means aren’t significantly different).</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" tabindex="-1"></a>fish_species_weight_ttests <span class="sc">&lt;</span> <span class="fl">0.05</span></span></code></pre></div>
<p>Do these p-values match what you saw in the boxplot?</p>
</div>
</div>
<div id="some-more-useful-functions" class="section level2" number="17.3">
<h2><span class="header-section-number">17.3</span> Some more useful functions</h2>
<p><img src="figures/r_toolbox.png" width="15%" style="display: block; margin: auto;" /></p>
<div id="summary" class="section level3" number="17.3.1">
<h3><span class="header-section-number">17.3.1</span> Summary</h3>
<p>The <strong>function</strong> <code>summary()</code> can give you some quick summary information for each column of a <strong>data frame</strong>.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" tabindex="-1"></a><span class="fu">summary</span>(fish_df)</span></code></pre></div>
<p>This gives you some nice information for your numerical columns:</p>
<ul>
<li><code>Min.</code>: The minimum number</li>
<li><code>1st Qu.</code>: The 25th quartile</li>
<li><code>Median</code>: The median (Middle sorted number)</li>
<li><code>Mean</code>: The average</li>
<li><code>3rd Qu.</code>: The 75th quartile</li>
<li><code>Max.</code>: The maximum number</li>
</ul>
<p>You will notice the information given for the “Species” column is not very informative as it is a <strong>character</strong> column. However, this would be a lot more descriptive if it was a <strong>factor</strong>.</p>
<p>Therefore we’ll change the “Species” column to a <strong>factor</strong> and run <code>summary()</code> again.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" tabindex="-1"></a>fish_df<span class="sc">$</span>Species <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(fish_df<span class="sc">$</span>Species)</span>
<span id="cb187-2"><a href="#cb187-2" tabindex="-1"></a><span class="fu">summary</span>(fish_df)</span></code></pre></div>
<p>Now <code>summary()</code> shows how many instances of each species is present in the <strong>data frame</strong>.</p>
<p>For future cases it may better to use <code>stringsAsFactors = TRUE</code> with the <code>read.csv()</code> <strong>function</strong> when we first read in the file.</p>
</div>
<div id="table" class="section level3" number="17.3.2">
<h3><span class="header-section-number">17.3.2</span> Table</h3>
<p><img src="figures/table_ikea.png" width="20%" style="display: block; margin: auto;" />
The <code>table()</code> <strong>function</strong> will provide a <strong>vector</strong> containing the number of instances for each <strong>level</strong> in a <strong>factor</strong>. This is pretty much what <code>summary()</code> did to a <strong>factor</strong>.</p>
<p>However, unlike <code>summary()</code> it will also do this for <strong>characters</strong> and <strong>numerics</strong>.</p>
<p><strong>Note</strong>: Remember to use the <strong>“Help”</strong> pane if you are not sure what a <strong>function</strong> does.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" tabindex="-1"></a><span class="co">#Table command for columns from fish_df</span></span>
<span id="cb188-2"><a href="#cb188-2" tabindex="-1"></a><span class="fu">table</span>(fish_df<span class="sc">$</span>Species)</span>
<span id="cb188-3"><a href="#cb188-3" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">as.character</span>(fish_df<span class="sc">$</span>Species))</span>
<span id="cb188-4"><a href="#cb188-4" tabindex="-1"></a><span class="fu">table</span>(fish_df<span class="sc">$</span>Height)</span>
<span id="cb188-5"><a href="#cb188-5" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">floor</span>(fish_df<span class="sc">$</span>Height))</span>
<span id="cb188-6"><a href="#cb188-6" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">as.integer</span>(fish_df<span class="sc">$</span>Height))</span>
<span id="cb188-7"><a href="#cb188-7" tabindex="-1"></a><span class="co">#Run table on various numeric vectors</span></span>
<span id="cb188-8"><a href="#cb188-8" tabindex="-1"></a><span class="fu">table</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb188-9"><a href="#cb188-9" tabindex="-1"></a><span class="fu">table</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">*</span> <span class="dv">0</span>)</span>
<span id="cb188-10"><a href="#cb188-10" tabindex="-1"></a><span class="fu">table</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%%</span> <span class="dv">2</span>)</span>
<span id="cb188-11"><a href="#cb188-11" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">50</span>, <span class="at">by =</span> <span class="fl">0.5</span>) <span class="sc">%%</span> <span class="fl">7.5</span>)</span>
<span id="cb188-12"><a href="#cb188-12" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb188-13"><a href="#cb188-13" tabindex="-1"></a><span class="co">#Table will run on logicals too</span></span>
<span id="cb188-14"><a href="#cb188-14" tabindex="-1"></a><span class="fu">table</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb188-15"><a href="#cb188-15" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>) <span class="sc">==</span> <span class="st">&quot;a&quot;</span>)</span>
<span id="cb188-16"><a href="#cb188-16" tabindex="-1"></a><span class="co">#Create a vector of 20 random numbers between 0 and 10</span></span>
<span id="cb188-17"><a href="#cb188-17" tabindex="-1"></a>random_num_vec <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span> )</span>
<span id="cb188-18"><a href="#cb188-18" tabindex="-1"></a><span class="co">#table</span></span>
<span id="cb188-19"><a href="#cb188-19" tabindex="-1"></a><span class="fu">table</span>(random_num_vec)</span>
<span id="cb188-20"><a href="#cb188-20" tabindex="-1"></a><span class="co">#Create a character vector randomly containing 1-10 of the strings</span></span>
<span id="cb188-21"><a href="#cb188-21" tabindex="-1"></a><span class="co">#&quot;Book&quot;, &quot;TV&quot;, and &quot;Film&quot; each</span></span>
<span id="cb188-22"><a href="#cb188-22" tabindex="-1"></a>random_char_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb188-23"><a href="#cb188-23" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="st">&quot;Book&quot;</span>, <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">size =</span> <span class="dv">1</span>)),</span>
<span id="cb188-24"><a href="#cb188-24" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="st">&quot;TV&quot;</span>, <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">size =</span> <span class="dv">1</span>)),</span>
<span id="cb188-25"><a href="#cb188-25" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="st">&quot;Film&quot;</span>, <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">size =</span> <span class="dv">1</span>))</span>
<span id="cb188-26"><a href="#cb188-26" tabindex="-1"></a>)</span>
<span id="cb188-27"><a href="#cb188-27" tabindex="-1"></a><span class="co">#Now for table()</span></span>
<span id="cb188-28"><a href="#cb188-28" tabindex="-1"></a><span class="fu">table</span>(random_char_vec)</span>
<span id="cb188-29"><a href="#cb188-29" tabindex="-1"></a><span class="co">#Can create a quick bar plot with the output from table()</span></span>
<span id="cb188-30"><a href="#cb188-30" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(random_char_vec))</span></code></pre></div>
<p>A few more <strong>functions</strong> were introduced above. I will let you explore them yourself or you can ask me verbally.</p>
</div>
</div>
<div id="further-resources" class="section level2" number="17.4">
<h2><span class="header-section-number">17.4</span> Further resources</h2>
<p><img src="figures/resources.png" width="20%" style="display: block; margin: auto;" />
Below are some further resources you can check that will help if you want to do some other plots and figures.</p>
<p><strong>Quick-R</strong>: <a href="https://www.statmethods.net/index.html" class="uri">https://www.statmethods.net/index.html</a></p>
<p><strong>R Cookbook</strong>: <a href="https://rc2e.com/" class="uri">https://rc2e.com/</a></p>

</div>
</div>
<div id="stats-exercises" class="section level1" number="18">
<h1><span class="header-section-number">Chapter 18</span> Stats exercises</h1>
<p>Please use your “Exercises.R” script for this exercise and the main workshop directory as the working directory. Ensure you are using annotations and code sections to keep the contents clear and separated.</p>
<div id="world-happiness-report" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> World happiness report</h2>
<p><img src="figures/world_happiness.png" width="20%" style="display: block; margin: auto;" /></p>
<div id="data" class="section level3" number="18.1.1">
<h3><span class="header-section-number">18.1.1</span> Data</h3>
<p>For this exercise we will be looking at the World Happiness Report for 2016. This report is a survey of the state of global happiness.</p>
<p>Download <a href="https://neof-workshops.github.io/R_j4c0xh/downloads/world_happiness_report_2016.csv">world_happiness_report_2016.csv</a> to the directory “Chapter_17-18”.</p>
<p>Source: <a href="https://www.kaggle.com/unsdsn/world-happiness?select=2016.csv" class="uri">https://www.kaggle.com/unsdsn/world-happiness?select=2016.csv</a></p>
<p>The columns for the data are:</p>
<ul>
<li><strong>Country</strong>: Name of the country.</li>
<li><strong>Region</strong>: Region the country belongs to.</li>
<li><strong>Happiness Rank</strong>: Rank of the country based on the Happiness Score.</li>
<li><strong>Happiness Score</strong>: A metric measured in 2016 by asking the sampled people the question: “How would you rate your happiness on a scale of 0 to 10 where 10 is the happiest”.</li>
<li><strong>Lower Confidence Interval</strong>: Lower Confidence Interval of the Happiness Score.</li>
<li><strong>Upper Confidence Interval</strong>: Upper Confidence Interval of the Happiness Score.</li>
<li><strong>Economy (GDP per Capita)</strong>: The extent to which GDP contributes to the calculation of the Happiness Score.</li>
<li><strong>Family</strong>: The extent to which Family contributes to the calculation of the Happiness Score.</li>
<li><strong>Health (Life Expectancy)</strong>: The extent to which Life expectancy contributed to the calculation of the Happiness Score.</li>
<li><strong>Freedom</strong>: The extent to which Freedom contributed to the calculation of the Happiness Score.</li>
<li><strong>Trust (Government Corruption)</strong>: The extent to which Perception of Corruption contributes to Happiness Score.</li>
<li><strong>Generosity</strong>: The extent to which Generosity contributed to the calculation of the Happiness Score.</li>
<li><strong>Dystopia Residual</strong>: The extent to which Dystopia Residual contributed to the calculation of the Happiness Score. More info in the “What is Dystopia?” section at <a href="https://worldhappiness.report/faq/" class="uri">https://worldhappiness.report/faq/</a>.</li>
</ul>
</div>
<div id="tasks-questions" class="section level3" number="18.1.2">
<h3><span class="header-section-number">18.1.2</span> Tasks &amp; questions</h3>
<p>With that information carry out the following tasks and answer the questions:</p>
<ol style="list-style-type: decimal">
<li>Read in the file “world_happiness_report_2016” as <strong>data frame</strong> called “happy_df”. Ensure <strong>strings</strong> are read in as <strong>factors</strong> and that none of the columns are read in as row names.</li>
<li>Answer the following questions using the output from one <strong>function</strong>:
<ul>
<li>How many countries are in the region “Western Europe”?</li>
<li>What is the maximum number in the “Happiness Score” column?</li>
<li>From the columns “Economy (GDP per Capital)” to “Dystopia Residual”, which has the highest mean and which has the lowest?</li>
</ul></li>
<li>Create the below plot.
<ul>
<li>The equation does not have to be in exactly the same position as the below. Just make sure it is all clearly visible, it contains the same text, and it is not on top of any points.</li>
<li>The colour for the line is “mediumslateblue”</li>
<li>Note you can put “\n” into a label/title to make a new line.</li>
<li>e.g “This is the first line \n and this is the second line”
<img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-350-1.png" width="768" /></li>
</ul></li>
<li>It may be a bit awkward to get the right size for the plot in the <strong>“Plots”</strong> pane. Therefore save it as a png file with the following options:
<ul>
<li>File name of “Economy_vs_family.png”</li>
<li>Dimensions of file is 8 inches for height and width</li>
<li>Resolution of 200</li>
</ul></li>
<li>Answer the following questions using information on the line graph and the linear model.
<ul>
<li>Does the linear model have a positive or negative gradient?</li>
<li>Which variable (Economy or Family) has higher values?</li>
<li>If the value of Economy was 2.1 what would be the predictive value of Family according to the linear model equation?</li>
<li>Which region appears to have the highest values for Economy and for Family?</li>
</ul></li>
<li>Create the following boxplot.
<ul>
<li>You can change the the levels with the following code</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb189"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" tabindex="-1"></a>short_region_names <span class="ot">&lt;-</span> </span>
<span id="cb189-2"><a href="#cb189-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;OZ_n_NZ&quot;</span>, <span class="st">&quot;C_n_E_Europe&quot;</span>, <span class="st">&quot;E_Asia&quot;</span>, <span class="st">&quot;L_America_n_Caribbean&quot;</span>,</span>
<span id="cb189-3"><a href="#cb189-3" tabindex="-1"></a>    <span class="st">&quot;Middle_E_n_N_Africa&quot;</span>, <span class="st">&quot;N_America&quot;</span>, <span class="st">&quot;SE_Asia&quot;</span>, <span class="st">&quot;S_Asia&quot;</span>,</span>
<span id="cb189-4"><a href="#cb189-4" tabindex="-1"></a>    <span class="st">&quot;Sub_Saharan&quot;</span>, <span class="st">&quot;W_Europe&quot;</span>)</span>
<span id="cb189-5"><a href="#cb189-5" tabindex="-1"></a><span class="fu">levels</span>(happy_df<span class="sc">$</span>Region) <span class="ot">&lt;-</span> short_region_names</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-352-1.png" width="1536" /></p>
<ol start="7" style="list-style-type: decimal">
<li><p>Save the above as a jpeg called “Region_happiness_boxplots.jpg” with a width of 1600 pixels and a height of 750 pixels.</p></li>
<li><p>Last task! Carry out t-tests on the following comparisons for Happiness Score and determine if the means are significantly different.</p>
<ul>
<li>West Europe and North America</li>
<li>West Europe and South Asia</li>
<li>South Asia and South Eastern Asia</li>
</ul></li>
</ol>

</div>
</div>
</div>
<div id="stats-solutions" class="section level1" number="19">
<h1><span class="header-section-number">Chapter 19</span> Stats solutions</h1>
<div id="world-happiness-report-solutions" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> World happiness report solutions</h2>
<p><img src="figures/world_happiness_solutions.png" width="20%" style="display: block; margin: auto;" />
1. Read in the file</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" tabindex="-1"></a>happy_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Chapter_17-18/world_happiness_report_2016.csv&quot;</span>, </span>
<span id="cb190-2"><a href="#cb190-2" tabindex="-1"></a>                      <span class="at">check.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb190-3"><a href="#cb190-3" tabindex="-1"></a>                      <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>,</span>
<span id="cb190-4"><a href="#cb190-4" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb190-5"><a href="#cb190-5" tabindex="-1"></a>                      )</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Answer the following questions using the output from one <strong>function</strong>:</li>
</ol>
<div class="sourceCode" id="cb191"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" tabindex="-1"></a><span class="fu">summary</span>(happy_df)</span></code></pre></div>
<pre><code>##         Country                                Region   Happiness Rank   Happiness Score Lower Confidence Interval
##  Afghanistan:  1   Sub-Saharan Africa             :38   Min.   :  1.00   Min.   :2.905   Min.   :2.732            
##  Albania    :  1   Central and Eastern Europe     :29   1st Qu.: 40.00   1st Qu.:4.404   1st Qu.:4.327            
##  Algeria    :  1   Latin America and Caribbean    :24   Median : 79.00   Median :5.314   Median :5.237            
##  Angola     :  1   Western Europe                 :21   Mean   : 78.98   Mean   :5.382   Mean   :5.282            
##  Argentina  :  1   Middle East and Northern Africa:19   3rd Qu.:118.00   3rd Qu.:6.269   3rd Qu.:6.154            
##  Armenia    :  1   Southeastern Asia              : 9   Max.   :157.00   Max.   :7.526   Max.   :7.460            
##  (Other)    :151   (Other)                        :17                                                             
##  Upper Confidence Interval Economy (GDP per Capita)     Family       Health (Life Expectancy)    Freedom      
##  Min.   :3.078             Min.   :0.0000           Min.   :0.0000   Min.   :0.0000           Min.   :0.0000  
##  1st Qu.:4.465             1st Qu.:0.6702           1st Qu.:0.6418   1st Qu.:0.3829           1st Qu.:0.2575  
##  Median :5.419             Median :1.0278           Median :0.8414   Median :0.5966           Median :0.3975  
##  Mean   :5.482             Mean   :0.9539           Mean   :0.7936   Mean   :0.5576           Mean   :0.3710  
##  3rd Qu.:6.434             3rd Qu.:1.2796           3rd Qu.:1.0215   3rd Qu.:0.7299           3rd Qu.:0.4845  
##  Max.   :7.669             Max.   :1.8243           Max.   :1.1833   Max.   :0.9528           Max.   :0.6085  
##                                                                                                               
##  Trust (Government Corruption)   Generosity     Dystopia Residual
##  Min.   :0.00000               Min.   :0.0000   Min.   :0.8179   
##  1st Qu.:0.06126               1st Qu.:0.1546   1st Qu.:2.0317   
##  Median :0.10547               Median :0.2225   Median :2.2907   
##  Mean   :0.13762               Mean   :0.2426   Mean   :2.3258   
##  3rd Qu.:0.17554               3rd Qu.:0.3119   3rd Qu.:2.6646   
##  Max.   :0.50521               Max.   :0.8197   Max.   :3.8377   
## </code></pre>
<ul>
<li>How many countries are in the region “Western Europe”?
<ul>
<li><strong>21</strong></li>
</ul></li>
<li>What is the maximum number in the “Happiness Score” column?
<ul>
<li><strong>7.526</strong></li>
</ul></li>
<li>From the columns “Economy (GDP per Capital)” to “Dystopia Residual”, which has the highest mean and which has the lowest?
<ul>
<li><strong>Highest: “Dystopia Residual” with 2.3258</strong></li>
<li><strong>Lowest: “Trust (Government Corruption)” with 0.13762</strong></li>
</ul></li>
</ul>
<p>3.Produce the plot</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" tabindex="-1"></a><span class="co">#Fit linear model of Economy (x) against Family (y)</span></span>
<span id="cb193-2"><a href="#cb193-2" tabindex="-1"></a>fit_economy_family <span class="ot">&lt;-</span> </span>
<span id="cb193-3"><a href="#cb193-3" tabindex="-1"></a>  <span class="fu">lm</span>(Family<span class="sc">~</span><span class="st">`</span><span class="at">Economy (GDP per Capita)</span><span class="st">`</span>, <span class="at">data =</span> happy_df)</span>
<span id="cb193-4"><a href="#cb193-4" tabindex="-1"></a><span class="co">#Create string for linear equation</span></span>
<span id="cb193-5"><a href="#cb193-5" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">round</span>(fit_economy_family<span class="sc">$</span>coefficients[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb193-6"><a href="#cb193-6" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">round</span>(fit_economy_family<span class="sc">$</span>coefficients[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb193-7"><a href="#cb193-7" tabindex="-1"></a>lm_equation <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;y = &quot;</span>, m , <span class="st">&quot;x + &quot;</span>, c)</span>
<span id="cb193-8"><a href="#cb193-8" tabindex="-1"></a><span class="co">#Produce plot</span></span>
<span id="cb193-9"><a href="#cb193-9" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> happy_df<span class="sc">$</span><span class="st">`</span><span class="at">Economy (GDP per Capita)</span><span class="st">`</span>,</span>
<span id="cb193-10"><a href="#cb193-10" tabindex="-1"></a>     <span class="at">y =</span> happy_df<span class="sc">$</span>Family,</span>
<span id="cb193-11"><a href="#cb193-11" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Comparison of the effect of </span><span class="sc">\n</span><span class="st"> Economy and Family on happiness&quot;</span>,</span>
<span id="cb193-12"><a href="#cb193-12" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Economy (GDP per Capita)&quot;</span>,</span>
<span id="cb193-13"><a href="#cb193-13" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Family&quot;</span>,</span>
<span id="cb193-14"><a href="#cb193-14" tabindex="-1"></a>     <span class="at">pch =</span> <span class="fu">as.numeric</span>(happy_df<span class="sc">$</span>Region),</span>
<span id="cb193-15"><a href="#cb193-15" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.5</span>),</span>
<span id="cb193-16"><a href="#cb193-16" tabindex="-1"></a>     <span class="at">col =</span> <span class="dv">1</span>)</span>
<span id="cb193-17"><a href="#cb193-17" tabindex="-1"></a><span class="co">#Add abline</span></span>
<span id="cb193-18"><a href="#cb193-18" tabindex="-1"></a><span class="fu">abline</span>(fit_economy_family, <span class="at">col =</span> <span class="st">&quot;mediumslateblue&quot;</span>)</span>
<span id="cb193-19"><a href="#cb193-19" tabindex="-1"></a><span class="co">#Add equation to top right</span></span>
<span id="cb193-20"><a href="#cb193-20" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">0.4</span>, <span class="at">y =</span> <span class="fl">1.1</span>, <span class="at">labels =</span> lm_equation)</span>
<span id="cb193-21"><a href="#cb193-21" tabindex="-1"></a><span class="co">#Add the legend</span></span>
<span id="cb193-22"><a href="#cb193-22" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb193-23"><a href="#cb193-23" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(happy_df<span class="sc">$</span>Region),</span>
<span id="cb193-24"><a href="#cb193-24" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(happy_df<span class="sc">$</span>Region))</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-357-1.png" width="768" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Save plot as png file</li>
</ol>
<div class="sourceCode" id="cb194"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" tabindex="-1"></a><span class="co">#PNG command</span></span>
<span id="cb194-2"><a href="#cb194-2" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;Chapter_17-18/Economy_vs_family.png&quot;</span>, </span>
<span id="cb194-3"><a href="#cb194-3" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;in&quot;</span>, <span class="at">height =</span> <span class="dv">8</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">res =</span> <span class="dv">200</span>)</span>
<span id="cb194-4"><a href="#cb194-4" tabindex="-1"></a><span class="co">#Produce plot</span></span>
<span id="cb194-5"><a href="#cb194-5" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> happy_df<span class="sc">$</span><span class="st">`</span><span class="at">Economy (GDP per Capita)</span><span class="st">`</span>,</span>
<span id="cb194-6"><a href="#cb194-6" tabindex="-1"></a>     <span class="at">y =</span> happy_df<span class="sc">$</span>Family,</span>
<span id="cb194-7"><a href="#cb194-7" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Comparison of the effect of </span><span class="sc">\n</span><span class="st"> Economy and Family on happiness&quot;</span>,</span>
<span id="cb194-8"><a href="#cb194-8" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Economy (GDP per Capita)&quot;</span>,</span>
<span id="cb194-9"><a href="#cb194-9" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Family&quot;</span>,</span>
<span id="cb194-10"><a href="#cb194-10" tabindex="-1"></a>     <span class="at">pch =</span> <span class="fu">as.numeric</span>(happy_df<span class="sc">$</span>Region),</span>
<span id="cb194-11"><a href="#cb194-11" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.5</span>),</span>
<span id="cb194-12"><a href="#cb194-12" tabindex="-1"></a>     <span class="at">col =</span> <span class="dv">1</span>)</span>
<span id="cb194-13"><a href="#cb194-13" tabindex="-1"></a><span class="co">#Add abline</span></span>
<span id="cb194-14"><a href="#cb194-14" tabindex="-1"></a><span class="fu">abline</span>(fit_economy_family, <span class="at">col =</span> <span class="st">&quot;mediumslateblue&quot;</span>)</span>
<span id="cb194-15"><a href="#cb194-15" tabindex="-1"></a><span class="co">#Add equation to top right</span></span>
<span id="cb194-16"><a href="#cb194-16" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="fl">0.4</span>, <span class="at">y =</span> <span class="fl">1.1</span>, <span class="at">labels =</span> lm_equation)</span>
<span id="cb194-17"><a href="#cb194-17" tabindex="-1"></a><span class="co">#Add the legend</span></span>
<span id="cb194-18"><a href="#cb194-18" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb194-19"><a href="#cb194-19" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(happy_df<span class="sc">$</span>Region),</span>
<span id="cb194-20"><a href="#cb194-20" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">levels</span>(happy_df<span class="sc">$</span>Region))</span>
<span id="cb194-21"><a href="#cb194-21" tabindex="-1"></a><span class="co">#dev.off</span></span>
<span id="cb194-22"><a href="#cb194-22" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Answers for the following questions:</li>
</ol>
<ul>
<li>Does the linear model have a positive or negative gradient?
<ul>
<li><strong>Positive</strong> (m = 0.4328)</li>
</ul></li>
<li>Which variable (Economy or Family) has higher values?
<ul>
<li><strong>Economy</strong></li>
</ul></li>
<li>If the value of Economy was 2.1 what would be the predictive value of Family according to the linear model equation?
<ul>
<li>__(0.4328*2.1) + 0.3808 = 1.28968__</li>
</ul></li>
<li>Which region appears to have the highest values for Economy and for Family?
<ul>
<li><strong>Western Europe</strong></li>
</ul></li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Produce boxplot</li>
</ol>
<div class="sourceCode" id="cb195"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" tabindex="-1"></a><span class="co">#Change level names</span></span>
<span id="cb195-2"><a href="#cb195-2" tabindex="-1"></a>short_region_names <span class="ot">&lt;-</span> </span>
<span id="cb195-3"><a href="#cb195-3" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;OZ_n_NZ&quot;</span>, <span class="st">&quot;C_n_E_Europe&quot;</span>, <span class="st">&quot;E_Asia&quot;</span>, <span class="st">&quot;Latin_A_n_Carib&quot;</span>,</span>
<span id="cb195-4"><a href="#cb195-4" tabindex="-1"></a>    <span class="st">&quot;ME_n_N_Africa&quot;</span>, <span class="st">&quot;N_America&quot;</span>, <span class="st">&quot;SE_Asia&quot;</span>, <span class="st">&quot;S_Asia&quot;</span>,</span>
<span id="cb195-5"><a href="#cb195-5" tabindex="-1"></a>    <span class="st">&quot;Sub_Saharan&quot;</span>, <span class="st">&quot;W_Europe&quot;</span>)</span>
<span id="cb195-6"><a href="#cb195-6" tabindex="-1"></a><span class="fu">levels</span>(happy_df<span class="sc">$</span>Region) <span class="ot">&lt;-</span> short_region_names</span>
<span id="cb195-7"><a href="#cb195-7" tabindex="-1"></a><span class="co">#Create boxplot</span></span>
<span id="cb195-8"><a href="#cb195-8" tabindex="-1"></a><span class="fu">boxplot</span>(<span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span><span class="sc">~</span>Region, <span class="at">data =</span> happy_df, </span>
<span id="cb195-9"><a href="#cb195-9" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),</span>
<span id="cb195-10"><a href="#cb195-10" tabindex="-1"></a>        <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(happy_df<span class="sc">$</span>Region),</span>
<span id="cb195-11"><a href="#cb195-11" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Happiness scores across regions&quot;</span></span>
<span id="cb195-12"><a href="#cb195-12" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-359-1.png" width="1536" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Save as jpeg</li>
</ol>
<div class="sourceCode" id="cb196"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" tabindex="-1"></a><span class="co">#jpeg</span></span>
<span id="cb196-2"><a href="#cb196-2" tabindex="-1"></a><span class="fu">jpeg</span>(<span class="at">filename =</span> <span class="st">&quot;Chapter_17-18/Region_happiness_boxplots.jpg&quot;</span>, <span class="at">units =</span> <span class="st">&quot;px&quot;</span>,</span>
<span id="cb196-3"><a href="#cb196-3" tabindex="-1"></a>     <span class="at">width =</span> <span class="dv">1600</span>, <span class="at">height =</span> <span class="dv">750</span> )</span>
<span id="cb196-4"><a href="#cb196-4" tabindex="-1"></a><span class="co">#Create boxplot</span></span>
<span id="cb196-5"><a href="#cb196-5" tabindex="-1"></a><span class="fu">boxplot</span>(<span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span><span class="sc">~</span>Region, <span class="at">data =</span> happy_df, </span>
<span id="cb196-6"><a href="#cb196-6" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),</span>
<span id="cb196-7"><a href="#cb196-7" tabindex="-1"></a>        <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(happy_df<span class="sc">$</span>Region),</span>
<span id="cb196-8"><a href="#cb196-8" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Happiness scores across regions&quot;</span></span>
<span id="cb196-9"><a href="#cb196-9" tabindex="-1"></a>)</span>
<span id="cb196-10"><a href="#cb196-10" tabindex="-1"></a><span class="co">#dev.off</span></span>
<span id="cb196-11"><a href="#cb196-11" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<ol start="8" style="list-style-type: decimal">
<li>T-tests</li>
</ol>
<div class="sourceCode" id="cb197"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" tabindex="-1"></a><span class="co">#Subset the data frames to get vectors of our regions of interest</span></span>
<span id="cb197-2"><a href="#cb197-2" tabindex="-1"></a>WE_happiness <span class="ot">&lt;-</span> happy_df[happy_df<span class="sc">$</span>Region <span class="sc">==</span> <span class="st">&quot;W_Europe&quot;</span>,<span class="st">&quot;Happiness Score&quot;</span>]</span>
<span id="cb197-3"><a href="#cb197-3" tabindex="-1"></a>NA_happiness <span class="ot">&lt;-</span> happy_df[happy_df<span class="sc">$</span>Region <span class="sc">==</span> <span class="st">&quot;N_America&quot;</span>,<span class="st">&quot;Happiness Score&quot;</span>] </span>
<span id="cb197-4"><a href="#cb197-4" tabindex="-1"></a>SA_happiness <span class="ot">&lt;-</span> happy_df[happy_df<span class="sc">$</span>Region <span class="sc">==</span> <span class="st">&quot;S_Asia&quot;</span>,<span class="st">&quot;Happiness Score&quot;</span>] </span>
<span id="cb197-5"><a href="#cb197-5" tabindex="-1"></a>SEA_happiness <span class="ot">&lt;-</span> happy_df[happy_df<span class="sc">$</span>Region <span class="sc">==</span> <span class="st">&quot;SE_Asia&quot;</span>,<span class="st">&quot;Happiness Score&quot;</span>]</span>
<span id="cb197-6"><a href="#cb197-6" tabindex="-1"></a><span class="co">#Carry out t-tests</span></span>
<span id="cb197-7"><a href="#cb197-7" tabindex="-1"></a>WE_NA_ttest <span class="ot">&lt;-</span> <span class="fu">t.test</span>(WE_happiness, NA_happiness)</span>
<span id="cb197-8"><a href="#cb197-8" tabindex="-1"></a>WE_SA_ttest <span class="ot">&lt;-</span> <span class="fu">t.test</span>(WE_happiness, SA_happiness)</span>
<span id="cb197-9"><a href="#cb197-9" tabindex="-1"></a>SA_SEA_ttest <span class="ot">&lt;-</span> <span class="fu">t.test</span>(SA_happiness, SEA_happiness)</span>
<span id="cb197-10"><a href="#cb197-10" tabindex="-1"></a><span class="co">#Extract p values into a new vector with element names</span></span>
<span id="cb197-11"><a href="#cb197-11" tabindex="-1"></a>region_happiness_pvalues <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">WE_NA =</span> WE_NA_ttest<span class="sc">$</span>p.value,</span>
<span id="cb197-12"><a href="#cb197-12" tabindex="-1"></a>                              <span class="at">WE_SA =</span> WE_SA_ttest<span class="sc">$</span>p.value,</span>
<span id="cb197-13"><a href="#cb197-13" tabindex="-1"></a>                              <span class="at">SA_SEA =</span> SA_SEA_ttest<span class="sc">$</span>p.value)</span>
<span id="cb197-14"><a href="#cb197-14" tabindex="-1"></a><span class="co">#Logical to determine if the p-value is less than 0.05</span></span>
<span id="cb197-15"><a href="#cb197-15" tabindex="-1"></a><span class="co">#I.e. the means are significantly different</span></span>
<span id="cb197-16"><a href="#cb197-16" tabindex="-1"></a>region_happiness_pvalues <span class="sc">&lt;</span> <span class="fl">0.05</span></span></code></pre></div>
<pre><code>##  WE_NA  WE_SA SA_SEA 
##  FALSE   TRUE  FALSE</code></pre>

</div>
</div>
<div id="basicprogramming" class="section level1" number="20">
<h1><span class="header-section-number">Chapter 20</span> Basic programming</h1>
<p><img src="figures/programming.png" width="20%" style="display: block; margin: auto;" />
In this chapter we will be look at some basic programming with R. This will involve <strong>loops</strong>, <strong>if</strong> statements, and creating your own <strong>functions</strong>.</p>
<p>Create and use the directory “Chapter_20-21” as the working directory for this chapter. Additionally create a new script called “Programming.R” for this chapter.</p>
<div id="recycle-rule" class="section level2" number="20.1">
<h2><span class="header-section-number">20.1</span> Recycle rule</h2>
<p><img src="figures/recycle.png" width="20%" style="display: block; margin: auto;" />
When two <strong>objects</strong> of different lengths act upon each other the smaller <strong>object</strong> will be recycled so each element in the larger <strong>object</strong> is acted upon.</p>
<p>We will demonstrate this with the below example. Run the command below and then read the explanation.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" tabindex="-1"></a>small_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb199-2"><a href="#cb199-2" tabindex="-1"></a>large_vec <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">9</span>) </span>
<span id="cb199-3"><a href="#cb199-3" tabindex="-1"></a>small_vec <span class="sc">*</span> large_vec</span></code></pre></div>
<ul>
<li><code>small_vec</code> is a <strong>vector</strong> with 3 <strong>elements</strong>, the numbers 1 to 3.</li>
<li><code>large_vec</code> is a <strong>vector</strong> with 9 <strong>elements</strong>, this is the number 1 repeated 9 times.</li>
<li>As <code>small_vec</code> is 3 times smaller than <code>large_vec</code> each <strong>element</strong> in <code>small_vec</code> is recycled 2 times on top of the first usage.
<ul>
<li>The first <code>small_vec</code> <strong>element</strong> is used to multiply the 1st, 4th, and 7th positions of <code>large_vec</code>.</li>
<li>The second <code>small_vec</code> <strong>element</strong> is used to multiply the 2nd, 5th, and 8th positions of <code>large_vec</code>.</li>
<li>The last/third <code>small_vec</code> <strong>element</strong> is used to multiply the 3rd, 6th, and 9th positions of <code>large_vec</code>.</li>
</ul></li>
</ul>
<p>Below is an example with a visualisation. <code>large_vec</code> is the numbers 1 to 9 this time:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" tabindex="-1"></a>small_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb200-2"><a href="#cb200-2" tabindex="-1"></a>large_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span> </span>
<span id="cb200-3"><a href="#cb200-3" tabindex="-1"></a>small_vec <span class="sc">*</span> large_vec</span></code></pre></div>
<p><img src="figures/recycle_rule_example_1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Depending on the length of the large <strong>vector</strong> the <strong>elements</strong> of the smaller <strong>vector</strong> may be recycled an uneven amount of times. For example:</p>
<ul>
<li>The smaller <strong>vector</strong> has 3 <strong>elements</strong>.</li>
<li>The larger <strong>vector</strong> has 4 <strong>elements</strong>.</li>
<li>The 1st <strong>element</strong> of the smaller <strong>vector</strong> would be used twice (recycled once).</li>
<li>The 2nd &amp; 3rd <strong>elements</strong> of the smaller <strong>vector</strong> would be used once (not recycled).</li>
</ul>
<p>Below is a quick example of this. You should notice a warning is printed out as the length of the <strong>objects</strong> are not multiples of each other. However, above the warning is the correct output.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">*</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">4</span>)</span></code></pre></div>
<p>Warnings usually mean the code will run fine but R thinks you may have done something wrong which you should check. Errors on the other hand mean the R code did not work.</p>
<p>Below are a few more examples of using the recycle rule:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" tabindex="-1"></a><span class="co">#When you multiply one number (scalar) by a numeric vector</span></span>
<span id="cb202-2"><a href="#cb202-2" tabindex="-1"></a><span class="co">#You are recycling the one number (scalar)</span></span>
<span id="cb202-3"><a href="#cb202-3" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb202-4"><a href="#cb202-4" tabindex="-1"></a><span class="co">#Some numeric recycling</span></span>
<span id="cb202-5"><a href="#cb202-5" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span> <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb202-6"><a href="#cb202-6" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span> <span class="sc">+</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span></span>
<span id="cb202-7"><a href="#cb202-7" tabindex="-1"></a><span class="dv">8</span><span class="sc">:</span><span class="dv">1</span> <span class="sc">-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb202-8"><a href="#cb202-8" tabindex="-1"></a><span class="dv">2</span><span class="sc">:</span><span class="dv">1</span> <span class="sc">/</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb202-9"><a href="#cb202-9" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">*</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">120</span>, <span class="dv">10</span>)</span>
<span id="cb202-10"><a href="#cb202-10" tabindex="-1"></a><span class="co">#Strings can be recycled with the paste() function</span></span>
<span id="cb202-11"><a href="#cb202-11" tabindex="-1"></a><span class="co">#You&#39;ll notice that no warnings appear this time</span></span>
<span id="cb202-12"><a href="#cb202-12" tabindex="-1"></a><span class="co">#even though the lengths of the variables are not multiples</span></span>
<span id="cb202-13"><a href="#cb202-13" tabindex="-1"></a>recyclable_materials <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A:aluminium&quot;</span>,<span class="st">&quot;B:glass&quot;</span>,<span class="st">&quot;C:paper&quot;</span>)</span>
<span id="cb202-14"><a href="#cb202-14" tabindex="-1"></a>recycle_centres <span class="ot">&lt;-</span> <span class="fu">rep</span>(</span>
<span id="cb202-15"><a href="#cb202-15" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;1:old swan&quot;</span>,<span class="st">&quot;2:otterspool&quot;</span>,<span class="st">&quot;3:south sefton&quot;</span>,<span class="st">&quot;4:Huyton&quot;</span>,<span class="st">&quot;5:Kirkby&quot;</span>),</span>
<span id="cb202-16"><a href="#cb202-16" tabindex="-1"></a>  <span class="dv">2</span></span>
<span id="cb202-17"><a href="#cb202-17" tabindex="-1"></a>)</span>
<span id="cb202-18"><a href="#cb202-18" tabindex="-1"></a><span class="fu">paste0</span>(recyclable_materials, <span class="st">&quot; can be recycled at &quot;</span>, recycle_centres)</span></code></pre></div>
</div>
<div id="loops" class="section level2" number="20.2">
<h2><span class="header-section-number">20.2</span> Loops</h2>
<p><img src="figures/loop.png" width="20%" style="display: block; margin: auto;" /></p>
<p>With <strong>loops</strong> we can carry out the same commands and <strong>functions</strong> on multiple <strong>elements</strong> within a 1 dimensional <strong>object</strong> (<strong>vector</strong> or <strong>list</strong>) without having to type it out multiple times.</p>
<p>There are 2 main types of <strong>loops</strong>: <strong>for loops</strong> and <strong>while loops</strong>.</p>
<div id="for-loops" class="section level3" number="20.2.1">
<h3><span class="header-section-number">20.2.1</span> For loops</h3>
<p><strong>For loops</strong> will run through a set of <strong>variables</strong>. Each <strong>variable</strong> will be run through the set of commands once.</p>
<p>The basic format of a <strong>for loop</strong> is (don’t run the below):</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" tabindex="-1"></a><span class="cf">for</span> (variable <span class="cf">in</span> vector<span class="sc">/</span>list) {</span>
<span id="cb203-2"><a href="#cb203-2" tabindex="-1"></a>  command<span class="sc">/</span>s</span>
<span id="cb203-3"><a href="#cb203-3" tabindex="-1"></a>}</span></code></pre></div>
<p>We will run a simple example below. We need the <code>print()</code> <strong>function</strong> so the results are print to the console. If this was not done nothing would be print out as it is a <strong>loop</strong>:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb204-2"><a href="#cb204-2" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb204-3"><a href="#cb204-3" tabindex="-1"></a>}</span></code></pre></div>
<p>In essence the below was carried out:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" tabindex="-1"></a>loop_vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb205-2"><a href="#cb205-2" tabindex="-1"></a>i <span class="ot">&lt;-</span> loop_vec[<span class="dv">1</span>]</span>
<span id="cb205-3"><a href="#cb205-3" tabindex="-1"></a><span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb205-4"><a href="#cb205-4" tabindex="-1"></a>i <span class="ot">&lt;-</span> loop_vec[<span class="dv">2</span>]</span>
<span id="cb205-5"><a href="#cb205-5" tabindex="-1"></a><span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb205-6"><a href="#cb205-6" tabindex="-1"></a>i <span class="ot">&lt;-</span> loop_vec[<span class="dv">3</span>]</span>
<span id="cb205-7"><a href="#cb205-7" tabindex="-1"></a><span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb205-8"><a href="#cb205-8" tabindex="-1"></a>i <span class="ot">&lt;-</span> loop_vec[<span class="dv">4</span>]</span>
<span id="cb205-9"><a href="#cb205-9" tabindex="-1"></a><span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">10</span>)</span>
<span id="cb205-10"><a href="#cb205-10" tabindex="-1"></a>i <span class="ot">&lt;-</span> loop_vec[<span class="dv">5</span>]</span>
<span id="cb205-11"><a href="#cb205-11" tabindex="-1"></a><span class="fu">print</span>(i <span class="sc">*</span> <span class="dv">10</span>)</span></code></pre></div>
<p>Except instead of many lines we were able to carry it out in one command rather than many.</p>
<p>Analogy:</p>
<ul>
<li>The loop is a circular assembly line.</li>
<li>Machines carry out the commands on the provided <strong>variables</strong>.</li>
<li>A worker will put the first <strong>element</strong> of the provided <strong>vector/list</strong> on the assembly, therefore setting it as <code>i</code>.</li>
<li>The machines will carry out the commands on <code>i</code>.</li>
<li>Once the worker gets the 1st set of results they will put the 2nd <strong>element</strong> on the assembly line, setting it as <code>i</code>.</li>
<li>This will repeat till the results from all the <strong>elements</strong> are returned.</li>
</ul>
<p>A few more examples:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>)) {</span>
<span id="cb206-2"><a href="#cb206-2" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb206-3"><a href="#cb206-3" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb206-4"><a href="#cb206-4" tabindex="-1"></a>}</span>
<span id="cb206-5"><a href="#cb206-5" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>)) {</span>
<span id="cb206-6"><a href="#cb206-6" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">%%</span> <span class="dv">3</span>)</span>
<span id="cb206-7"><a href="#cb206-7" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">%%</span> <span class="dv">2</span>)</span>
<span id="cb206-8"><a href="#cb206-8" tabindex="-1"></a>}</span>
<span id="cb206-9"><a href="#cb206-9" tabindex="-1"></a><span class="co">#You can have loops in a loop</span></span>
<span id="cb206-10"><a href="#cb206-10" tabindex="-1"></a><span class="cf">for</span> (y <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb206-11"><a href="#cb206-11" tabindex="-1"></a>  <span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) {</span>
<span id="cb206-12"><a href="#cb206-12" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(y, <span class="st">&quot; + &quot;</span>, x, <span class="st">&quot; = &quot;</span>, y<span class="sc">+</span>x))</span>
<span id="cb206-13"><a href="#cb206-13" tabindex="-1"></a>  }</span>
<span id="cb206-14"><a href="#cb206-14" tabindex="-1"></a>}</span>
<span id="cb206-15"><a href="#cb206-15" tabindex="-1"></a></span>
<span id="cb206-16"><a href="#cb206-16" tabindex="-1"></a><span class="co">#Let us make the fibonacci sequence (first 10 numbers) as a vector</span></span>
<span id="cb206-17"><a href="#cb206-17" tabindex="-1"></a><span class="co">#First we create a vector that contains the number 1 twice</span></span>
<span id="cb206-18"><a href="#cb206-18" tabindex="-1"></a>fibo_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb206-19"><a href="#cb206-19" tabindex="-1"></a><span class="co">#In a loop we can use the loop variable (i) to index objects</span></span>
<span id="cb206-20"><a href="#cb206-20" tabindex="-1"></a><span class="co">#We can use this for assignment and subsetting</span></span>
<span id="cb206-21"><a href="#cb206-21" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb206-22"><a href="#cb206-22" tabindex="-1"></a>  fibo_vec[i] <span class="ot">&lt;-</span> fibo_vec[i<span class="dv">-1</span>] <span class="sc">+</span> fibo_vec[i<span class="dv">-2</span>]</span>
<span id="cb206-23"><a href="#cb206-23" tabindex="-1"></a>}</span>
<span id="cb206-24"><a href="#cb206-24" tabindex="-1"></a><span class="co">#Check out the vector</span></span>
<span id="cb206-25"><a href="#cb206-25" tabindex="-1"></a>fibo_vec</span></code></pre></div>
<p>A lot of what we have been doing we could do without <strong>loops</strong>. Where I find <strong>for loops</strong> handy is when I want to carry out a task on multiple columns or rows.</p>
<p>We can use <strong>for loops</strong> to quickly create a multiplication table in a matrix.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" tabindex="-1"></a><span class="co">#First we create a matrix with NA values</span></span>
<span id="cb207-2"><a href="#cb207-2" tabindex="-1"></a><span class="co">#Make sure it contains the number of rows and columns we want</span></span>
<span id="cb207-3"><a href="#cb207-3" tabindex="-1"></a>multiplication_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="cn">NA</span>, <span class="at">nrow =</span> <span class="dv">10</span>, <span class="at">ncol =</span> <span class="dv">10</span>)</span>
<span id="cb207-4"><a href="#cb207-4" tabindex="-1"></a><span class="co">#Next we create a vector to loop over</span></span>
<span id="cb207-5"><a href="#cb207-5" tabindex="-1"></a>loop_vec <span class="ot">&lt;-</span>  <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb207-6"><a href="#cb207-6" tabindex="-1"></a><span class="co">#Now to loop through the loop_vec for the columns</span></span>
<span id="cb207-7"><a href="#cb207-7" tabindex="-1"></a><span class="cf">for</span> (c <span class="cf">in</span> loop_vec) {</span>
<span id="cb207-8"><a href="#cb207-8" tabindex="-1"></a>  <span class="co">#Next we loop through the loop_vec for the rows</span></span>
<span id="cb207-9"><a href="#cb207-9" tabindex="-1"></a>  <span class="cf">for</span> (r <span class="cf">in</span> loop_vec){</span>
<span id="cb207-10"><a href="#cb207-10" tabindex="-1"></a>    <span class="co">#Calculate the multiplication</span></span>
<span id="cb207-11"><a href="#cb207-11" tabindex="-1"></a>    multiply_number <span class="ot">&lt;-</span> c <span class="sc">*</span> r</span>
<span id="cb207-12"><a href="#cb207-12" tabindex="-1"></a>    <span class="co">#Assign the relevant position in the matrix to the multiplication</span></span>
<span id="cb207-13"><a href="#cb207-13" tabindex="-1"></a>    multiplication_mat[r,c] <span class="ot">&lt;-</span> multiply_number</span>
<span id="cb207-14"><a href="#cb207-14" tabindex="-1"></a>  }</span>
<span id="cb207-15"><a href="#cb207-15" tabindex="-1"></a>}</span>
<span id="cb207-16"><a href="#cb207-16" tabindex="-1"></a><span class="co">#Check the matrix</span></span>
<span id="cb207-17"><a href="#cb207-17" tabindex="-1"></a>multiplication_mat</span></code></pre></div>
<p>We can then use <strong>for loops</strong> to carry out specific commands to each column or each row.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" tabindex="-1"></a><span class="co">#First thing we are going to do is divide each number in the matrix</span></span>
<span id="cb208-2"><a href="#cb208-2" tabindex="-1"></a><span class="co">#By the column total of its column</span></span>
<span id="cb208-3"><a href="#cb208-3" tabindex="-1"></a><span class="co">#We&#39;ll save the results in a new matrix called mult_prop_col_mat</span></span>
<span id="cb208-4"><a href="#cb208-4" tabindex="-1"></a><span class="co">#Create the new matrix</span></span>
<span id="cb208-5"><a href="#cb208-5" tabindex="-1"></a>mult_prop_col_mat <span class="ot">&lt;-</span> multiplication_mat</span>
<span id="cb208-6"><a href="#cb208-6" tabindex="-1"></a><span class="co">#Loop through the columns</span></span>
<span id="cb208-7"><a href="#cb208-7" tabindex="-1"></a><span class="cf">for</span> (c <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mult_prop_col_mat)) {</span>
<span id="cb208-8"><a href="#cb208-8" tabindex="-1"></a>  <span class="co">#Calculate column total</span></span>
<span id="cb208-9"><a href="#cb208-9" tabindex="-1"></a>  column_total <span class="ot">&lt;-</span> <span class="fu">sum</span>(mult_prop_col_mat[,c])</span>
<span id="cb208-10"><a href="#cb208-10" tabindex="-1"></a>  <span class="co">#Assign calculated proportion vector to the column</span></span>
<span id="cb208-11"><a href="#cb208-11" tabindex="-1"></a>  mult_prop_col_mat[,c] <span class="ot">&lt;-</span> mult_prop_col_mat[,c] <span class="sc">/</span> column_total</span>
<span id="cb208-12"><a href="#cb208-12" tabindex="-1"></a>}</span>
<span id="cb208-13"><a href="#cb208-13" tabindex="-1"></a><span class="co">#check new matrix</span></span>
<span id="cb208-14"><a href="#cb208-14" tabindex="-1"></a>mult_prop_col_mat</span>
<span id="cb208-15"><a href="#cb208-15" tabindex="-1"></a></span>
<span id="cb208-16"><a href="#cb208-16" tabindex="-1"></a><span class="co">#We&#39;ll do the same again but for each row</span></span>
<span id="cb208-17"><a href="#cb208-17" tabindex="-1"></a><span class="co">#This time with no annotation</span></span>
<span id="cb208-18"><a href="#cb208-18" tabindex="-1"></a>mult_prop_row_mat <span class="ot">&lt;-</span> multiplication_mat</span>
<span id="cb208-19"><a href="#cb208-19" tabindex="-1"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mult_prop_row_mat)) {</span>
<span id="cb208-20"><a href="#cb208-20" tabindex="-1"></a>  mult_prop_row_mat[r,] <span class="ot">&lt;-</span> </span>
<span id="cb208-21"><a href="#cb208-21" tabindex="-1"></a>    mult_prop_row_mat[r,] <span class="sc">/</span> </span>
<span id="cb208-22"><a href="#cb208-22" tabindex="-1"></a>    <span class="fu">sum</span>(mult_prop_row_mat[r,])</span>
<span id="cb208-23"><a href="#cb208-23" tabindex="-1"></a>}</span>
<span id="cb208-24"><a href="#cb208-24" tabindex="-1"></a>mult_prop_row_mat</span></code></pre></div>
<p>Hopefully this is clear how <strong>for loops</strong> can be used. Further down we’ll work with a real dataset to show some real world applications. However, for now we will go onto <strong>while loops</strong>.</p>
</div>
<div id="while-loops" class="section level3" number="20.2.2">
<h3><span class="header-section-number">20.2.2</span> While loops</h3>
<p>I do not use <strong>while loops</strong> often so we will only briefly go over them. A <strong>while loop</strong> will loop over a series of commands until a condition is no longer met. Conditions will either be TRUE or FALSE (logical)</p>
<p>The format of a <strong>while loop</strong>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" tabindex="-1"></a><span class="cf">while</span> (condition) {</span>
<span id="cb209-2"><a href="#cb209-2" tabindex="-1"></a>  command<span class="sc">/</span>s</span>
<span id="cb209-3"><a href="#cb209-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Below is an example:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb210-2"><a href="#cb210-2" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb210-3"><a href="#cb210-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(</span>
<span id="cb210-4"><a href="#cb210-4" tabindex="-1"></a>    <span class="st">&quot;At the start of loop number:&quot;</span>, i, <span class="st">&quot;, the variable i is &quot;</span>, i))</span>
<span id="cb210-5"><a href="#cb210-5" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb210-6"><a href="#cb210-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;-----&quot;</span>))</span>
<span id="cb210-7"><a href="#cb210-7" tabindex="-1"></a>}</span>
<span id="cb210-8"><a href="#cb210-8" tabindex="-1"></a>i</span></code></pre></div>
<p>In this case 1 is being added to <code>i</code> in each loop. The loop keeps going till <code>i</code> is no longer less than 10. Therefore, at the end of the <strong>while loop</strong> <code>i</code> is equal to 10.</p>
<p>One final point on <strong>while loops</strong>. You can make a <strong>while loop</strong> so the condition will always be met. If this is the case the <strong>while loop</strong> will never finish and you’ll need to use “ESC” in the console to stop the <strong>while loop</strong>. An example is below which you should not run:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb211-2"><a href="#cb211-2" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb211-3"><a href="#cb211-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(</span>
<span id="cb211-4"><a href="#cb211-4" tabindex="-1"></a>    <span class="st">&quot;At the start of loop number:&quot;</span>, i, <span class="st">&quot;, the variable i is &quot;</span>, i))</span>
<span id="cb211-5"><a href="#cb211-5" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb211-6"><a href="#cb211-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;-----&quot;</span>))</span>
<span id="cb211-7"><a href="#cb211-7" tabindex="-1"></a>}</span>
<span id="cb211-8"><a href="#cb211-8" tabindex="-1"></a>i</span></code></pre></div>
</div>
</div>
<div id="if-statements" class="section level2" number="20.3">
<h2><span class="header-section-number">20.3</span> If statements</h2>
<p><img src="figures/flow_chart.png" width="20%" style="display: block; margin: auto;" />
<strong>If statements</strong> allow for different commands to be carried out depending on <strong>if</strong> a condition is met.</p>
<p>This can be thought of like a flow chart where you go one way if you answer yes and another if you answer no. Example:</p>
<ul>
<li>Are you thirsty?</li>
<li>If yes, have something to drink.</li>
<li>If no, do not have something to drink.</li>
</ul>
<p>Basic format of an <strong>if equation</strong>:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" tabindex="-1"></a><span class="cf">if</span> (condition) {</span>
<span id="cb212-2"><a href="#cb212-2" tabindex="-1"></a>  command<span class="sc">/</span>s <span class="cf">if</span> condition true</span>
<span id="cb212-3"><a href="#cb212-3" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb212-4"><a href="#cb212-4" tabindex="-1"></a>  command<span class="sc">/</span>s <span class="cf">if</span> condition false</span>
<span id="cb212-5"><a href="#cb212-5" tabindex="-1"></a>}</span></code></pre></div>
<p>I’ll show you a coding example using the modulus (<code>%%</code>) <strong>operator</strong>.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" tabindex="-1"></a><span class="co">#Create a scalar</span></span>
<span id="cb213-2"><a href="#cb213-2" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb213-3"><a href="#cb213-3" tabindex="-1"></a><span class="co">#If statement determing if the remainder of i/2 is 1</span></span>
<span id="cb213-4"><a href="#cb213-4" tabindex="-1"></a><span class="cf">if</span> (( i <span class="sc">%%</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb213-5"><a href="#cb213-5" tabindex="-1"></a>  <span class="fu">paste0</span>(i, <span class="st">&quot; is odd&quot;</span>)</span>
<span id="cb213-6"><a href="#cb213-6" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb213-7"><a href="#cb213-7" tabindex="-1"></a>  <span class="fu">paste0</span>(i, <span class="st">&quot; is even&quot;</span>)</span>
<span id="cb213-8"><a href="#cb213-8" tabindex="-1"></a>}</span></code></pre></div>
<p>You can have an <strong>if statement</strong> within a <strong>loop</strong>.</p>
<p><strong>Reminder</strong>: We need to use <code>print()</code> within <strong>loops</strong> to print results to the console.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb214-2"><a href="#cb214-2" tabindex="-1"></a>  <span class="co">#If statement determining if the remainder of i/2 is 1</span></span>
<span id="cb214-3"><a href="#cb214-3" tabindex="-1"></a>  <span class="cf">if</span> (( i <span class="sc">%%</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb214-4"><a href="#cb214-4" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; is odd&quot;</span>))</span>
<span id="cb214-5"><a href="#cb214-5" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb214-6"><a href="#cb214-6" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(i, <span class="st">&quot; is even&quot;</span>))</span>
<span id="cb214-7"><a href="#cb214-7" tabindex="-1"></a>  }</span>
<span id="cb214-8"><a href="#cb214-8" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="functions-1" class="section level2" number="20.4">
<h2><span class="header-section-number">20.4</span> Functions</h2>
<p><img src="figures/custon_function.png" width="20%" style="display: block; margin: auto;" />
Throughout this course we have used many <strong>functions</strong>. However, you may want a <strong>function</strong> that does not exist. In this case you can create your own.</p>
<p>The format to create your own <strong>function</strong> is:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" tabindex="-1"></a>function_name <span class="ot">&lt;-</span> <span class="cf">function</span>(inputs_and_option_names){</span>
<span id="cb215-2"><a href="#cb215-2" tabindex="-1"></a>  command<span class="sc">/</span>s</span>
<span id="cb215-3"><a href="#cb215-3" tabindex="-1"></a>  <span class="fu">return</span>(new_variable)</span>
<span id="cb215-4"><a href="#cb215-4" tabindex="-1"></a>}</span></code></pre></div>
<p>There are 2 new <strong>functions</strong> above:</p>
<ul>
<li><code>function()</code>: This <strong>function</strong> creates the new <strong>function</strong>.</li>
<li><code>return()</code>: This specifies what will be returned when we run our new <strong>function</strong>.</li>
</ul>
<p>A quick example to add VAT to each number in a <strong>vector</strong>:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" tabindex="-1"></a><span class="co">#Create the function</span></span>
<span id="cb216-2"><a href="#cb216-2" tabindex="-1"></a>add_vat <span class="ot">&lt;-</span> <span class="cf">function</span>(input_num_vec) {</span>
<span id="cb216-3"><a href="#cb216-3" tabindex="-1"></a>  vat_vec <span class="ot">&lt;-</span> input_num_vec <span class="sc">*</span> <span class="fl">1.2</span></span>
<span id="cb216-4"><a href="#cb216-4" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">round</span>(vat_vec, <span class="at">digits =</span> <span class="dv">2</span>))</span>
<span id="cb216-5"><a href="#cb216-5" tabindex="-1"></a>}</span>
<span id="cb216-6"><a href="#cb216-6" tabindex="-1"></a><span class="co">#Example running the new function</span></span>
<span id="cb216-7"><a href="#cb216-7" tabindex="-1"></a><span class="fu">add_vat</span>(<span class="fl">0.99</span>)</span>
<span id="cb216-8"><a href="#cb216-8" tabindex="-1"></a><span class="fu">add_vat</span>(<span class="fu">c</span>(<span class="fl">9.99</span>, <span class="fl">8.78</span>, <span class="fl">2.45</span>))</span></code></pre></div>
<p>In the below example we will create a <strong>function</strong> that will <strong>return</strong> all numbers that are multiples of 5 from the input <strong>vector</strong>.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" tabindex="-1"></a><span class="co">#Create the function</span></span>
<span id="cb217-2"><a href="#cb217-2" tabindex="-1"></a>all_mult_5_func <span class="ot">&lt;-</span> <span class="cf">function</span>(input_num_vec){</span>
<span id="cb217-3"><a href="#cb217-3" tabindex="-1"></a>  <span class="co">#Create an empty vector prior to loop to contain multiples of 5</span></span>
<span id="cb217-4"><a href="#cb217-4" tabindex="-1"></a>  out_vec <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode=</span><span class="st">&quot;numeric&quot;</span>, <span class="at">length=</span><span class="dv">0</span>)</span>
<span id="cb217-5"><a href="#cb217-5" tabindex="-1"></a>  <span class="co">#Loop to add multiples of 5 to out_vec</span></span>
<span id="cb217-6"><a href="#cb217-6" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> input_num_vec){</span>
<span id="cb217-7"><a href="#cb217-7" tabindex="-1"></a>    <span class="co">#If statement so only multiples of 5 are added to the out_vec</span></span>
<span id="cb217-8"><a href="#cb217-8" tabindex="-1"></a>    <span class="co">#In this case no else part is required</span></span>
<span id="cb217-9"><a href="#cb217-9" tabindex="-1"></a>    <span class="cf">if</span> ((i <span class="sc">%%</span> <span class="dv">5</span>) <span class="sc">==</span> <span class="dv">0</span> ){</span>
<span id="cb217-10"><a href="#cb217-10" tabindex="-1"></a>      out_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(out_vec, i)</span>
<span id="cb217-11"><a href="#cb217-11" tabindex="-1"></a>    }</span>
<span id="cb217-12"><a href="#cb217-12" tabindex="-1"></a>  }</span>
<span id="cb217-13"><a href="#cb217-13" tabindex="-1"></a>  <span class="co">#Have the return function at the very end</span></span>
<span id="cb217-14"><a href="#cb217-14" tabindex="-1"></a>  <span class="fu">return</span>(out_vec)</span>
<span id="cb217-15"><a href="#cb217-15" tabindex="-1"></a>}</span>
<span id="cb217-16"><a href="#cb217-16" tabindex="-1"></a><span class="co">#Try out the function with some vectors</span></span>
<span id="cb217-17"><a href="#cb217-17" tabindex="-1"></a><span class="fu">all_mult_5_func</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb217-18"><a href="#cb217-18" tabindex="-1"></a><span class="fu">all_mult_5_func</span>(<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">8</span>))</span>
<span id="cb217-19"><a href="#cb217-19" tabindex="-1"></a><span class="fu">all_mult_5_func</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">*</span> <span class="dv">5</span>)</span></code></pre></div>
<p>Like with normal <strong>functions</strong> a custom one can be given multiple arguments if built that way. Knowing this we will alter the above <strong>function</strong> so it can <strong>return</strong> all numbers that are multiples of a chosen number.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" tabindex="-1"></a><span class="co">#When creating the function add in another input/option name</span></span>
<span id="cb218-2"><a href="#cb218-2" tabindex="-1"></a>all_mult_x_func <span class="ot">&lt;-</span> <span class="cf">function</span>(input_num_vec, multiple){</span>
<span id="cb218-3"><a href="#cb218-3" tabindex="-1"></a>  <span class="co">#Create an empty vector prior to loop to contain the multiples</span></span>
<span id="cb218-4"><a href="#cb218-4" tabindex="-1"></a>  out_vec <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode=</span><span class="st">&quot;numeric&quot;</span>, <span class="at">length=</span><span class="dv">0</span>)</span>
<span id="cb218-5"><a href="#cb218-5" tabindex="-1"></a>  <span class="co">#Loop to add the multiples to out_vec</span></span>
<span id="cb218-6"><a href="#cb218-6" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> input_num_vec){</span>
<span id="cb218-7"><a href="#cb218-7" tabindex="-1"></a>    <span class="co">#If statement so only multiples of the chosen number are added to the out_vec</span></span>
<span id="cb218-8"><a href="#cb218-8" tabindex="-1"></a>    <span class="co">#In this case no else part is required</span></span>
<span id="cb218-9"><a href="#cb218-9" tabindex="-1"></a>    <span class="cf">if</span> ((i <span class="sc">%%</span> multiple) <span class="sc">==</span> <span class="dv">0</span> ){</span>
<span id="cb218-10"><a href="#cb218-10" tabindex="-1"></a>      out_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(out_vec, i)</span>
<span id="cb218-11"><a href="#cb218-11" tabindex="-1"></a>    }</span>
<span id="cb218-12"><a href="#cb218-12" tabindex="-1"></a>  }</span>
<span id="cb218-13"><a href="#cb218-13" tabindex="-1"></a>  <span class="co">#Have the return function at the very end</span></span>
<span id="cb218-14"><a href="#cb218-14" tabindex="-1"></a>  <span class="fu">return</span>(out_vec)</span>
<span id="cb218-15"><a href="#cb218-15" tabindex="-1"></a>}</span>
<span id="cb218-16"><a href="#cb218-16" tabindex="-1"></a><span class="co">#Try out the function with some vectors</span></span>
<span id="cb218-17"><a href="#cb218-17" tabindex="-1"></a><span class="fu">all_mult_x_func</span>(<span class="at">input_num_vec =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">multiple =</span> <span class="dv">2</span>)</span>
<span id="cb218-18"><a href="#cb218-18" tabindex="-1"></a><span class="fu">all_mult_x_func</span>(<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">8</span>), <span class="dv">4</span>)</span>
<span id="cb218-19"><a href="#cb218-19" tabindex="-1"></a><span class="fu">all_mult_x_func</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">*</span> <span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb218-20"><a href="#cb218-20" tabindex="-1"></a><span class="co">#As always we can assign the output of a function to a new variable</span></span>
<span id="cb218-21"><a href="#cb218-21" tabindex="-1"></a>multiples_of_6_btwn_1_100 <span class="ot">&lt;-</span> <span class="fu">all_mult_x_func</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">6</span>)</span></code></pre></div>
<p>With all that we are now going to a real dataset in the next session to show the use and applications of these new techniques.</p>

</div>
</div>
<div id="student-grades-example" class="section level1" number="21">
<h1><span class="header-section-number">Chapter 21</span> Student grades example</h1>
<p><img src="figures/grades.png" width="20%" style="display: block; margin: auto;" />
In this section we are going to go through analysing datasets of students grades.</p>
<div id="the-student-grades-data" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> The student grades data</h2>
<p><img src="figures/data.png" width="15%" style="display: block; margin: auto;" /></p>
<p>Download the five following files into your directory “Chapter_20-21”.</p>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_A.tsv">student_grades_group_A.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_B.tsv">student_grades_group_B.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_C.tsv">student_grades_group_C.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_D.tsv">student_grades_group_D.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_E.tsv">student_grades_group_E.tsv</a></li>
</ul>
<p>These files contain the marks secured by USA students in various subjects. The files are separated by anonymised race/ethnicity (groups A-E).</p>
<p>The files each contain the columns:</p>
<ul>
<li><strong>gender</strong>: female or male.</li>
<li><strong>parental level of education</strong>: some high school, high school, associate’s degree, some college, bachelor’s degree, or master’s degree.</li>
<li><strong>lunch</strong>: Whether the student ate free/reduced lunches or standard lunches.</li>
<li><strong>test preparation course</strong>: Whether the student completed a test prep course (completed) or not (none).</li>
<li><strong>math score</strong>: The student’s math score.</li>
<li><strong>reading score</strong>: The student’s reading score.</li>
<li><strong>writing score</strong>: The student’s writing score.</li>
</ul>
<p>Source of data: <a href="https://www.kaggle.com/spscientist/students-performance-in-exams" class="uri">https://www.kaggle.com/spscientist/students-performance-in-exams</a></p>
</div>
<div id="analysis-script" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> Analysis script</h2>
<p><img src="figures/hashtag2.png" width="20%" style="display: block; margin: auto;" />
Before carrying on I would suggest to set your working directory into the directory “Chapter_20-21”.</p>
<p>Now create a new R Script and save it as “student_grades.R” in the “Chapter_20-21” directory. It is useful to have your scripts close to their relevant data.</p>
<p>Ensure you use annotations and code sections to keep your script organised and tidy.</p>
<p>One extra tip: I normally like to keep a <code>setwd()</code> command at the top of my R Scripts so the script will set itself to the correct working directory. I just copy the relevant command from the <strong>console</strong>.</p>
</div>
<div id="reading-in-and-preprocessing-the-data" class="section level2" number="21.3">
<h2><span class="header-section-number">21.3</span> Reading in and preprocessing the data</h2>
<p><img src="figures/r_read.png" width="20%" style="display: block; margin: auto;" />
We are going to first read in the data and carry out some changes to it. First we’ll carry this out on just the group A data.</p>
<p>Read in the group A TSV (tab separated value) file:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" tabindex="-1"></a>group_a_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;student_grades_group_A.tsv&quot;</span>,</span>
<span id="cb219-2"><a href="#cb219-2" tabindex="-1"></a>                       <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>,</span>
<span id="cb219-3"><a href="#cb219-3" tabindex="-1"></a>                       <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>,</span>
<span id="cb219-4"><a href="#cb219-4" tabindex="-1"></a>                       <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>When you first read in a file it is always good practice to check the resulting <strong>data frame’s</strong> contents:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" tabindex="-1"></a><span class="co">#Check the top 5 rows</span></span>
<span id="cb220-2"><a href="#cb220-2" tabindex="-1"></a><span class="fu">head</span>(group_a_df)</span>
<span id="cb220-3"><a href="#cb220-3" tabindex="-1"></a><span class="co">#View the data frame</span></span>
<span id="cb220-4"><a href="#cb220-4" tabindex="-1"></a><span class="fu">View</span>(group_a_df)</span>
<span id="cb220-5"><a href="#cb220-5" tabindex="-1"></a><span class="co">#Summary of each of its columns</span></span>
<span id="cb220-6"><a href="#cb220-6" tabindex="-1"></a><span class="fu">summary</span>(group_a_df)</span></code></pre></div>
<p>There are three main things we want to do with this <strong>data frame</strong>:</p>
<ul>
<li>Change the column names so spaces are underscores. We can carry this out with <code>gsub()</code>.</li>
<li>Change the order of the levels for the column “parental level of education” so they are in order from least to most education. We can do this with the <code>factor()</code> <strong>function</strong>.</li>
<li>Add a group column which will contain the information on what race/ethnicity group each student belongs to. This will contain all the same info for this <strong>data frame</strong> but it will be useful later on. We are happy for it to be a <strong>character</strong> column for now.</li>
</ul>
<p>Let us carry out these tasks:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" tabindex="-1"></a><span class="co">#Change spaces to _ in column names</span></span>
<span id="cb221-2"><a href="#cb221-2" tabindex="-1"></a><span class="fu">colnames</span>(group_a_df) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot; &quot;</span>, </span>
<span id="cb221-3"><a href="#cb221-3" tabindex="-1"></a>                             <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb221-4"><a href="#cb221-4" tabindex="-1"></a>                             <span class="at">x =</span> <span class="fu">colnames</span>(group_a_df))</span>
<span id="cb221-5"><a href="#cb221-5" tabindex="-1"></a><span class="co">#check our change</span></span>
<span id="cb221-6"><a href="#cb221-6" tabindex="-1"></a><span class="fu">colnames</span>(group_a_df)</span>
<span id="cb221-7"><a href="#cb221-7" tabindex="-1"></a></span>
<span id="cb221-8"><a href="#cb221-8" tabindex="-1"></a><span class="co">#Change the order of the parental level of education levels</span></span>
<span id="cb221-9"><a href="#cb221-9" tabindex="-1"></a>edu_level_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;some high school&quot;</span>,<span class="st">&quot;high school&quot;</span>,</span>
<span id="cb221-10"><a href="#cb221-10" tabindex="-1"></a>                     <span class="st">&quot;associate&#39;s degree&quot;</span>,<span class="st">&quot;some college&quot;</span>,</span>
<span id="cb221-11"><a href="#cb221-11" tabindex="-1"></a>                     <span class="st">&quot;bachelor&#39;s degree&quot;</span>,<span class="st">&quot;master&#39;s degree&quot;</span>)         </span>
<span id="cb221-12"><a href="#cb221-12" tabindex="-1"></a>group_a_df<span class="sc">$</span>parental_level_of_education <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb221-13"><a href="#cb221-13" tabindex="-1"></a>  group_a_df<span class="sc">$</span>parental_level_of_education,</span>
<span id="cb221-14"><a href="#cb221-14" tabindex="-1"></a>  <span class="at">levels =</span> edu_level_order</span>
<span id="cb221-15"><a href="#cb221-15" tabindex="-1"></a>)</span>
<span id="cb221-16"><a href="#cb221-16" tabindex="-1"></a><span class="co">#check our change</span></span>
<span id="cb221-17"><a href="#cb221-17" tabindex="-1"></a><span class="fu">levels</span>(group_a_df<span class="sc">$</span>parental_level_of_education)</span>
<span id="cb221-18"><a href="#cb221-18" tabindex="-1"></a></span>
<span id="cb221-19"><a href="#cb221-19" tabindex="-1"></a><span class="co">#Add group column using the recycle rule</span></span>
<span id="cb221-20"><a href="#cb221-20" tabindex="-1"></a>group_a_df[,<span class="st">&quot;group&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;group_A&quot;</span></span>
<span id="cb221-21"><a href="#cb221-21" tabindex="-1"></a><span class="co">#check the new column</span></span>
<span id="cb221-22"><a href="#cb221-22" tabindex="-1"></a>group_a_df<span class="sc">$</span>group</span></code></pre></div>
<p>Great we have created code to <strong>read</strong> in our file and preprocess the <strong>data frame</strong>. We have checked the output and know it produces the <strong>data frame</strong> in the format we want.</p>
<p>We could copy and paste the code four times and change the relevant <strong>variable names</strong> to <strong>read</strong> in groups B-E. This would be pretty annoying and time consuming though.</p>
<p>Instead let us create a <strong>function</strong> to do this for us. This will mostly use the same code above with <strong>variable names</strong> changed. There are a few changes though especially for the “group_name”” column creation.</p>
<p><strong>Note</strong>: The <strong>variable names</strong> used within the <strong>function</strong> should not be the same as any you are using outside the <strong>function</strong>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" tabindex="-1"></a><span class="co">#Function name: &quot;read_and_preprocess&quot;</span></span>
<span id="cb222-2"><a href="#cb222-2" tabindex="-1"></a><span class="co">#Input: file_name</span></span>
<span id="cb222-3"><a href="#cb222-3" tabindex="-1"></a>read_and_preprocess <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name){</span>
<span id="cb222-4"><a href="#cb222-4" tabindex="-1"></a>  <span class="co">#read in the file</span></span>
<span id="cb222-5"><a href="#cb222-5" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(file_name, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>,</span>
<span id="cb222-6"><a href="#cb222-6" tabindex="-1"></a>                 <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb222-7"><a href="#cb222-7" tabindex="-1"></a>  <span class="co">#column name change</span></span>
<span id="cb222-8"><a href="#cb222-8" tabindex="-1"></a>  <span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>, <span class="at">x =</span> <span class="fu">colnames</span>(df))</span>
<span id="cb222-9"><a href="#cb222-9" tabindex="-1"></a>  <span class="co">#Parental level of education order</span></span>
<span id="cb222-10"><a href="#cb222-10" tabindex="-1"></a>  edu_level_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;some high school&quot;</span>,<span class="st">&quot;high school&quot;</span>,</span>
<span id="cb222-11"><a href="#cb222-11" tabindex="-1"></a>                       <span class="st">&quot;associate&#39;s degree&quot;</span>,<span class="st">&quot;some college&quot;</span>,</span>
<span id="cb222-12"><a href="#cb222-12" tabindex="-1"></a>                       <span class="st">&quot;bachelor&#39;s degree&quot;</span>,<span class="st">&quot;master&#39;s degree&quot;</span>)         </span>
<span id="cb222-13"><a href="#cb222-13" tabindex="-1"></a>  df<span class="sc">$</span>parental_level_of_education <span class="ot">&lt;-</span> </span>
<span id="cb222-14"><a href="#cb222-14" tabindex="-1"></a>    <span class="fu">factor</span>(df<span class="sc">$</span>parental_level_of_education, <span class="at">levels =</span> edu_level_order)</span>
<span id="cb222-15"><a href="#cb222-15" tabindex="-1"></a>  <span class="co">#extract the group name from the file name</span></span>
<span id="cb222-16"><a href="#cb222-16" tabindex="-1"></a>  group_name <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;.*_group&quot;</span>,<span class="st">&quot;group&quot;</span>, file_name)</span>
<span id="cb222-17"><a href="#cb222-17" tabindex="-1"></a>  group_name <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;.tsv&quot;</span>,<span class="st">&quot;&quot;</span>, group_name)</span>
<span id="cb222-18"><a href="#cb222-18" tabindex="-1"></a>  <span class="co">#Add group column</span></span>
<span id="cb222-19"><a href="#cb222-19" tabindex="-1"></a>  df<span class="sc">$</span>group <span class="ot">&lt;-</span> group_name</span>
<span id="cb222-20"><a href="#cb222-20" tabindex="-1"></a>  <span class="co">#Return df</span></span>
<span id="cb222-21"><a href="#cb222-21" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb222-22"><a href="#cb222-22" tabindex="-1"></a>}</span></code></pre></div>
<p>We have created the _<strong>function</strong>. Now to run it with all our files:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" tabindex="-1"></a><span class="co">#We can specify the option name</span></span>
<span id="cb223-2"><a href="#cb223-2" tabindex="-1"></a><span class="co">#This is useful when we have lots of options</span></span>
<span id="cb223-3"><a href="#cb223-3" tabindex="-1"></a>group_a_df <span class="ot">&lt;-</span> <span class="fu">read_and_preprocess</span>(<span class="at">file_name =</span> <span class="st">&quot;student_grades_group_A.tsv&quot;</span>)</span>
<span id="cb223-4"><a href="#cb223-4" tabindex="-1"></a><span class="co">#But we don&#39;t need to, which is useful with less options</span></span>
<span id="cb223-5"><a href="#cb223-5" tabindex="-1"></a>group_b_df <span class="ot">&lt;-</span> <span class="fu">read_and_preprocess</span>(<span class="st">&quot;student_grades_group_B.tsv&quot;</span>)</span>
<span id="cb223-6"><a href="#cb223-6" tabindex="-1"></a>group_c_df <span class="ot">&lt;-</span> <span class="fu">read_and_preprocess</span>(<span class="st">&quot;student_grades_group_C.tsv&quot;</span>)</span>
<span id="cb223-7"><a href="#cb223-7" tabindex="-1"></a>group_d_df <span class="ot">&lt;-</span> <span class="fu">read_and_preprocess</span>(<span class="st">&quot;student_grades_group_D.tsv&quot;</span>)</span>
<span id="cb223-8"><a href="#cb223-8" tabindex="-1"></a>group_e_df <span class="ot">&lt;-</span> <span class="fu">read_and_preprocess</span>(<span class="st">&quot;student_grades_group_E.tsv&quot;</span>)</span></code></pre></div>
</div>
<div id="combining-the-data-frames" class="section level2" number="21.4">
<h2><span class="header-section-number">21.4</span> Combining the data frames</h2>
<p><img src="figures/combine.png" width="20%" style="display: block; margin: auto;" />
A lot of the time we have multiple files but we want all the data to be in one <strong>data frame</strong>.</p>
<p>The first step is to create a <strong>list</strong> containing our <strong>data frames</strong>. A <strong>list</strong> is just like a <strong>vector</strong> except it can hold heterogeneous data (multiple classes) whilst a <strong>vector</strong> can only contain homogeneous data (one class).</p>
<p>We will use this so we can <strong>loop</strong> over our <strong>data frames</strong>. There is more to <strong>lists</strong>, if you would like to see more check out: <a href="https://rc2e.com/datastructures#intro-DataStructures" class="uri">https://rc2e.com/datastructures#intro-DataStructures</a></p>
<p>We’ll start with creating our <strong>list</strong> then using a <strong>for loop</strong> to print out the first 3 rows of each <strong>data frame</strong>. To create a <strong>list</strong> of <strong>data frames</strong> we use the <strong>function</strong> <code>list()</code> just like we would with <code>c()</code>.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" tabindex="-1"></a><span class="co">#Create list</span></span>
<span id="cb224-2"><a href="#cb224-2" tabindex="-1"></a>df_lst <span class="ot">&lt;-</span> <span class="fu">list</span>(group_a_df, group_b_df, group_c_df, group_d_df, group_e_df)</span>
<span id="cb224-3"><a href="#cb224-3" tabindex="-1"></a><span class="co">#Loop through list</span></span>
<span id="cb224-4"><a href="#cb224-4" tabindex="-1"></a><span class="cf">for</span> (df <span class="cf">in</span> df_lst) {</span>
<span id="cb224-5"><a href="#cb224-5" tabindex="-1"></a>  <span class="co">#Print the first element of the group name column</span></span>
<span id="cb224-6"><a href="#cb224-6" tabindex="-1"></a>  <span class="fu">print</span>(df<span class="sc">$</span>group[<span class="dv">1</span>])</span>
<span id="cb224-7"><a href="#cb224-7" tabindex="-1"></a>  <span class="co">#Print the first 3 rows</span></span>
<span id="cb224-8"><a href="#cb224-8" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">head</span>(<span class="at">x =</span> df, <span class="at">n =</span> <span class="dv">3</span>))</span>
<span id="cb224-9"><a href="#cb224-9" tabindex="-1"></a>}</span></code></pre></div>
<p>With our <strong>list</strong> we can combine the <strong>data frames</strong> into one <strong>data frame</strong> with a <strong>for loop</strong> and <code>rbind()</code>.</p>
<p>It would be very simple but <code>rbind()</code> will not function if one of the <strong>data frames</strong> provided does not exist. We will therefore use an <strong>if statement</strong> to create a <strong>data frame</strong> for our combined data in the first loop.</p>
<p>We will use a new function, <code>exists()</code>. It will return <code>TRUE</code> if the provided <strong>variable</strong> exists and <code>FALSE</code> if it does not. The provided <strong>variable name</strong> needs to be a character (a string in quotes in this case).</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" tabindex="-1"></a><span class="co">#First ensure the variable we want to create does not exist</span></span>
<span id="cb225-2"><a href="#cb225-2" tabindex="-1"></a><span class="fu">rm</span>(student_grades_df)</span>
<span id="cb225-3"><a href="#cb225-3" tabindex="-1"></a><span class="co">#Now to loop through our list</span></span>
<span id="cb225-4"><a href="#cb225-4" tabindex="-1"></a><span class="cf">for</span> (df <span class="cf">in</span> df_lst) {</span>
<span id="cb225-5"><a href="#cb225-5" tabindex="-1"></a>  <span class="co">#If statment using the exists() function</span></span>
<span id="cb225-6"><a href="#cb225-6" tabindex="-1"></a>  <span class="co">#If the variable student_grades_df exists</span></span>
<span id="cb225-7"><a href="#cb225-7" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">exists</span>(<span class="st">&quot;student_grades_df&quot;</span>)) {</span>
<span id="cb225-8"><a href="#cb225-8" tabindex="-1"></a>    <span class="co">#Combine student_grades_df with df by rows</span></span>
<span id="cb225-9"><a href="#cb225-9" tabindex="-1"></a>    student_grades_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(student_grades_df, df)</span>
<span id="cb225-10"><a href="#cb225-10" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb225-11"><a href="#cb225-11" tabindex="-1"></a>    <span class="co">#else if it doesn&#39;t exist assign df as student_grades_df</span></span>
<span id="cb225-12"><a href="#cb225-12" tabindex="-1"></a>    student_grades_df <span class="ot">&lt;-</span> df</span>
<span id="cb225-13"><a href="#cb225-13" tabindex="-1"></a>  }</span>
<span id="cb225-14"><a href="#cb225-14" tabindex="-1"></a>}</span>
<span id="cb225-15"><a href="#cb225-15" tabindex="-1"></a></span>
<span id="cb225-16"><a href="#cb225-16" tabindex="-1"></a><span class="co">#whilst we are here let us change the group column to a factor now</span></span>
<span id="cb225-17"><a href="#cb225-17" tabindex="-1"></a><span class="co">#No need to change the order as we are happy with it being alphabetical</span></span>
<span id="cb225-18"><a href="#cb225-18" tabindex="-1"></a>student_grades_df<span class="sc">$</span>group <span class="ot">&lt;-</span> <span class="fu">factor</span>(student_grades_df<span class="sc">$</span>group)</span></code></pre></div>
</div>
<div id="saving-the-data-frame" class="section level2" number="21.5">
<h2><span class="header-section-number">21.5</span> Saving the data frame</h2>
<p><img src="figures/r_save.png" width="15%" style="display: block; margin: auto;" /></p>
<p>You can write the new <strong>data frame</strong> to a text file. This is good if you want to use the file outside of R.</p>
<p>What if you want to save a R <strong>object</strong> so you can use it later without having to run all the script you used to create it or <strong>reading</strong> in a file you created?</p>
<p>You can use the <code>save()</code> function:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" tabindex="-1"></a><span class="fu">save</span>(student_grades_df, <span class="at">file =</span> <span class="st">&quot;student_grades_df&quot;</span>)</span></code></pre></div>
<p>The above created a file called “students_grades_df” that is not human-readable. It contains the <strong>data frame</strong> <code>student_grades_df</code>. The name of the file and <strong>variable</strong> do not have to match but I find it easier if they do.</p>
<p>You can then load in the file which will load the <strong>variable</strong> with its <strong>variable name</strong>. Before we load the data we will remove our current <code>student_grades_df</code> <strong>object</strong>:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" tabindex="-1"></a><span class="co">#Remove the data frame</span></span>
<span id="cb227-2"><a href="#cb227-2" tabindex="-1"></a><span class="fu">rm</span>(student_grades_df)</span>
<span id="cb227-3"><a href="#cb227-3" tabindex="-1"></a><span class="co">#Load in the data frame</span></span>
<span id="cb227-4"><a href="#cb227-4" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;student_grades_df&quot;</span>)</span></code></pre></div>
<p>Saving your R <strong>objects</strong> acts as very good checkpoints after code that takes a long time to run.</p>
</div>
<div id="scaling-grading" class="section level2" number="21.6">
<h2><span class="header-section-number">21.6</span> Scaling &amp; Grading</h2>
<p><img src="figures/letter_grades.png" width="20%" style="display: block; margin: auto;" />
We currently have the base scores (%) for the students but not their letter grade (A,B,C, or F in this case).</p>
<p>Before we provide the grades we are go to scale each student’s results. There are complicated ways to do this but we will get the mean score for each topic (math, writing, and reading). For each score below the mean we will minus 5 and for each score above will will add 5. Scores equal to the mean will not be affected.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" tabindex="-1"></a><span class="co">#Create function to scale score vector</span></span>
<span id="cb228-2"><a href="#cb228-2" tabindex="-1"></a>scale_score <span class="ot">&lt;-</span> <span class="cf">function</span>(score_vec){</span>
<span id="cb228-3"><a href="#cb228-3" tabindex="-1"></a>  <span class="co">#Get mean score which we will round to 0 decimal places</span></span>
<span id="cb228-4"><a href="#cb228-4" tabindex="-1"></a>  mean_score <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(score_vec), <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb228-5"><a href="#cb228-5" tabindex="-1"></a>  <span class="co">#Create an empty scale_score_vec to add to</span></span>
<span id="cb228-6"><a href="#cb228-6" tabindex="-1"></a>  scale_score_vec <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb228-7"><a href="#cb228-7" tabindex="-1"></a>  <span class="co">#Loop through scores to scale them</span></span>
<span id="cb228-8"><a href="#cb228-8" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(score_vec)) {</span>
<span id="cb228-9"><a href="#cb228-9" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score_vec[i]</span>
<span id="cb228-10"><a href="#cb228-10" tabindex="-1"></a>    <span class="co">#if to add 5 if larger than mean</span></span>
<span id="cb228-11"><a href="#cb228-11" tabindex="-1"></a>    <span class="cf">if</span> (score <span class="sc">&gt;</span> mean_score) { score <span class="ot">&lt;-</span> score <span class="sc">+</span> <span class="dv">5</span> }</span>
<span id="cb228-12"><a href="#cb228-12" tabindex="-1"></a>    <span class="co">#if to minus 5 if lower than mean</span></span>
<span id="cb228-13"><a href="#cb228-13" tabindex="-1"></a>    <span class="cf">if</span> (score <span class="sc">&lt;</span> mean_score) { score <span class="ot">&lt;-</span> score <span class="sc">-</span> <span class="dv">5</span> }</span>
<span id="cb228-14"><a href="#cb228-14" tabindex="-1"></a>    <span class="co">#We don&#39;t add or minus anything if the score is equal to the mean</span></span>
<span id="cb228-15"><a href="#cb228-15" tabindex="-1"></a>    <span class="co">#Add the scaled score to the scale_score_vec</span></span>
<span id="cb228-16"><a href="#cb228-16" tabindex="-1"></a>    scale_score_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(scale_score_vec, score)</span>
<span id="cb228-17"><a href="#cb228-17" tabindex="-1"></a>  }</span>
<span id="cb228-18"><a href="#cb228-18" tabindex="-1"></a>  <span class="co">#Return the created vector</span></span>
<span id="cb228-19"><a href="#cb228-19" tabindex="-1"></a>  <span class="fu">return</span>(scale_score_vec)</span>
<span id="cb228-20"><a href="#cb228-20" tabindex="-1"></a>}</span>
<span id="cb228-21"><a href="#cb228-21" tabindex="-1"></a></span>
<span id="cb228-22"><a href="#cb228-22" tabindex="-1"></a><span class="co">#Run the function on the topics to create new scaled score topics</span></span>
<span id="cb228-23"><a href="#cb228-23" tabindex="-1"></a>student_grades_df<span class="sc">$</span>math_scaled_score <span class="ot">&lt;-</span> </span>
<span id="cb228-24"><a href="#cb228-24" tabindex="-1"></a>  <span class="fu">scale_score</span>(student_grades_df<span class="sc">$</span>math_score)</span>
<span id="cb228-25"><a href="#cb228-25" tabindex="-1"></a>student_grades_df<span class="sc">$</span>reading_scaled_score <span class="ot">&lt;-</span> </span>
<span id="cb228-26"><a href="#cb228-26" tabindex="-1"></a>  <span class="fu">scale_score</span>(student_grades_df<span class="sc">$</span>reading_score)</span>
<span id="cb228-27"><a href="#cb228-27" tabindex="-1"></a>student_grades_df<span class="sc">$</span>writing_scaled_score <span class="ot">&lt;-</span> </span>
<span id="cb228-28"><a href="#cb228-28" tabindex="-1"></a>  <span class="fu">scale_score</span>(student_grades_df<span class="sc">$</span>writing_score)</span></code></pre></div>
<p>Now we have scaled the scores. Some students now have more than 100% and some have less than 0% but that is fine. It doesn’t matter for their final grade.</p>
<p>We will give out grades based on the scaled scores like so:</p>
<ul>
<li><strong>A</strong>: &gt;=95%</li>
<li><strong>B</strong>: &gt;=80% and &lt;95%</li>
<li><strong>C</strong>: &gt;=60% and &lt;80%</li>
<li><strong>F</strong>: &lt;60%</li>
</ul>
<p>We can carry this out with the below code. To create it I copied the last code block and altered it. This time we use <code>else if</code> so the subsequent <strong>ifs</strong> only work if all the previous <strong>ifs</strong> were <code>FALSE</code>.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" tabindex="-1"></a><span class="co">#Create function to grade a vector</span></span>
<span id="cb229-2"><a href="#cb229-2" tabindex="-1"></a>grade_score <span class="ot">&lt;-</span> <span class="cf">function</span>(score_vec){</span>
<span id="cb229-3"><a href="#cb229-3" tabindex="-1"></a>  <span class="co">#Create empty grade_vec to add to</span></span>
<span id="cb229-4"><a href="#cb229-4" tabindex="-1"></a>  grade_vec <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb229-5"><a href="#cb229-5" tabindex="-1"></a>  <span class="co">#Loop through scores to scale them</span></span>
<span id="cb229-6"><a href="#cb229-6" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(score_vec)) {</span>
<span id="cb229-7"><a href="#cb229-7" tabindex="-1"></a>    <span class="co">#get current score</span></span>
<span id="cb229-8"><a href="#cb229-8" tabindex="-1"></a>    score <span class="ot">&lt;-</span> score_vec[i]</span>
<span id="cb229-9"><a href="#cb229-9" tabindex="-1"></a>    <span class="co">#if statements with else ifs</span></span>
<span id="cb229-10"><a href="#cb229-10" tabindex="-1"></a>    <span class="cf">if</span> (score <span class="sc">&gt;=</span> <span class="dv">95</span>) {</span>
<span id="cb229-11"><a href="#cb229-11" tabindex="-1"></a>      grade_vec[i] <span class="ot">&lt;-</span> <span class="st">&quot;A&quot;</span></span>
<span id="cb229-12"><a href="#cb229-12" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (score <span class="sc">&gt;=</span> <span class="dv">80</span>) {</span>
<span id="cb229-13"><a href="#cb229-13" tabindex="-1"></a>      grade_vec[i] <span class="ot">&lt;-</span> <span class="st">&quot;B&quot;</span></span>
<span id="cb229-14"><a href="#cb229-14" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (score <span class="sc">&gt;=</span> <span class="dv">60</span>) {</span>
<span id="cb229-15"><a href="#cb229-15" tabindex="-1"></a>      grade_vec[i] <span class="ot">&lt;-</span> <span class="st">&quot;C&quot;</span></span>
<span id="cb229-16"><a href="#cb229-16" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb229-17"><a href="#cb229-17" tabindex="-1"></a>      grade_vec[i] <span class="ot">&lt;-</span> <span class="st">&quot;F&quot;</span></span>
<span id="cb229-18"><a href="#cb229-18" tabindex="-1"></a>    }</span>
<span id="cb229-19"><a href="#cb229-19" tabindex="-1"></a>  }</span>
<span id="cb229-20"><a href="#cb229-20" tabindex="-1"></a>  <span class="co">#Return the created vector as a factor</span></span>
<span id="cb229-21"><a href="#cb229-21" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">factor</span>(grade_vec))</span>
<span id="cb229-22"><a href="#cb229-22" tabindex="-1"></a>}</span>
<span id="cb229-23"><a href="#cb229-23" tabindex="-1"></a><span class="co">#Run the function on the topics to create the grade columns</span></span>
<span id="cb229-24"><a href="#cb229-24" tabindex="-1"></a>student_grades_df<span class="sc">$</span>math_grade <span class="ot">&lt;-</span> </span>
<span id="cb229-25"><a href="#cb229-25" tabindex="-1"></a>  <span class="fu">grade_score</span>(student_grades_df<span class="sc">$</span>math_scaled_score)</span>
<span id="cb229-26"><a href="#cb229-26" tabindex="-1"></a>student_grades_df<span class="sc">$</span>reading_grade <span class="ot">&lt;-</span> </span>
<span id="cb229-27"><a href="#cb229-27" tabindex="-1"></a>  <span class="fu">grade_score</span>(student_grades_df<span class="sc">$</span>reading_scaled_score)</span>
<span id="cb229-28"><a href="#cb229-28" tabindex="-1"></a>student_grades_df<span class="sc">$</span>writing_grade <span class="ot">&lt;-</span> </span>
<span id="cb229-29"><a href="#cb229-29" tabindex="-1"></a>  <span class="fu">grade_score</span>(student_grades_df<span class="sc">$</span>writing_scaled_score)</span></code></pre></div>
<p>That is the last edit we will do to our <strong>data frame</strong> so lets <strong>save</strong> it.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" tabindex="-1"></a><span class="fu">save</span>(student_grades_df, <span class="at">file =</span> <span class="st">&quot;student_grades_df&quot;</span>)</span></code></pre></div>
</div>
<div id="some-quick-plots" class="section level2" number="21.7">
<h2><span class="header-section-number">21.7</span> Some quick plots</h2>
<p><img src="figures/bar_chart.png" width="20%" style="display: block; margin: auto;" />
Below are some quick plots with their code.</p>
<p>First let us see the distribution of grades for the three topics:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" tabindex="-1"></a><span class="co">#Math</span></span>
<span id="cb231-2"><a href="#cb231-2" tabindex="-1"></a><span class="co">#With plot()</span></span>
<span id="cb231-3"><a href="#cb231-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(student_grades_df<span class="sc">$</span>math_grade))</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-411-1.png" width="672" /></p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" tabindex="-1"></a><span class="co">#With barplot()</span></span>
<span id="cb232-2"><a href="#cb232-2" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(student_grades_df<span class="sc">$</span>math_grade))</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-412-1.png" width="672" /></p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" tabindex="-1"></a><span class="co">#Reading</span></span>
<span id="cb233-2"><a href="#cb233-2" tabindex="-1"></a><span class="co">#With barplot()</span></span>
<span id="cb233-3"><a href="#cb233-3" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(student_grades_df<span class="sc">$</span>reading_grade))</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-413-1.png" width="672" /></p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" tabindex="-1"></a><span class="co">#Writing</span></span>
<span id="cb234-2"><a href="#cb234-2" tabindex="-1"></a><span class="co">#With barplot()</span></span>
<span id="cb234-3"><a href="#cb234-3" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(student_grades_df<span class="sc">$</span>writing_grade))</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-414-1.png" width="672" /></p>
<p>It seems the grades are pretty low. Maybe that is to do with our scaling and harsh grading.</p>
<p>Quickly we’ll check the histogram of all the scores and all the scaled scores.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" tabindex="-1"></a><span class="co">#scores</span></span>
<span id="cb235-2"><a href="#cb235-2" tabindex="-1"></a><span class="fu">hist</span>(</span>
<span id="cb235-3"><a href="#cb235-3" tabindex="-1"></a>  <span class="fu">c</span>(student_grades_df<span class="sc">$</span>math_score, </span>
<span id="cb235-4"><a href="#cb235-4" tabindex="-1"></a>    student_grades_df<span class="sc">$</span>reading_score,</span>
<span id="cb235-5"><a href="#cb235-5" tabindex="-1"></a>    student_grades_df<span class="sc">$</span>writing_score</span>
<span id="cb235-6"><a href="#cb235-6" tabindex="-1"></a>  )</span>
<span id="cb235-7"><a href="#cb235-7" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-415-1.png" width="672" /></p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" tabindex="-1"></a><span class="co">#scaled scores</span></span>
<span id="cb236-2"><a href="#cb236-2" tabindex="-1"></a><span class="fu">hist</span>(</span>
<span id="cb236-3"><a href="#cb236-3" tabindex="-1"></a>  <span class="fu">c</span>(student_grades_df<span class="sc">$</span>math_scaled_score, </span>
<span id="cb236-4"><a href="#cb236-4" tabindex="-1"></a>    student_grades_df<span class="sc">$</span>reading_scaled_score,</span>
<span id="cb236-5"><a href="#cb236-5" tabindex="-1"></a>      student_grades_df<span class="sc">$</span>writing_scaled_score</span>
<span id="cb236-6"><a href="#cb236-6" tabindex="-1"></a>  )</span>
<span id="cb236-7"><a href="#cb236-7" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-416-1.png" width="672" /></p>
<p>We can see a big dip in the middle of the scaled scores but not in the non-scaled scores. Seems scaling just increased the distance between people who did better than others.</p>
<p>Last thing is we’ll create a boxplot of math scores separating the x axis by some metadata.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" tabindex="-1"></a><span class="fu">boxplot</span>(</span>
<span id="cb237-2"><a href="#cb237-2" tabindex="-1"></a>  math_score<span class="sc">~</span>test_preparation_course<span class="sc">+</span>lunch,</span>
<span id="cb237-3"><a href="#cb237-3" tabindex="-1"></a>  <span class="at">data =</span> student_grades_df)</span></code></pre></div>
<p><img src="NEOF-Intro-to-R_files/figure-html/unnamed-chunk-417-1.png" width="960" /></p>
<p>I think that is plenty of coding for today and for this course. Thank you very much!</p>
</div>
<div id="tips-for-creating-your-own-loops-and-functions" class="section level2" number="21.8">
<h2><span class="header-section-number">21.8</span> Tips for creating your own loops and functions</h2>
<p><img src="figures/tip_box.png" width="20%" style="display: block; margin: auto;" />
Before you go here are some quick tips.</p>
<ul>
<li>Create the code outside the <strong>loop/function</strong> to begin with.</li>
<li>Test with a small <strong>object</strong> to start (e.g. a part of a <strong>data frame</strong>).</li>
<li>Keep backups of code.</li>
<li>If you encounter errors try running your code step by step to determine where the error is.</li>
<li>It can useful to run the code inside your <strong>loop/function</strong> by setting the <strong>loop/function variable</strong> (e.g. <code>i &lt;- 1</code>)</li>
</ul>

</div>
</div>



</div>
<div id="appendix" class="section level1" number="22">
<h1><span class="header-section-number">A</span> Workshop slides &amp; videos</h1>
<div id="intro-and-foundations" class="section level2" number="22.1">
<h2><span class="header-section-number">A.1</span> Intro and foundations</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/mr5B4-6kcyU" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_1_intro_and_foundations.pdf">Slides</a></p>
</div>
<div id="classes-and-data-structures" class="section level2" number="22.2">
<h2><span class="header-section-number">A.2</span> Classes and data structures</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/BiN_DQxizgA" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_2_classess_and_data_structures.pdf">Slides</a></p>
</div>
<div id="files-and-subsetting" class="section level2" number="22.3">
<h2><span class="header-section-number">A.3</span> Files and subsetting</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/_hg7afEI5sU" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_3_files_sand_subsetting_data.pdf">Slides</a></p>
</div>
<div id="handy-tips-and-tricks" class="section level2" number="22.4">
<h2><span class="header-section-number">A.4</span> Handy tips and tricks</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/nv_lOsY_TTY" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_4_handy_tips_and_tricks.pdf">Slides</a></p>
</div>
<div id="plots-part-1" class="section level2" number="22.5">
<h2><span class="header-section-number">A.5</span> Plots part 1</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/4UrVC1saNKE" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_5_plots_1.pdf">Slides</a></p>
</div>
<div id="plots-part-2" class="section level2" number="22.6">
<h2><span class="header-section-number">A.6</span> Plots part 2</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/Yhh_sQYOx7E" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_6_plots_2.pdf">Slides</a></p>
</div>
<div id="basic-stats" class="section level2" number="22.7">
<h2><span class="header-section-number">A.7</span> Basic stats</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/Ff2_sfQvf3c" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_7_basic_stats.pdf">Slides</a></p>
</div>
<div id="basic-programming" class="section level2" number="22.8">
<h2><span class="header-section-number">A.8</span> Basic programming</h2>
<div class="container">
<iframe src="https://www.youtube.com/embed/O6F2N12VhjU" frameborder="0" allowfullscreen class="video">
</iframe>
</div>
<p><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Intro_to_R_8_basic_programming.pdf">Slides</a></p>
</div>
</div>
<div id="workshopfiles" class="section level1" number="23">
<h1><span class="header-section-number">B</span> Workshop files</h1>
<div id="chapter-7-files" class="section level2" number="23.1">
<h2><span class="header-section-number">B.1</span> Chapter 7 files</h2>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Liverpool_beaches.csv">Liverpool_beaches.csv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Global_eco_footprint.tsv">Global_eco_footprint.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/parks_biodiveristy.csv">parks_biodiveristy.csv</a></li>
</ul>
</div>
<div id="chapter-8-files" class="section level2" number="23.2">
<h2><span class="header-section-number">B.2</span> Chapter 8 files</h2>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/bat_roosts.csv">bat_roosts.csv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/honey_bee.tsv">honey_bee.tsv</a></li>
</ul>
</div>
<div id="chapter-10-11-files" class="section level2" number="23.3">
<h2><span class="header-section-number">B.3</span> Chapter 10-11 files</h2>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/tea_consumption.csv">tea_consumption.csv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/english_speaking_population_of_countries.tsv">english_speaking_population_of_countries.tsv</a></li>
</ul>
</div>
<div id="chapter-13-16-files" class="section level2" number="23.4">
<h2><span class="header-section-number">B.4</span> Chapter 13-16 files</h2>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/animal_sizes.csv">animal_sizes.csv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/penguin.tsv">penguin.tsv</a></li>
</ul>
</div>
<div id="chapter-17-19" class="section level2" number="23.5">
<h2><span class="header-section-number">B.5</span> Chapter 17-19</h2>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/Fish.csv">Fish.csv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/world_happiness_report_2016.csv">world_happiness_report_2016.csv</a></li>
</ul>
</div>
<div id="chapter-20-21" class="section level2" number="23.6">
<h2><span class="header-section-number">B.6</span> Chapter 20-21</h2>
<ul>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_A.tsv">student_grades_group_A.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_B.tsv">student_grades_group_B.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_C.tsv">student_grades_group_C.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_D.tsv">student_grades_group_D.tsv</a></li>
<li><a href="https://neof-workshops.github.io/R_j4c0xh/downloads/student_grades_group_E.tsv">student_grades_group_E.tsv</a></li>
</ul>
</div>
</div>
<div id="r-user-groups-and-forums" class="section level1" number="24">
<h1><span class="header-section-number">C</span> R user groups and forums</h1>
<ul>
<li><a href="https://jumpingrivers.github.io/meetingsR/r-user-groups.html#europe" class="uri">https://jumpingrivers.github.io/meetingsR/r-user-groups.html#europe</a></li>
<li><a href="https://www.r-consortium.org/blog/2019/09/09/r-community-explorer-r-user-groups" class="uri">https://www.r-consortium.org/blog/2019/09/09/r-community-explorer-r-user-groups</a></li>
<li><a href="https://r-dir.com/community/forums.html" class="uri">https://r-dir.com/community/forums.html</a></li>
</ul>
</div>
<div id="base-r-books-and-links" class="section level1" number="25">
<h1><span class="header-section-number">D</span> Base R books and links</h1>
<p><strong>Quick-R</strong>: <a href="https://www.statmethods.net/index.html" class="uri">https://www.statmethods.net/index.html</a></p>
<p><strong>R Cookbook</strong>: <a href="https://rc2e.com/" class="uri">https://rc2e.com/</a></p>
</div>
<div id="r-cheat-sheets" class="section level1" number="26">
<h1><span class="header-section-number">E</span> R cheat sheets</h1>
<p><a href="https://rstudio.com/resources/cheatsheets/" class="uri">https://rstudio.com/resources/cheatsheets/</a></p>
</div>
<div id="advanced-r-topics" class="section level1" number="27">
<h1><span class="header-section-number">F</span> Advanced R topics</h1>
<p><strong>R packages</strong>: <a href="https://r-pkgs.org/" class="uri">https://r-pkgs.org/</a></p>
<p><strong>Efficient R Programming</strong>: <a href="https://csgillespie.github.io/efficientR/" class="uri">https://csgillespie.github.io/efficientR/</a></p>
<p><strong>R for Data Science</strong>: <a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a></p>
<p><strong>R Graphics Cookbook</strong>: <a href="https://r-graphics.org/" class="uri">https://r-graphics.org/</a></p>
<p><strong>Fundamentals of Data Visualization</strong>: <a href="https://clauswilke.com/dataviz/" class="uri">https://clauswilke.com/dataviz/</a></p>
<p><strong>R BOOKDOWN</strong> (used to make this book): <a href="https://bookdown.org/" class="uri">https://bookdown.org/</a></p>
<p><strong>Hands-On Programming with R</strong>: <a href="https://rstudio-education.github.io/hopr/" class="uri">https://rstudio-education.github.io/hopr/</a></p>
<p><strong>Efficient R programming</strong>: <a href="https://csgillespie.github.io/efficientR/" class="uri">https://csgillespie.github.io/efficientR/</a></p>
</div>
<div id="datasets" class="section level1" number="28">
<h1><span class="header-section-number">G</span> Datasets</h1>
<p>I got a lot of my datasets from Kaggle: <a href="https://www.kaggle.com/" class="uri">https://www.kaggle.com/</a></p>

</div>
<p style="text-align: center;">
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
